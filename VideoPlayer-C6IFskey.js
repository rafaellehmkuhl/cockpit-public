import{c0 as B,d as I,bG as $,b as a,ai as O,aI as P,aH as j,q as V,aL as M,aN as R,aO as T,aj as z,v as h,k as g,o as p,c as v,a as d,j as H,h as l,B as r,V as U,C as E,N as f,F as A,aP as b,t as D,b0 as w,M as N,O as L,K as q,as as K,at as Y,_ as G}from"./index-BL_eQVn5.js";const W=B("v-banner-text"),y=u=>(K("data-v-73e044e5"),u=u(),Y(),u),J={ref:"videoWidget",class:"video-widget"},Q={key:0,class:"no-video-alert"},X=y(()=>d("span",null,"No video stream selected.",-1)),Z=[X],ee={key:1,class:"no-video-alert"},te=y(()=>d("p",null,"The selected stream is not available.",-1)),ae=y(()=>d("p",null,"Please check its source or select another stream.",-1)),oe=[te,ae],le={key:2,class:"no-video-alert"},se=y(()=>d("span",null,"Loading stream...",-1)),ie=[se],ne={class:"flex-wrap justify-center d-flex ga-5"},re=I({__name:"VideoPlayer",props:{widget:{}},setup(u){$(s=>({"26ff226e":a(e).options.videoFitStyle,"147be6dc":k.value}));const _=O(),{namesAvailableStreams:m}=P(_),e=j(u).widget,i=V(),c=V(),n=V();M(()=>{const s={videoFitStyle:"cover",flipHorizontally:!1,flipVertically:!1,rotationAngle:0,streamName:void 0};e.value.options=Object.assign({},s,e.value.options),i.value=e.value.options.streamName});const x=setInterval(()=>{e.value.options.streamName===void 0&&!m.value.isEmpty()&&(e.value.options.streamName=m.value[0],i.value=e.value.options.streamName,m.value.length>1&&R.fire({title:"Multiple streams detected",text:`You have multiple streams available, so we chose one randomly to start with.
        If you want to change it, please open the widget configuration on the edit-menu.`,icon:"info",confirmButtonText:"OK"}));const s=_.getMediaStream(e.value.options.streamName);T(s,n.value)||(n.value=s)},1e3);z(()=>clearInterval(x)),h(i,()=>{e.value.options.streamName=i.value,n.value=void 0}),h(n,()=>{!c.value||!n.value||(c.value.srcObject=n.value,c.value.play().then(()=>console.log("[VideoPlayer] Stream is playing")).catch(s=>{const t=`Failed to play stream. Reason: ${s}`;console.error(`[VideoPlayer] ${t}`)}))});const S=s=>{e.value.options.rotationAngle+=s},C=g(()=>`scale(${e.value.options.flipHorizontally?-1:1}, ${e.value.options.flipVertically?-1:1})`),F=g(()=>`rotate(${e.value.options.rotationAngle??0}deg)`),k=g(()=>`${C.value} ${F.value}`);return(s,t)=>(p(),v(q,null,[d("div",J,[i.value===void 0?(p(),v("div",Q,Z)):a(m).includes(i.value)?n.value===void 0?(p(),v("div",le,ie)):H("",!0):(p(),v("div",ee,oe)),d("video",{id:"mainDisplayStream",ref_key:"videoElement",ref:c,muted:"",autoplay:"",playsinline:"",disablePictureInPicture:""}," Your browser does not support the video tag. ",512)],512),l(L,{modelValue:a(e).managerVars.configMenuOpen,"onUpdate:modelValue":t[6]||(t[6]=o=>a(e).managerVars.configMenuOpen=o),width:"auto"},{default:r(()=>[l(U,{class:"pa-2"},{default:r(()=>[l(E,null,{default:r(()=>[f("Video widget config")]),_:1}),l(A,null,{default:r(()=>[l(b,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),label:"Stream name",class:"my-3",items:a(m),"item-title":"name",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":""},null,8,["modelValue","items"]),l(b,{modelValue:a(e).options.videoFitStyle,"onUpdate:modelValue":t[1]||(t[1]=o=>a(e).options.videoFitStyle=o),label:"Fit style",class:"my-3",items:["cover","fill","contain"],"item-title":"style",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":""},null,8,["modelValue"]),l(W,null,{default:r(()=>[f('Saved stream name: "'+D(a(e).options.streamName)+'"',1)]),_:1}),l(w,{modelValue:a(e).options.flipHorizontally,"onUpdate:modelValue":t[2]||(t[2]=o=>a(e).options.flipHorizontally=o),class:"my-1",label:"Flip horizontally",color:a(e).options.flipHorizontally?"rgb(0, 20, 80)":void 0,"hide-details":""},null,8,["modelValue","color"]),l(w,{modelValue:a(e).options.flipVertically,"onUpdate:modelValue":t[3]||(t[3]=o=>a(e).options.flipVertically=o),class:"my-1",label:"Flip vertically",color:a(e).options.flipVertically?"rgb(0, 20, 80)":void 0,"hide-details":""},null,8,["modelValue","color"]),d("div",ne,[l(N,{"prepend-icon":"mdi-file-rotate-left",variant:"outlined",onClick:t[4]||(t[4]=o=>S(-90))},{default:r(()=>[f(" Rotate Left")]),_:1}),l(N,{"prepend-icon":"mdi-file-rotate-right",variant:"outlined",onClick:t[5]||(t[5]=o=>S(90))},{default:r(()=>[f(" Rotate Right")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),me=G(re,[["__scopeId","data-v-73e044e5"]]);export{me as default};
