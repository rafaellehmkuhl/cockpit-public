import{d as ct,q as p,A as Vs,o as y,i as ve,B as h,h as v,V as Xt,C as As,a as c,n as le,t as N,F as $t,G as Os,H as Ds,j as D,I as We,J as Ms,c as I,K as Ne,L as Ze,M as Le,N as P,O as St,_ as Ct,P as qt,Q as Gt,R as Rs,S as Zt,T as Us,U as Jt,W as Ls,X as Fs,Y as Kt,Z as Bs,$ as Qt,a0 as zs,a1 as Ws,a2 as Hs,a3 as js,a4 as es,a5 as ts,v as Z,y as Nt,a6 as Ys,a7 as ss,a8 as Wt,a9 as Xs,aa as rt,ab as $s,ac as Je,ad as qs,ae as Gs,af as as,ag as Zs,ah as G,ai as is,aj as os,ak as Ae,al as Js,am as Ks,an as Qs,ao as ea,ap as ta,aq as sa,ar as aa,as as ns,at as ls,au as ia,av as oa,aw as na,ax as la,ay as ra,az as Ht,aA as ca,aB as ua,aC as da,aD as va,aE as fa,w as ha,aF as ma,aG as pa,aH as ga,aI as ya,aJ as _a,aK as xa,aL as Ta,k as jt,aM as ba,aN as Ge,aO as wa,r as Ea,b as Et,aP as Pa}from"./index-Bs5JduU5.js";var rs={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(n){(function(_,f,A,g){var x=["","webkit","Moz","MS","ms","o"],m=f.createElement("div"),J="function",S=Math.round,o=Math.abs,k=Date.now;function B(e,t,s){return setTimeout(ce(e,s),t)}function R(e,t,s){return Array.isArray(e)?(V(e,s[t],s),!0):!1}function V(e,t,s){var a;if(e)if(e.forEach)e.forEach(t,s);else if(e.length!==g)for(a=0;a<e.length;)t.call(s,e[a],a,e),a++;else for(a in e)e.hasOwnProperty(a)&&t.call(s,e[a],a,e)}function T(e,t,s){var a="DEPRECATED METHOD: "+t+`
`+s+` AT 
`;return function(){var i=new Error("get-stack-trace"),u=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",E=_.console&&(_.console.warn||_.console.log);return E&&E.call(_.console,a,u),e.apply(this,arguments)}}var O;typeof Object.assign!="function"?O=function(t){if(t===g||t===null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),a=1;a<arguments.length;a++){var i=arguments[a];if(i!==g&&i!==null)for(var u in i)i.hasOwnProperty(u)&&(s[u]=i[u])}return s}:O=Object.assign;var re=T(function(t,s,a){for(var i=Object.keys(s),u=0;u<i.length;)(!a||a&&t[i[u]]===g)&&(t[i[u]]=s[i[u]]),u++;return t},"extend","Use `assign`."),Y=T(function(t,s){return re(t,s,!0)},"merge","Use `assign`.");function M(e,t,s){var a=t.prototype,i;i=e.prototype=Object.create(a),i.constructor=e,i._super=a,s&&O(i,s)}function ce(e,t){return function(){return e.apply(t,arguments)}}function Q(e,t){return typeof e==J?e.apply(t&&t[0]||g,t):e}function z(e,t){return e===g?t:e}function ue(e,t,s){V(w(t),function(a){e.addEventListener(a,s,!1)})}function oe(e,t,s){V(w(t),function(a){e.removeEventListener(a,s,!1)})}function ne(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function C(e,t){return e.indexOf(t)>-1}function w(e){return e.trim().split(/\s+/g)}function X(e,t,s){if(e.indexOf&&!s)return e.indexOf(t);for(var a=0;a<e.length;){if(s&&e[a][s]==t||!s&&e[a]===t)return a;a++}return-1}function W(e){return Array.prototype.slice.call(e,0)}function H(e,t,s){for(var a=[],i=[],u=0;u<e.length;){var E=t?e[u][t]:e[u];X(i,E)<0&&a.push(e[u]),i[u]=E,u++}return s&&(t?a=a.sort(function(K,ie){return K[t]>ie[t]}):a=a.sort()),a}function ge(e,t){for(var s,a,i=t[0].toUpperCase()+t.slice(1),u=0;u<x.length;){if(s=x[u],a=s?s+i:t,a in e)return a;u++}return g}var ee=1;function me(){return ee++}function te(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||_}var dt=/mobile|tablet|ip(ad|hone|od)|android/i,Qe="ontouchstart"in _,vt=ge(_,"PointerEvent")!==g,Fe=Qe&&dt.test(navigator.userAgent),Oe="touch",ft="pen",He="mouse",ht="kinect",je=25,$=1,be=2,U=4,se=8,Be=1,De=2,we=4,Me=8,Re=16,de=De|we,Ee=Me|Re,et=de|Ee,Ie=["x","y"],l=["clientX","clientY"];function d(e,t){var s=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(a){Q(e.options.enable,[e])&&s.handler(a)},this.init()}d.prototype={handler:function(){},init:function(){this.evEl&&ue(this.element,this.evEl,this.domHandler),this.evTarget&&ue(this.target,this.evTarget,this.domHandler),this.evWin&&ue(te(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&oe(this.element,this.evEl,this.domHandler),this.evTarget&&oe(this.target,this.evTarget,this.domHandler),this.evWin&&oe(te(this.element),this.evWin,this.domHandler)}};function b(e){var t,s=e.options.inputClass;return s?t=s:vt?t=mt:Fe?t=st:Qe?t=pt:t=tt,new t(e,L)}function L(e,t,s){var a=s.pointers.length,i=s.changedPointers.length,u=t&$&&a-i===0,E=t&(U|se)&&a-i===0;s.isFirst=!!u,s.isFinal=!!E,u&&(e.session={}),s.eventType=t,fe(e,s),e.emit("hammer.input",s),e.recognize(s),e.session.prevInput=s}function fe(e,t){var s=e.session,a=t.pointers,i=a.length;s.firstInput||(s.firstInput=ae(t)),i>1&&!s.firstMultiple?s.firstMultiple=ae(t):i===1&&(s.firstMultiple=!1);var u=s.firstInput,E=s.firstMultiple,q=E?E.center:u.center,K=t.center=F(a);t.timeStamp=k(),t.deltaTime=t.timeStamp-u.timeStamp,t.angle=Ye(q,K),t.distance=ke(q,K),r(s,t),t.offsetDirection=_e(t.deltaX,t.deltaY);var ie=ye(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=ie.x,t.overallVelocityY=ie.y,t.overallVelocity=o(ie.x)>o(ie.y)?ie.x:ie.y,t.scale=E?us(E.pointers,a):1,t.rotation=E?cs(E.pointers,a):0,t.maxPointers=s.prevInput?t.pointers.length>s.prevInput.maxPointers?t.pointers.length:s.prevInput.maxPointers:t.pointers.length,j(s,t);var Te=e.element;ne(t.srcEvent.target,Te)&&(Te=t.srcEvent.target),t.target=Te}function r(e,t){var s=t.center,a=e.offsetDelta||{},i=e.prevDelta||{},u=e.prevInput||{};(t.eventType===$||u.eventType===U)&&(i=e.prevDelta={x:u.deltaX||0,y:u.deltaY||0},a=e.offsetDelta={x:s.x,y:s.y}),t.deltaX=i.x+(s.x-a.x),t.deltaY=i.y+(s.y-a.y)}function j(e,t){var s=e.lastInterval||t,a=t.timeStamp-s.timeStamp,i,u,E,q;if(t.eventType!=se&&(a>je||s.velocity===g)){var K=t.deltaX-s.deltaX,ie=t.deltaY-s.deltaY,Te=ye(a,K,ie);u=Te.x,E=Te.y,i=o(Te.x)>o(Te.y)?Te.x:Te.y,q=_e(K,ie),e.lastInterval=t}else i=s.velocity,u=s.velocityX,E=s.velocityY,q=s.direction;t.velocity=i,t.velocityX=u,t.velocityY=E,t.direction=q}function ae(e){for(var t=[],s=0;s<e.pointers.length;)t[s]={clientX:S(e.pointers[s].clientX),clientY:S(e.pointers[s].clientY)},s++;return{timeStamp:k(),pointers:t,center:F(t),deltaX:e.deltaX,deltaY:e.deltaY}}function F(e){var t=e.length;if(t===1)return{x:S(e[0].clientX),y:S(e[0].clientY)};for(var s=0,a=0,i=0;i<t;)s+=e[i].clientX,a+=e[i].clientY,i++;return{x:S(s/t),y:S(a/t)}}function ye(e,t,s){return{x:t/e||0,y:s/e||0}}function _e(e,t){return e===t?Be:o(e)>=o(t)?e<0?De:we:t<0?Me:Re}function ke(e,t,s){s||(s=Ie);var a=t[s[0]]-e[s[0]],i=t[s[1]]-e[s[1]];return Math.sqrt(a*a+i*i)}function Ye(e,t,s){s||(s=Ie);var a=t[s[0]]-e[s[0]],i=t[s[1]]-e[s[1]];return Math.atan2(i,a)*180/Math.PI}function cs(e,t){return Ye(t[1],t[0],l)+Ye(e[1],e[0],l)}function us(e,t){return ke(t[0],t[1],l)/ke(e[0],e[1],l)}var ds={mousedown:$,mousemove:be,mouseup:U},vs="mousedown",fs="mousemove mouseup";function tt(){this.evEl=vs,this.evWin=fs,this.pressed=!1,d.apply(this,arguments)}M(tt,d,{handler:function(t){var s=ds[t.type];s&$&&t.button===0&&(this.pressed=!0),s&be&&t.which!==1&&(s=U),this.pressed&&(s&U&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[t],changedPointers:[t],pointerType:He,srcEvent:t}))}});var hs={pointerdown:$,pointermove:be,pointerup:U,pointercancel:se,pointerout:se},ms={2:Oe,3:ft,4:He,5:ht},It="pointerdown",kt="pointermove pointerup pointercancel";_.MSPointerEvent&&!_.PointerEvent&&(It="MSPointerDown",kt="MSPointerMove MSPointerUp MSPointerCancel");function mt(){this.evEl=It,this.evWin=kt,d.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}M(mt,d,{handler:function(t){var s=this.store,a=!1,i=t.type.toLowerCase().replace("ms",""),u=hs[i],E=ms[t.pointerType]||t.pointerType,q=E==Oe,K=X(s,t.pointerId,"pointerId");u&$&&(t.button===0||q)?K<0&&(s.push(t),K=s.length-1):u&(U|se)&&(a=!0),!(K<0)&&(s[K]=t,this.callback(this.manager,u,{pointers:s,changedPointers:[t],pointerType:E,srcEvent:t}),a&&s.splice(K,1))}});var ps={touchstart:$,touchmove:be,touchend:U,touchcancel:se},gs="touchstart",ys="touchstart touchmove touchend touchcancel";function Vt(){this.evTarget=gs,this.evWin=ys,this.started=!1,d.apply(this,arguments)}M(Vt,d,{handler:function(t){var s=ps[t.type];if(s===$&&(this.started=!0),!!this.started){var a=_s.call(this,t,s);s&(U|se)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:Oe,srcEvent:t})}}});function _s(e,t){var s=W(e.touches),a=W(e.changedTouches);return t&(U|se)&&(s=H(s.concat(a),"identifier",!0)),[s,a]}var xs={touchstart:$,touchmove:be,touchend:U,touchcancel:se},Ts="touchstart touchmove touchend touchcancel";function st(){this.evTarget=Ts,this.targetIds={},d.apply(this,arguments)}M(st,d,{handler:function(t){var s=xs[t.type],a=bs.call(this,t,s);a&&this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:Oe,srcEvent:t})}});function bs(e,t){var s=W(e.touches),a=this.targetIds;if(t&($|be)&&s.length===1)return a[s[0].identifier]=!0,[s,s];var i,u,E=W(e.changedTouches),q=[],K=this.target;if(u=s.filter(function(ie){return ne(ie.target,K)}),t===$)for(i=0;i<u.length;)a[u[i].identifier]=!0,i++;for(i=0;i<E.length;)a[E[i].identifier]&&q.push(E[i]),t&(U|se)&&delete a[E[i].identifier],i++;if(q.length)return[H(u.concat(q),"identifier",!0),q]}var ws=2500,At=25;function pt(){d.apply(this,arguments);var e=ce(this.handler,this);this.touch=new st(this.manager,e),this.mouse=new tt(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}M(pt,d,{handler:function(t,s,a){var i=a.pointerType==Oe,u=a.pointerType==He;if(!(u&&a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents)){if(i)Es.call(this,s,a);else if(u&&Ps.call(this,a))return;this.callback(t,s,a)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Es(e,t){e&$?(this.primaryTouch=t.changedPointers[0].identifier,Ot.call(this,t)):e&(U|se)&&Ot.call(this,t)}function Ot(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var s={x:t.clientX,y:t.clientY};this.lastTouches.push(s);var a=this.lastTouches,i=function(){var u=a.indexOf(s);u>-1&&a.splice(u,1)};setTimeout(i,ws)}}function Ps(e){for(var t=e.srcEvent.clientX,s=e.srcEvent.clientY,a=0;a<this.lastTouches.length;a++){var i=this.lastTouches[a],u=Math.abs(t-i.x),E=Math.abs(s-i.y);if(u<=At&&E<=At)return!0}return!1}var Dt=ge(m.style,"touchAction"),Mt=Dt!==g,Rt="compute",Ut="auto",gt="manipulation",Ue="none",Xe="pan-x",$e="pan-y",at=Cs();function yt(e,t){this.manager=e,this.set(t)}yt.prototype={set:function(e){e==Rt&&(e=this.compute()),Mt&&this.manager.element.style&&at[e]&&(this.manager.element.style[Dt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return V(this.manager.recognizers,function(t){Q(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Ss(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,s=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var a=this.actions,i=C(a,Ue)&&!at[Ue],u=C(a,$e)&&!at[$e],E=C(a,Xe)&&!at[Xe];if(i){var q=e.pointers.length===1,K=e.distance<2,ie=e.deltaTime<250;if(q&&K&&ie)return}if(!(E&&u)&&(i||u&&s&de||E&&s&Ee))return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function Ss(e){if(C(e,Ue))return Ue;var t=C(e,Xe),s=C(e,$e);return t&&s?Ue:t||s?t?Xe:$e:C(e,gt)?gt:Ut}function Cs(){if(!Mt)return!1;var e={},t=_.CSS&&_.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){e[s]=t?_.CSS.supports("touch-action",s):!0}),e}var it=1,he=2,ze=4,Ve=8,Pe=Ve,qe=16,xe=32;function Se(e){this.options=O({},this.defaults,e||{}),this.id=me(),this.manager=null,this.options.enable=z(this.options.enable,!0),this.state=it,this.simultaneous={},this.requireFail=[]}Se.prototype={defaults:{},set:function(e){return O(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(R(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ot(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return R(e,"dropRecognizeWith",this)?this:(e=ot(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(R(e,"requireFailure",this))return this;var t=this.requireFail;return e=ot(e,this),X(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(R(e,"dropRequireFailure",this))return this;e=ot(e,this);var t=X(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,s=this.state;function a(i){t.manager.emit(i,e)}s<Ve&&a(t.options.event+Lt(s)),a(t.options.event),e.additionalEvent&&a(e.additionalEvent),s>=Ve&&a(t.options.event+Lt(s))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=xe},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(xe|it)))return!1;e++}return!0},recognize:function(e){var t=O({},e);if(!Q(this.options.enable,[this,t])){this.reset(),this.state=xe;return}this.state&(Pe|qe|xe)&&(this.state=it),this.state=this.process(t),this.state&(he|ze|Ve|qe)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}};function Lt(e){return e&qe?"cancel":e&Ve?"end":e&ze?"move":e&he?"start":""}function Ft(e){return e==Re?"down":e==Me?"up":e==De?"left":e==we?"right":""}function ot(e,t){var s=t.manager;return s?s.get(e):e}function pe(){Se.apply(this,arguments)}M(pe,Se,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,s=e.eventType,a=t&(he|ze),i=this.attrTest(e);return a&&(s&se||!i)?t|qe:a||i?s&U?t|Ve:t&he?t|ze:he:xe}});function nt(){pe.apply(this,arguments),this.pX=null,this.pY=null}M(nt,pe,{defaults:{event:"pan",threshold:10,pointers:1,direction:et},getTouchAction:function(){var e=this.options.direction,t=[];return e&de&&t.push($e),e&Ee&&t.push(Xe),t},directionTest:function(e){var t=this.options,s=!0,a=e.distance,i=e.direction,u=e.deltaX,E=e.deltaY;return i&t.direction||(t.direction&de?(i=u===0?Be:u<0?De:we,s=u!=this.pX,a=Math.abs(e.deltaX)):(i=E===0?Be:E<0?Me:Re,s=E!=this.pY,a=Math.abs(e.deltaY))),e.direction=i,s&&a>t.threshold&&i&t.direction},attrTest:function(e){return pe.prototype.attrTest.call(this,e)&&(this.state&he||!(this.state&he)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ft(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}});function _t(){pe.apply(this,arguments)}M(_t,pe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ue]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&he)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function xt(){Se.apply(this,arguments),this._timer=null,this._input=null}M(xt,Se,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ut]},process:function(e){var t=this.options,s=e.pointers.length===t.pointers,a=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!a||!s||e.eventType&(U|se)&&!i)this.reset();else if(e.eventType&$)this.reset(),this._timer=B(function(){this.state=Pe,this.tryEmit()},t.time,this);else if(e.eventType&U)return Pe;return xe},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Pe&&(e&&e.eventType&U?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=k(),this.manager.emit(this.options.event,this._input)))}});function Tt(){pe.apply(this,arguments)}M(Tt,pe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ue]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&he)}});function bt(){pe.apply(this,arguments)}M(bt,pe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:de|Ee,pointers:1},getTouchAction:function(){return nt.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,s;return t&(de|Ee)?s=e.overallVelocity:t&de?s=e.overallVelocityX:t&Ee&&(s=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&o(s)>this.options.velocity&&e.eventType&U},emit:function(e){var t=Ft(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}});function lt(){Se.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}M(lt,Se,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[gt]},process:function(e){var t=this.options,s=e.pointers.length===t.pointers,a=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&$&&this.count===0)return this.failTimeout();if(a&&i&&s){if(e.eventType!=U)return this.failTimeout();var u=this.pTime?e.timeStamp-this.pTime<t.interval:!0,E=!this.pCenter||ke(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!E||!u?this.count=1:this.count+=1,this._input=e;var q=this.count%t.taps;if(q===0)return this.hasRequireFailures()?(this._timer=B(function(){this.state=Pe,this.tryEmit()},t.interval,this),he):Pe}return xe},failTimeout:function(){return this._timer=B(function(){this.state=xe},this.options.interval,this),xe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Pe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ce(e,t){return t=t||{},t.recognizers=z(t.recognizers,Ce.defaults.preset),new wt(e,t)}Ce.VERSION="2.0.7",Ce.defaults={domEvents:!1,touchAction:Rt,enable:!0,inputTarget:null,inputClass:null,preset:[[Tt,{enable:!1}],[_t,{enable:!1},["rotate"]],[bt,{direction:de}],[nt,{direction:de},["swipe"]],[lt],[lt,{event:"doubletap",taps:2},["tap"]],[xt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ns=1,Bt=2;function wt(e,t){this.options=O({},Ce.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=b(this),this.touchAction=new yt(this,this.options.touchAction),zt(this,!0),V(this.options.recognizers,function(s){var a=this.add(new s[0](s[1]));s[2]&&a.recognizeWith(s[2]),s[3]&&a.requireFailure(s[3])},this)}wt.prototype={set:function(e){return O(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?Bt:Ns},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var s,a=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&Pe)&&(i=t.curRecognizer=null);for(var u=0;u<a.length;)s=a[u],t.stopped!==Bt&&(!i||s==i||s.canRecognizeWith(i))?s.recognize(e):s.reset(),!i&&s.state&(he|ze|Ve)&&(i=t.curRecognizer=s),u++}},get:function(e){if(e instanceof Se)return e;for(var t=this.recognizers,s=0;s<t.length;s++)if(t[s].options.event==e)return t[s];return null},add:function(e){if(R(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(R(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,s=X(t,e);s!==-1&&(t.splice(s,1),this.touchAction.update())}return this},on:function(e,t){if(e!==g&&t!==g){var s=this.handlers;return V(w(e),function(a){s[a]=s[a]||[],s[a].push(t)}),this}},off:function(e,t){if(e!==g){var s=this.handlers;return V(w(e),function(a){t?s[a]&&s[a].splice(X(s[a],t),1):delete s[a]}),this}},emit:function(e,t){this.options.domEvents&&Is(e,t);var s=this.handlers[e]&&this.handlers[e].slice();if(!(!s||!s.length)){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var a=0;a<s.length;)s[a](t),a++}},destroy:function(){this.element&&zt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function zt(e,t){var s=e.element;if(s.style){var a;V(e.options.cssProps,function(i,u){a=ge(s.style,u),t?(e.oldCssProps[a]=s.style[a],s.style[a]=i):s.style[a]=e.oldCssProps[a]||""}),t||(e.oldCssProps={})}}function Is(e,t){var s=f.createEvent("Event");s.initEvent(e,!0,!0),s.gesture=t,t.target.dispatchEvent(s)}O(Ce,{INPUT_START:$,INPUT_MOVE:be,INPUT_END:U,INPUT_CANCEL:se,STATE_POSSIBLE:it,STATE_BEGAN:he,STATE_CHANGED:ze,STATE_ENDED:Ve,STATE_RECOGNIZED:Pe,STATE_CANCELLED:qe,STATE_FAILED:xe,DIRECTION_NONE:Be,DIRECTION_LEFT:De,DIRECTION_RIGHT:we,DIRECTION_UP:Me,DIRECTION_DOWN:Re,DIRECTION_HORIZONTAL:de,DIRECTION_VERTICAL:Ee,DIRECTION_ALL:et,Manager:wt,Input:d,TouchAction:yt,TouchInput:st,MouseInput:tt,PointerEventInput:mt,TouchMouseInput:pt,SingleTouchInput:Vt,Recognizer:Se,AttrRecognizer:pe,Tap:lt,Pan:nt,Swipe:bt,Pinch:_t,Rotate:Tt,Press:xt,on:ue,off:oe,each:V,merge:Y,extend:re,assign:O,inherit:M,bindFn:ce,prefixed:ge});var ks=typeof _<"u"?_:typeof self<"u"?self:{};ks.Hammer=Ce,typeof g=="function"&&g.amd?g(function(){return Ce}):n.exports?n.exports=Ce:_[A]=Ce})(window,document,"Hammer")})(rs);var Pt=rs.exports;const Sa={class:"flex justify-center w-full px-10"},Ca=ct({__name:"InteractionDialog",props:{showDialog:Boolean,title:String,contentComponent:String,maxWidth:Number,actions:Object},setup(n){const _=n,f=p(_.showDialog),A=p(_.title),g=p(_.contentComponent),x=p(_.maxWidth),m=p(_.actions);return Vs(()=>{f.value=_.showDialog,A.value=_.title,m.value=_.actions}),(J,S)=>(y(),ve(St,{modelValue:f.value,"onUpdate:modelValue":S[0]||(S[0]=o=>f.value=o),persistent:"","max-width":x.value||600},{default:h(()=>[v(Xt,{"max-width":x.value||600,class:"main-dialog px-2 rounded-lg"},{default:h(()=>[v(As,null,{default:h(()=>[c("div",{class:le(["flex justify-center test-center pt-2 text-[18px] font-bold text-nowrap text-ellipsis overflow-x-hidden",`w-[${x.value}px]`])},N(A.value),3)]),_:1}),v($t,{class:"pb-6"},{default:h(()=>[Os(J.$slots,"content",{},void 0,!0),g.value?(y(),ve(Ds(g.value),{key:0})):D("",!0)]),_:3}),c("div",Sa,[v(We,{class:"opacity-10 border-[#fafafa]"})]),m.value.length>0?(y(),ve(Ms,{key:0},{default:h(()=>[c("div",{class:le(["flex w-full px-1 py-2",m.value.length===1?"justify-end":"justify-between"])},[(y(!0),I(Ne,null,Ze(m.value,(o,k)=>(y(),ve(Le,{key:k,size:o.size||"default",color:o.color||void 0,class:le(o.class||void 0),disabled:o.disabled||!1,onClick:o.action},{default:h(()=>[P(N(o.text),1)]),_:2},1032,["size","color","class","disabled","onClick"]))),128))],2)]),_:1})):D("",!0)]),_:3},8,["max-width"])]),_:3},8,["modelValue","max-width"]))}}),Yt=Ct(Ca,[["__scopeId","data-v-5d29745e"]]);function Na(n){const _=ts(n);let f=-1;function A(){clearInterval(f)}function g(){A(),as(()=>_.value=n)}function x(m){const J=m?getComputedStyle(m):{transitionDuration:.2},S=parseFloat(J.transitionDuration)*1e3||200;if(A(),_.value<=0)return;const o=performance.now();f=window.setInterval(()=>{const k=performance.now()-o+S;_.value=Math.max(n-k,0),_.value<=0&&A()},S)}return Gs(A),{clear:A,time:_,start:x,reset:g}}const Ia=qt({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Gt({location:"bottom"}),...Rs(),...Zt(),...Us(),...Jt(),...Ls(Fs({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),ka=Kt()({name:"VSnackbar",props:Ia(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:f}=_;const A=Bs(n,"modelValue"),{locationStyles:g}=Qt(n),{positionClasses:x}=zs(n),{scopeId:m}=Ws(),{themeClasses:J}=Hs(n),{colorClasses:S,colorStyles:o,variantClasses:k}=js(n),{roundedClasses:B}=es(n),R=Na(Number(n.timeout)),V=p(),T=p(),O=ts(!1);Z(A,Y),Z(()=>n.timeout,Y),Nt(()=>{A.value&&Y()});let re=-1;function Y(){R.reset(),window.clearTimeout(re);const z=Number(n.timeout);if(!A.value||z===-1)return;const ue=Ys(T.value);R.start(ue),re=window.setTimeout(()=>{A.value=!1},z)}function M(){R.reset(),window.clearTimeout(re)}function ce(){O.value=!0,M()}function Q(){O.value=!1,Y()}return ss(()=>{const z=Wt.filterProps(n),ue=!!(f.default||f.text||n.text);return v(Wt,Je({ref:V,class:["v-snackbar",{"v-snackbar--active":A.value,"v-snackbar--multi-line":n.multiLine&&!n.vertical,"v-snackbar--timer":!!n.timer,"v-snackbar--vertical":n.vertical},x.value,n.class],style:n.style},z,{modelValue:A.value,"onUpdate:modelValue":oe=>A.value=oe,contentProps:Je({class:["v-snackbar__wrapper",J.value,S.value,B.value,k.value],style:[g.value,o.value],onPointerenter:ce,onPointerleave:Q},z.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},m),{default:()=>{var oe,ne;return[Xs(!1,"v-snackbar"),n.timer&&!O.value&&v("div",{key:"timer",class:"v-snackbar__timer"},[v(rt,{ref:T,color:typeof n.timer=="string"?n.timer:"info",max:n.timeout,"model-value":R.time.value},null)]),ue&&v("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((oe=f.text)==null?void 0:oe.call(f))??n.text,(ne=f.default)==null?void 0:ne.call(f)]),f.actions&&v($s,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[v("div",{class:"v-snackbar__actions"},[f.actions()])]})]},activator:f.activator})}),qs({},V)}}),Va=ct({__name:"Snackbar",props:{openSnackbar:Boolean,closeButton:Boolean,message:{type:String,default:""},duration:{type:Number,default:3e3}},emits:["update:openSnackbar"],setup(n,{emit:_}){const f=n,A=_,g=p(f.openSnackbar),x=p(f.message),m=p(f.duration||3e3),J=()=>{g.value=!1,A("update:openSnackbar",!1)};return Z(()=>f.openSnackbar,S=>{g.value=S}),Z(()=>f.message,S=>{x.value=S}),Z(g,S=>{S||A("update:openSnackbar",!1)}),(S,o)=>(y(),ve(ka,{modelValue:g.value,"onUpdate:modelValue":o[0]||(o[0]=k=>g.value=k),elevation:"4",rounded:"lg",color:"#ffffff40",timeout:m.value,location:"bottom left","content-class":"bg-[#4f4f4f44] backdrop-filter backdrop-blur-lg text-white mb-[50px]",style:{marginBottom:40}},Zs({default:h(()=>[P(N(x.value)+" ",1)]),_:2},[n.closeButton?{name:"actions",fn:h(()=>[v(Le,{color:"white",variant:"text",onClick:J},{default:h(()=>[v(G,null,{default:h(()=>[P("mdi-close")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue","timeout"]))}}),Ke=n=>(ns("data-v-6917499c"),n=n(),ls(),n),Aa={class:"video-modal"},Oa={class:"modal-content"},Da={class:"flex flex-col justify-between h-full px-5 py-3 align-center"},Ma={class:"flex flex-col justify-between pt-2 align-center gap-y-8"},Ra=["disabled","onClick"],Ua={class:"flex flex-col justify-center py-2 mb-[10px] align-center"},La={class:"flex flex-col p-2 gap-y-2"},Fa=Ke(()=>c("div",null,[c("strong",null,"Computer:"),P(" Command+click, Ctrl+click or Long click to select multiple videos. ")],-1)),Ba=Ke(()=>c("div",null,[c("strong",null,"Mobile:"),P(" Long press to select multiple videos.")],-1)),za={class:"flex flex-row mt-4 gap-x-10"},Wa={class:"ml-[-8px]"},Ha={class:"frosted-button flex flex-col justify-center align-center w-[28px] h-[28px] rounded-full mb-1"},ja=Ke(()=>c("div",{class:"text-sm"},"Close",-1)),Ya={key:0,class:"flex flex-col justify-between align-center pt-8 px-2 w-[300px] h-[480px]"},Xa={class:"flex flex-col w-full h-full px-4 overflow-auto align-center"},$a={class:"relative video-wrapper"},qa=["id","poster"],Ga=["src"],Za=["onClick"],Ja=["onClick"],Ka={class:"flex flex-row justify-center w-full ml-1 overflow-hidden text-xs"},Qa={key:0,class:"flex flex-row justify-between align-center h-[45px] w-full mb-[-15px]"},ei={key:1,class:"flex flex-col justify-between mt-5 align-center w-[720px]"},ti=["controls","preload","poster"],si=["src"],ai={class:"processing-bar"},ii={class:"w-0"},oi={class:"flex flex-col p-2 gap-y-2"},ni={key:0,class:"flex flex-col justify-start w-full p-2 pt-3"},li={class:"card-grid"},ri={class:"text-sm"},ci={class:"video-card-dot"},ui={key:1,class:"flex flex-row justify-between w-full h-full px-8 overflow-hidden align-center"},di={class:"flex flex-row justify-between pl-2 align-center gap-x-6"},vi={class:"flex flex-row cursor-default text-md"},fi={key:0,class:"flex flex-row w-[320px] justify-center gap-x-4 align-center ml-1"},hi={key:0,class:"text-sm text-white border-2 rounded-md mt-[3px] border-[#ffffff44] bg-[#fafafa33] ml-4 px-1"},mi={class:"flex flex-row mt-2"},pi=["disabled","onClick"],gi={class:"bg-[#32c925] p-1 backdrop-filter backdrop-blur-lg flex flex-col justify-center align-center rounded-full"},yi={key:2},_i={key:2,class:"flex flex-row justify-center w-full h-full text-xl text-center align-center"},xi=Ke(()=>c("div",{class:"flex flex-col mb-2 text-center align-end"}," Processing multiple videos may take a while, depending on the number of videos and their sizes. Cockpit will be usable during the process, but the performance may be affected and recording of new videos is disabled. ",-1)),Ti={key:0,class:"flex flex-col -mt-2 text-center align-center"},bi={class:"flex flex-col justify-between h-[140px] w-full pb-3"},wi={key:0,class:"flex flex-col justify-start"},Ei={class:"mb-3 text-sm text-center"},Pi={class:"flex flex-row justify-between w-full mb-2 align-center"},Si={class:"text-sm font-bold w-[450px] text-nowrap text-start text-ellipsis overflow-x-hidden"},Ci={class:"text-sm text-end"},Ni={class:"flex flex-row justify-between w-full mb-2"},Ii=Ke(()=>c("div",{class:"text-sm font-bold text-start"},"Overall Progress",-1)),ki={class:"text-sm font-bold text-end"},Vi={key:1},Ai={class:"flex flex-col justify-center w-full pb-3 text-center text-md"},Oi=ct({__name:"VideoLibraryModal",props:{openModal:Boolean},emits:["update:openModal"],setup(n,{emit:_}){const f=is(),A=n,g=_,x=p([]),m=p([]),J=p([]),S=p(A.openModal),o=p([]),k=p(null),B=p("videos"),R=p(!1),V=p(""),T=p(!1),O=p(!1),re=p(!1),Y=p({}),M=p(!1),ce=p(!1),Q=p(!0),z=p(!1),ue=p(""),oe=p([]),ne=p(!1),C=p(""),w=p([]),X=p(!1),W=p(0),H=p([{fileName:"",progress:0,message:""}]),ge=p(0),ee=p(!0),me=p(null),te=p(!1),dt=[{name:"Videos",icon:"mdi-video-outline",selected:!0,enable:!0,tooltip:""},{name:"Pictures",icon:"mdi-image-outline",selected:!1,enable:!1,tooltip:"Coming soon"}],Qe=[{name:"Delete",icon:"mdi-delete-outline",size:22,tooltip:"",confirmAction:!0,enable:!0,action:()=>et()},{name:"Download",icon:"mdi-tray-arrow-down",size:28,tooltip:"Download selected videos with logs",confirmAction:!1,enable:!0,action:()=>Ee()}],vt=()=>{S.value=!1,g("update:openModal",!1),B.value="videos",x.value.forEach(l=>URL.revokeObjectURL(l)),x.value=[],we(),me.value=null,T.value=!1},Fe=l=>{const d=/\(([^)]+)\)/,b=l.match(d);return b?b[1]:""},Oe=l=>{const d=/.*\(([^)]+)\)/,b=l.match(d);return b?b[0]:""},ft=()=>{if(o.value.length===1&&!T.value){const l=document.getElementById("video-player");l&&l.play().catch(d=>console.error("Error auto-playing video:",d))}},He=()=>{T.value=!T.value,T.value||we()},ht=l=>{const d=o.value.findIndex(b=>b.fileName===l.fileName);d!==-1?o.value.length>1&&o.value.splice(d,1):(o.value.push(l),T.value=!0)},je=()=>{te.value=!1,W.value=0,H.value=[{fileName:"",progress:0,message:""}],ee.value=!1},$=async()=>{try{await f.processVideoChunksAndTelemetry(o.value.map(l=>l.hash)),T.value=!1,await Ie()}catch(l){l instanceof Error?console.error("Video processing failed:",l.message):console.error("Processing failed with non-Error type:",l),R.value=!0,te.value=!0}},be=()=>{te.value&&Ie(),ne.value=!1,je()},U=async()=>{o.value.length===1&&!o.value[0].isProcessed&&(ee.value=!0),$()},se=()=>{ge.value=o.value.length,C.value="Processing Videos",w.value=[{text:W.value===100?"Close":"Hide",size:"small",class:"font-light",action:be}],z.value=!1,ne.value=!0,$()},Be=()=>{ue.value="Process Multiple Videos",oe.value=[{text:"Cancel",size:"small",class:"font-light",action:()=>{z.value=!1}},{text:"Process videos",size:"small",class:"font-bold",action:async()=>{z.value=!1,se()}}],z.value=!0},De=()=>{o.value=[...m.value],T.value=!0},we=()=>{T.value=!1,O.value=!1,re.value=!1,o.value.length>1&&(o.value=[o.value[0]])},Me=()=>{m.value.some(l=>!l.isProcessed)?(o.value=m.value.filter(l=>!l.isProcessed),T.value=!0):(V.value="No unprocessed videos found",R.value=!0)},Re=()=>{m.value.some(l=>l.isProcessed)?(o.value=m.value.filter(l=>l.isProcessed),T.value=!0):(V.value="No processed videos found",R.value=!0)},de=l=>l.flatMap(b=>{const L=b.replace(".webm",".ass");return J.value.some(r=>r.fileName===L)?[b,L]:[b]}),Ee=async()=>{V.value="Getting your download ready...";let l=[],d=[];if(o.value.forEach(b=>{b.isProcessed&&l.push(b.fileName),!b.isProcessed&&b.hash&&d.push(b.hash)}),R.value=!0,l.length>0){const b=de(l);await f.downloadFilesFromVideoDB(b)}d.length>0&&await f.downloadTempVideo(d)},et=async()=>{let l=o.value.length,d=[],b=[];if(await o.value.forEach(L=>{L.isProcessed&&d.push(L.fileName),!L.isProcessed&&L.hash&&b.push(L.hash)}),d.length>0){const L=de(d);await f.discardProcessedFilesFromVideoDB(L)}b.length>0&&await f.discardUnprocessedFilesFromVideoDB(b),V.value=`${l} video(s) discarded.`,R.value=!0,await Ie(),m.value.length>0?o.value=[m.value[0]]:o.value=[],m.value.length===1&&(T.value=!1)},Ie=async()=>{Q.value=!0,m.value=[];const l=[],d=[];await f.videoStoringDB.iterate((ae,F)=>{F.endsWith(".webm")&&l.push((async()=>{const ye=await f.videoStoringDB.getItem(F);let _e="",ke=!0;ye instanceof Blob?(_e=URL.createObjectURL(ye),x.value.push(_e)):console.error("Video data is not a Blob:",ye);const Ye=await f.videoStorageFileSize(F)??0;return{fileName:F,size:Ye,url:_e,isProcessed:ke}})()),F.endsWith(".ass")&&d.push((async()=>{const ye=await f.videoStoringDB.getItem(F);let _e="";ye instanceof Blob?(_e=URL.createObjectURL(ye),x.value.push(_e)):console.error("Video data is not a Blob:",ye);const ke=await f.videoStorageFileSize(F)??0;return{fileName:F,url:_e,size:ke}})())});const b=await f.unprocessedVideos,L=Object.entries(b).map(async([ae,F])=>({dateStart:F.dateStart,dateLastRecordingUpdate:F.dateLastRecordingUpdate,dateFinish:F.dateFinish,fileName:F.fileName,vWidth:F.vWidth,vHeight:F.vHeight,hash:ae,thumbnail:F.thumbnail,url:"",isProcessed:!1})),fe=await Promise.all(l),r=await Promise.all(d),j=await Promise.all(L);m.value=[...fe,...j],J.value=r,Q.value=!1};return Z(()=>f.currentFileProgress,l=>{H.value=l},{deep:!0}),Z(()=>f.overallProgress,l=>{W.value=l,l>0&&l<100&&(X.value=!0,ee.value=!0),l===100&&(X.value=!1,ee.value=!1,setTimeout(()=>{ne.value=!1},1e3))}),Z(S,l=>{g("update:openModal",l),l||(je(),T.value=!1,me.value=null,ee.value=!1)}),Z(()=>A.openModal,async l=>{S.value=l,l===!0&&(await Ie(),ee.value=!1)}),Z(o,l=>{if(l.length===1){te.value&&je(),me.value=l[0];const d=l[0].url,b=k.value;b&&(b.src=d,b.load())}},{immediate:!0,deep:!0}),Z(m,()=>{if(me.value){const l=m.value.find(d=>Fe(d.fileName)===Fe(me.value.fileName));l&&(o.value=[l])}else o.value=m.value.length>0?[m.value[0]]:[]},{deep:!0}),Z(S,()=>{S.value||(me.value=null)}),Z(m,async()=>{await as(),m.value.forEach(l=>{var b;const d=document.getElementById(`video-library-${l.fileName}`);if(d){(b=Y.value[l.fileName])==null||b.destroy();const L=new Pt.Manager(d);L.add(new Pt.Tap),L.add(new Pt.Press({time:500})),L.on("tap",fe=>{const r=o.value.some(ae=>ae.fileName===l.fileName);if(T.value||fe.srcEvent.ctrlKey||fe.srcEvent.metaKey){T.value=!0;const ae=o.value.findIndex(F=>F.fileName===l.fileName);ae>-1?o.value.length>1&&o.value.splice(ae,1):o.value.push(l)}else r||(o.value=[l]);if(o.value.length===1&&r){const ae=document.getElementById("video-player");ae&&(ae.load(),ae.play().catch(F=>console.error("Error auto-playing video:",F)))}}),L.on("press",()=>{T.value=!0,o.value.some(fe=>fe.fileName===l.fileName)||o.value.push(l)}),Y.value[l.fileName]=L}})},{immediate:!0,deep:!0}),Nt(async()=>{Q.value=!0,await Ie()}),os(()=>{B.value="videos",x.value.forEach(l=>URL.revokeObjectURL(l)),x.value=[],Object.values(Y.value).forEach(l=>{l.destroy()})}),(l,d)=>(y(),I(Ne,null,[v(St,{modelValue:S.value,"onUpdate:modelValue":d[8]||(d[8]=b=>S.value=b),class:"dialog"},{default:h(()=>{var b,L,fe;return[c("div",Aa,[c("div",Oa,[c("div",Da,[c("div",Ma,[(y(),I(Ne,null,Ze(dt,r=>c("button",{key:r.name,disabled:!r.enable,class:"flex flex-col justify-center align-center",onClick:j=>B.value=r.name.toLowerCase()},[r.tooltip!==""?(y(),ve(Ae,{key:0,"open-delay":"600",activator:"parent",location:"top"},{default:h(()=>[P(N(r.tooltip),1)]),_:2},1024)):D("",!0),c("div",{class:le(["mb-1 text-2xl rounded-full",[r.enable?"frosted-button":"frosted-button-disabled",B.value===r.name.toLowerCase()?"w-[58px] h-[58px]":"w-[40px] h-[40px]"]])},[v(G,{size:B.value===r.name.toLowerCase()?40:24,class:le({"ml-1":r.name.toLowerCase()==="videos"})},{default:h(()=>[P(N(r.icon),1)]),_:2},1032,["size","class"])],2),c("div",{class:le(["text-sm",{"text-white/30":!r.enable}])},N(r.name),3)],8,Ra)),64))]),c("div",null,[c("div",Ua,[c("button",{class:"frosted-button text-[#ffffffaa] flex flex-col justify-center align-center w-[28px] h-[28px] rounded-full mb-[4px]",onClick:d[2]||(d[2]=r=>M.value=!M.value)},[v(G,{class:"text-[24px]"},{default:h(()=>[P("mdi-help-circle-outline")]),_:1}),v(Ae,{modelValue:M.value,"onUpdate:modelValue":d[0]||(d[0]=r=>M.value=r),"open-on-hover":!1,activator:"parent",location:"top",arrow:"","content-class":"border-[#ffffff55] border-2","onClick:outside":d[1]||(d[1]=r=>M.value=!1)},{default:h(()=>[c("div",La,[Fa,Ba,c("div",za,[c("div",Wa,[v(G,{size:"10",class:"text-green-500 ml-2 mb-[2px] mr-1"},{default:h(()=>[P("mdi-circle")]),_:1}),P(" Processed video ")]),c("div",null,[v(G,{size:"10",class:"text-red-500 mb-[2px] mr-1"},{default:h(()=>[P("mdi-circle")]),_:1}),P(" Unprocessed video ")])])])]),_:1},8,["modelValue"])])]),v(We,{class:"opacity-[0.1] ml-[-5px] w-[120%]"}),c("button",{class:"flex flex-col justify-center py-2 mt-4 align-center",onClick:vt},[c("div",Ha,[v(G,{class:"text-[18px] ml-[1px]"},{default:h(()=>[P("mdi-close")]),_:1})]),ja])])]),v(We,{vertical:"",class:"h-[92%] mt-4 opacity-[0.1]"}),B.value==="videos"?(y(),I(Ne,{key:0},[m.value.length>0?(y(),I("div",Ya,[c("div",Xa,[(y(!0),I(Ne,null,Ze(m.value,r=>(y(),I("div",{key:r.fileName,class:"mb-4 video-container"},[c("div",$a,[c("video",{id:`video-library-${r.fileName}`,class:le(["border-4 border-white rounded-md cursor-pointer border-opacity-[0.1] hover:border-opacity-[0.4] transition duration-75 hover:ease-in",o.value.find(j=>j.fileName===r.fileName)?["border-opacity-[0.4]","w-[220px]"]:["border-opacity-[0.1]","w-[190px]"]]),preload:"auto",poster:r.isProcessed?void 0:r.thumbnail},[c("source",{src:r.url,type:"video/webm"},null,8,Ga)],10,qa),o.value.find(j=>j.fileName===r.fileName)&&!T.value?(y(),I("div",{key:0,class:"play-button",onClick:j=>r.isProcessed?ft():U()},[v(G,{size:"40",class:"text-white"},{default:h(()=>[P(N(r.isProcessed?"mdi-play-circle-outline":"mdi-progress-alert"),1)]),_:2},1024)],8,Za)):D("",!0),T.value?(y(),I("div",{key:1,class:le(["checkmark-button",o.value.find(j=>j.fileName===r.fileName)?"bg-green":"bg-white"]),onClick:Js(j=>ht(r),["stop"])},[v(G,{size:"15",class:"text-white"},{default:h(()=>[P(N(o.value.find(j=>j.fileName===r.fileName)?"mdi-check-circle-outline":"mdi-radiobox-blank"),1)]),_:2},1024)],10,Ja)):D("",!0)]),c("div",Ka,[v(Ae,{"open-delay":"500",activator:"parent",location:"top"},{default:h(()=>[P(N(r.isProcessed?"Processed video":"Unprocessed video"),1)]),_:2},1024),P(" "+N(Fe(r.fileName)??"Cockpit webm")+" ",1),v(G,{size:"10",class:le(["ml-1 mt-[3px]",r.isProcessed?"text-green-500":"text-red-500"])},{default:h(()=>[P(" mdi-circle ")]),_:2},1032,["class"])])]))),128))]),m.value.length>1?(y(),I("div",Qa,[c("div",null,[v(Le,{variant:"text",size:"small",class:"mt-[5px]",onClick:He},{default:h(()=>[v(Ae,{"open-delay":"500",activator:"parent",location:"bottom"},{default:h(()=>[P(" Select "+N(T.value?"single":"multiple")+" files ",1)]),_:1}),P(" "+N(T.value?"Single":"Multi"),1)]),_:1})]),c("div",null,[v(Le,{variant:"text",size:"small",class:"mt-[5px]",onClick:d[3]||(d[3]=r=>o.value.length===m.value.length?we():De())},{default:h(()=>[v(Ae,{"open-delay":"500",activator:"parent",location:"bottom"},{default:h(()=>[P(" Select "+N(o.value.length===m.value.length?"none":"all files"),1)]),_:1}),P(" "+N(o.value.length===m.value.length?"None":"All"),1)]),_:1})]),c("div",null,[v(Le,{variant:"text",size:"small",class:"mt-[5px]",onClick:d[4]||(d[4]=r=>o.value.every(j=>!j.isProcessed)?Re():Me())},{default:h(()=>[v(Ae,{"open-delay":"500",activator:"parent",location:"bottom"},{default:h(()=>[P(N(o.value.every(r=>!r.isProcessed)?"Select all processed videos":"Select all unprocessed videos"),1)]),_:1}),P(" "+N(o.value.every(r=>!r.isProcessed)?"Select Process.":"select Unproc."),1)]),_:1})])])):D("",!0)])):D("",!0),v(We,{vertical:"",class:"h-[92%] mt-4 opacity-[0.1]"}),m.value.length>0?(y(),I("div",ei,[c("div",null,[!T.value&&o.value.length===1&&!T.value&&!Q.value?(y(),I("video",{key:0,id:"video-player",ref_key:"videoPlayerRef",ref:k,width:"660px",controls:!!o.value[0].isProcessed,preload:o.value[0].isProcessed?"auto":"none",poster:((b=o.value[0])==null?void 0:b.thumbnail)||void 0,class:"border-[14px] border-white border-opacity-10 rounded-lg min-h-[382px]"},[c("source",{src:((L=o.value[0])==null?void 0:L.url)||void 0,type:"video/webm"},null,8,si)],8,ti)):D("",!0),!Q.value&&o.value.length===1&&!o.value[0].isProcessed&&!T.value&&!te.value?(y(),ve(Le,{key:1,variant:ee.value?"text":"outlined",color:"white",size:"large",disabled:ee.value,class:"process-button",onClick:U},{default:h(()=>[P(N(ee.value?"Processing...":"Process video"),1)]),_:1},8,["variant","disabled"])):D("",!0),c("div",ai,[ee.value&&!ne.value?(y(),ve(rt,{key:0,"model-value":te.value?100:W.value,color:te.value?"red":"green",height:"8",striped:""},null,8,["model-value","color"])):D("",!0),c("div",ii,[!Q.value&&o.value.length===1&&ee.value&&te.value?(y(),I("button",{key:0,class:"bg-red text-[#ffffffaa] flex flex-col justify-center align-center w-[20px] h-[20px] rounded-full mt-[40px] ml-[-25px]",onClick:d[7]||(d[7]=r=>ce.value=!ce.value)},[v(G,{class:"text-[18px]"},{default:h(()=>[P("mdi-alert-circle-outline")]),_:1}),v(Ae,{modelValue:ce.value,"onUpdate:modelValue":d[5]||(d[5]=r=>ce.value=r),"open-on-hover":!1,activator:"parent",location:"bottom",arrow:"","content-class":"border-[#ffffff55] border-2","onClick:outside":d[6]||(d[6]=r=>ce.value=!1)},{default:h(()=>[c("div",oi,[c("div",null,N(V.value),1)])]),_:1},8,["modelValue"])])):D("",!0)])])]),m.value.length>0&&o.value.length>=1&&T.value?(y(),I("div",ni,[c("div",li,[(y(!0),I(Ne,null,Ze(o.value,r=>(y(),ve(Xt,{key:r.fileName,class:"video-card"},{default:h(()=>[c("div",null,[v($t,null,{default:h(()=>[c("div",ri,N(Fe(r.fileName)),1)]),_:2},1024),c("div",ci,[v(G,{size:"10",class:le(r.isProcessed?"text-green-500":"text-red-500")},{default:h(()=>[P(" mdi-circle ")]),_:2},1032,["class"])])])]),_:2},1024))),128))]),v(We,{class:"mb-[-10px] opacity-[0.1] mx-3"})])):D("",!0),m.value.length>0?(y(),I("div",ui,[c("div",di,[c("div",vi,N(T.value?`Files selected: ${o.value.length}`:Oe((fe=o.value[0])==null?void 0:fe.fileName)),1),T.value?(y(),I("div",fi,[o.value.every(r=>!r.isProcessed)?(y(),I("div",hi,[c("button",{onClick:Be},"Process selected videos")])):D("",!0)])):D("",!0)]),c("div",mi,[(y(),I(Ne,null,Ze(Qe,r=>c("button",{key:r.name,class:"flex flex-col justify-center ml-6 align-center",disabled:!r.enable,onClick:j=>!r.confirmAction&&r.action()},[c("div",{class:le([[r.enable?"frosted-button":"frosted-button-disabled",!r.confirmAction&&"p-2"],"flex flex-col justify-center mb-1 rounded-full frosted-button align-center button"])},[r.tooltip?(y(),ve(Ae,{key:0,"open-delay":"500",activator:"parent",location:"bottom"},{default:h(()=>[P(N(r.tooltip),1)]),_:2},1024)):D("",!0),r.confirmAction?(y(),ve(Ks,{key:1,location:"top",opacity:"0"},{activator:h(({props:j,isActive:ae})=>[c("div",Je({class:"flex items-center justify-center w-full h-full"},j,Qs(ae,!0)),[v(G,{size:r.size,class:"rounded-full border-[transparent]",style:ea({borderWidth:`${r.size-4}px`})},{default:h(()=>[P(N(r.icon),1)]),_:2},1032,["size","style"])],16)]),default:h(()=>[v(ta,{class:"bg-transparent",elevation:"0"},{default:h(()=>[v(sa,null,{append:h(()=>[v(Le,{variant:"text",size:"medium",class:"wobble-effect border-2 border-[#fafafadd] rounded-full",onClick:r.action},{default:h(()=>[c("div",gi,[v(G,{size:"20px",color:"white"},{default:h(()=>[P("mdi-check")]),_:1})])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):(y(),I("div",yi,[v(G,{size:r.size},{default:h(()=>[P(N(r.icon),1)]),_:2},1032,["size"])]))],2)],8,pi)),64))])])):D("",!0)])):D("",!0),m.value.length===0?(y(),I("div",_i,N(Q.value?"Loading":"No videos on storage"),1)):D("",!0)],64)):D("",!0)])])]}),_:1},8,["modelValue"]),v(Va,{"open-snackbar":R.value,message:V.value,duration:3e3,"close-button":!1,"onUpdate:openSnackbar":d[9]||(d[9]=b=>R.value=b)},null,8,["open-snackbar","message"]),v(Yt,{"show-dialog":z.value,title:ue.value,actions:oe.value,"max-width":600},{content:h(()=>[xi]),_:1},8,["show-dialog","title","actions"]),v(Yt,{"show-dialog":ne.value,title:C.value,actions:w.value,"max-width":600},{content:h(()=>[te.value?D("",!0):(y(),I("div",Ti,[c("div",bi,[H.value.length>0?(y(),I("div",wi,[c("div",Ei," File "+N(H.value.length)+" of "+N(ge.value)+": "+N(H.value[H.value.length-1].message),1),c("div",Pi,[c("div",Si,N(H.value[H.value.length-1].fileName),1),c("div",Ci,[v(aa,{width:"1",size:"10",indeterminate:"",class:"mr-1 mb-[2px]"}),P(" "+N(`${H.value[H.value.length-1].progress}%`),1)])]),v(rt,{"model-value":H.value[H.value.length-1].progress,color:"white",height:"6",rounded:"",striped:""},null,8,["model-value"])])):D("",!0),c("div",null,[c("div",Ni,[Ii,c("div",ki,N(`${Math.ceil(W.value)}%`),1)]),v(rt,{"model-value":Math.ceil(W.value),color:"blue",height:"6",rounded:"",striped:""},null,8,["model-value"])])])])),te.value?(y(),I("div",Vi,[c("div",Ai,N(`Error processing video file: ${H.value[H.value.length-1].fileName}`),1)])):D("",!0)]),_:1},8,["show-dialog","title","actions"])],64))}}),Di=Ct(Oi,[["__scopeId","data-v-6917499c"]]),Mi=qt({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ia,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...oa(),...Gt({location:"top end"}),...Zt(),...na(),...Jt(),...la({transition:"scale-rotate-transition"})},"VBadge"),Ri=Kt()({name:"VBadge",inheritAttrs:!1,props:Mi(),setup(n,_){const{backgroundColorClasses:f,backgroundColorStyles:A}=ra(Ht(n,"color")),{roundedClasses:g}=es(n),{t:x}=ca(),{textColorClasses:m,textColorStyles:J}=ua(Ht(n,"textColor")),{themeClasses:S}=da(),{locationStyles:o}=Qt(n,!0,k=>(n.floating?n.dot?2:4:n.dot?8:12)+(["top","bottom"].includes(k)?+(n.offsetY??0):["left","right"].includes(k)?+(n.offsetX??0):0));return ss(()=>{const k=Number(n.content),B=!n.max||isNaN(k)?n.content:k<=+n.max?k:`${n.max}+`,[R,V]=va(_.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return v(n.tag,Je({class:["v-badge",{"v-badge--bordered":n.bordered,"v-badge--dot":n.dot,"v-badge--floating":n.floating,"v-badge--inline":n.inline},n.class]},V,{style:n.style}),{default:()=>{var T,O;return[v("div",{class:"v-badge__wrapper"},[(O=(T=_.slots).default)==null?void 0:O.call(T),v(fa,{transition:n.transition},{default:()=>{var re,Y;return[ha(v("span",Je({class:["v-badge__badge",S.value,f.value,g.value,m.value],style:[A.value,J.value,n.inline?{}:o.value],"aria-atomic":"true","aria-label":x(n.label,k),"aria-live":"polite",role:"status"},R),[n.dot?void 0:_.slots.badge?(Y=(re=_.slots).badge)==null?void 0:Y.call(re):n.icon?v(G,{icon:n.icon},null):B]),[[ma,n.modelValue]])]}})])]}})}),{}}}),ut=n=>(ns("data-v-9a773249"),n=n(),ls(),n),Ui={key:1},Li={class:"text-xs text-white select-none scroll-text"},Fi={key:3,class:"w-16 text-justify text-slate-100"},Bi={key:4,class:"w-16 text-justify text-slate-100"},zi=ut(()=>c("div",{class:"text-xs text-center text-white select-none flex-nowrap"},"Processing video...",-1)),Wi=[zi],Hi={key:5,class:"flex justify-center w-8"},ji={class:"p-6 m-5 bg-white rounded-md"},Yi=ut(()=>c("p",{class:"text-xl font-semibold"},"Choose a stream to record",-1)),Xi=ut(()=>c("div",{class:"w-auto h-px my-2 bg-grey-lighten-3"},null,-1)),$i={class:"flex items-center"},qi=ut(()=>c("span",null,"Record",-1)),Gi={key:1,class:"w-5 h-5 ml-2 rounded-full bg-red"},Zi=ct({__name:"MiniVideoRecorder",props:{miniWidget:{}},setup(n){const _=pa(),f=is(),g=ga(n).miniWidget,x=p(),{namesAvailableStreams:m}=ya(f),J=p(),{isOutside:S}=_a(J),o=p(!1),k=p(!1),B=p(!1),R=xa({interval:100}),V=p(),T=p(!1),O=p(0);Nt(async()=>{await Y()}),Ta(async()=>{Object.keys(g.value.options).length===0&&(g.value.options={streamName:void 0}),x.value=g.value.options.streamName}),Z(x,()=>{g.value.options.streamName=x.value,V.value=void 0});const re=C=>{k.value=C},Y=async()=>{let C=0;await f.videoStoringDB.iterate((w,X)=>{X.endsWith(".webm")&&C++}),Object.values(f.keysFailedUnprocessedVideos).forEach(()=>C++),O.value=C};function M(C){if(x.value=C,x.value===void 0){Ge.fire({text:"No stream selected.",icon:"error"});return}if(m.value.includes(x.value))return;const w="The selected stream is not available. Please check its source or select another stream.";throw Ge.fire({text:w,icon:"error"}),new Error(w)}const ce=async()=>{if(z.value){x.value!==void 0&&f.stopRecording(x.value);return}if(x.value===void 0){o.value=!0;return}Q()},Q=()=>{M(x.value),f.startRecording(x.value),o.value=!1},z=jt(()=>x.value===void 0?!1:f.isRecording(x.value)),ue=jt(()=>{var ge,ee,me,te;if(x.value===void 0)return"00:00:00";const C=(ge=f.getStreamData(x.value))==null?void 0:ge.timeRecordingStart;if(C===void 0)return"00:00:00";const w=ba({start:C,end:R.value}),X=((ee=w.hours)==null?void 0:ee.toFixed(0).length)===1?`0${w.hours}`:w.hours,W=((me=w.minutes)==null?void 0:me.toFixed(0).length)===1?`0${w.minutes}`:w.minutes,H=((te=w.seconds)==null?void 0:te.toFixed(0).length)===1?`0${w.seconds}`:w.seconds;return`${X}:${W}:${H}`}),oe=async C=>{M(C),V.value=void 0,B.value=!0;let w=0;const X=100,W=3e3;for(;B.value&&w<W;)B.value=V.value===void 0||!V.value.active,await new Promise(H=>setTimeout(H,X)),w+=X;if(B.value){Ge.fire({text:"Could not load media stream.",icon:"error"});return}g.value.options.streamName=C};let ne;return _.isRealMiniWidget(g.value)&&(ne=setInterval(()=>{g.value.options.streamName===void 0&&!m.value.isEmpty()&&(g.value.options.streamName=m.value[0],x.value=g.value.options.streamName,m.value.length>1&&Ge.fire({title:"Multiple streams detected",text:`You have multiple streams available, so we chose one randomly to start with.
          If you want to change it, please open the widget configuration.`,icon:"info",confirmButtonText:"OK"}));const C=f.getMediaStream(g.value.options.streamName);wa(C,V.value)||(V.value=C)},1e3)),os(()=>clearInterval(ne)),Z(()=>f.areThereVideosProcessing,C=>{T.value=C,Y()}),Z(()=>f.keysFailedUnprocessedVideos,()=>Y()),Z(()=>k.value,async C=>{C===!1&&await Y()}),Z(z,()=>{if(!z.value){window.onbeforeunload=null;return}window.onbeforeunload=()=>(Ge.fire({text:`
      You have a video recording ongoing.
      Remember to stop it before closing Cockpit, or the record will be lost.
    `,icon:"warning"}),"I hope the user does not click on the leave button.")}),(C,w)=>{const X=Ea("FontAwesomeIcon");return y(),I(Ne,null,[c("div",{ref_key:"recorderWidget",ref:J,class:le(["flex justify-around px-2 py-1 text-center rounded-lg h-9 align-center bg-slate-800/60",{"w-48":O.value>0,"w-32":O.value<=0}])},[T.value?(y(),I("div",Ui,[v(G,{class:"w-6 h-6 animate-spin",color:"white"},{default:h(()=>[P("mdi-loading")]),_:1})])):(y(),I("div",{key:0,class:le([{"blob red w-5 opacity-100 rounded-sm":z.value,"opacity-30 bg-red-400":Et(S)&&!z.value},"w-6 transition-all duration-500 rounded-full aspect-square bg-red-lighten-1 hover:cursor-pointer opacity-70 hover:opacity-90"]),onClick:w[0]||(w[0]=W=>ce())},null,2)),!z.value&&!T.value?(y(),I(Ne,{key:2},[x.value?(y(),I("div",{key:0,class:"flex flex-col max-w-[50%] scroll-container transition-all border-blur cursor-pointer",onClick:w[1]||(w[1]=W=>o.value=!0)},[c("div",Li,N(x.value),1)])):(y(),ve(X,{key:1,icon:"fa-solid fa-video",class:"h-6 text-slate-100"}))],64)):D("",!0),z.value&&!T.value?(y(),I("div",Fi,N(ue.value),1)):T.value?(y(),I("div",Bi,Wi)):D("",!0),O.value>0?(y(),I("div",Hi,[v(We,{vertical:"",class:"h-6"}),v(Ri,{color:"info",content:O.value,dot:Et(S)||k.value,class:"cursor-pointer",onClick:w[3]||(w[3]=W=>k.value=!0)},{default:h(()=>[v(G,{class:"w-6 h-6 ml-3 text-slate-100",onClick:w[2]||(w[2]=W=>k.value=!0)},{default:h(()=>[P(" mdi-video-box ")]),_:1})]),_:1},8,["content","dot"])])):D("",!0)],2),v(St,{modelValue:o.value,"onUpdate:modelValue":w[5]||(w[5]=W=>o.value=W),width:"auto"},{default:h(()=>[c("div",ji,[Yi,Xi,v(Pa,{"model-value":x.value,label:"Stream name",items:Et(m),"item-title":"name",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":"","onUpdate:modelValue":oe},null,8,["model-value","items"]),c("div",$i,[c("button",{class:"w-auto p-3 m-2 font-medium transition-all rounded-md shadow-md text-uppercase hover:bg-slate-100",onClick:w[4]||(w[4]=W=>o.value=!1)}," Cancel "),c("button",{class:le(["flex items-center p-3 mx-2 font-medium transition-all rounded-md shadow-md w-fit text-uppercase hover:bg-slate-100",{"bg-slate-200 opacity-30 pointer-events-none":B.value}]),onClick:Q},[qi,B.value?(y(),ve(G,{key:0,class:"m-2 animate-spin"},{default:h(()=>[P("mdi-loading")]),_:1})):(y(),I("div",Gi))],2)])])]),_:1},8,["modelValue"]),v(Di,{"open-modal":k.value,"onUpdate:openModal":re},null,8,["open-modal"])],64)}}}),Ki=Ct(Zi,[["__scopeId","data-v-9a773249"]]);export{Ki as default};
