import{d as B,b5 as O,am as $,an as F,q as i,ar as T,b6 as b,C as I,l as _,v as z,h as D,o as h,c as W,a as p,j,w as x,al as N,b as u,I as P,aP as A,i as t,H as n,R as H,aD as K,L as y,S,b7 as q,b8 as E,P as k,aM as J,b9 as Y,Y as G,J as Q,ba as X,a1 as Z}from"./index-Bnr-eKBU.js";import{_ as ee}from"./Snackbar.vue_vue_type_script_setup_true_lang-D_jlvwWv.js";const ae={class:"w-full h-full"},te=["src"],oe={class:"flex items-center justify-between"},se=B({__name:"IFrame",props:{widget:{}},setup(C){O(e=>({"13d6fbce":U.value}));const v=$(),a=F(C).widget,f=i(!1),r=i(0),l=i(a.value.options.source),d=i(!1),m=i(""),c=e=>X(e)?!0:"URL is not valid.",g=()=>{const e=c(l.value);if(e!==!0){m.value=`${e} Please enter a valid URL.`,d.value=!0;return}a.value.options.source=l.value};T(()=>{Object.keys(a.value.options).length===0&&(a.value.options={source:b},l.value=b)});const{width:V,height:w}=I(),M=_(()=>{let e="";return e=e.concat(" ","position: absolute;"),e=e.concat(" ",`left: ${a.value.position.x*V.value}px;`),e=e.concat(" ",`top: ${a.value.position.y*w.value}px;`),e=e.concat(" ",`width: ${a.value.size.width*V.value}px;`),e=e.concat(" ",`height: ${a.value.size.height*w.value}px;`),v.editingMode&&(e=e.concat(" ","pointer-events:none; border:0;")),v.isWidgetVisible(a.value)||(e=e.concat(" ","display: none;")),e}),U=_(()=>(100-r.value)/100);function R(){console.log("Finished loading"),f.value=!0}return z(a,()=>{a.value.managerVars.configMenuOpen===!1&&c(l.value)!==!0&&(l.value=a.value.options.source)},{deep:!0}),(e,o)=>{const L=D("tooltip");return h(),W(Q,null,[p("div",ae,[(h(),j(A,{to:".widgets-view"},[x(p("iframe",{src:u(a).options.source,style:P(M.value),frameborder:"0",onLoad:R},null,44,te),[[N,f.value]])])),t(G,{modelValue:u(a).managerVars.configMenuOpen,"onUpdate:modelValue":o[3]||(o[3]=s=>u(a).managerVars.configMenuOpen=s),"min-width":"400","max-width":"35%"},{default:n(()=>[t(H,{class:"pa-2"},{default:n(()=>[t(K,null,{default:n(()=>[y("Settings")]),_:1}),t(S,null,{default:n(()=>[p("div",oe,[t(q,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=s=>l.value=s),label:"Iframe Source",variant:"underlined",outlined:"",rules:[c],onKeydown:E(g,["enter"])},null,8,["modelValue","rules"]),x(t(k,{icon:"mdi-check",class:"mx-1 mb-5",rounded:"lg",flat:"",onClick:g},null,512),[[L,"Set",void 0,{bottom:!0}]])])]),_:1}),t(S,null,{default:n(()=>[t(J,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=s=>r.value=s),label:"Transparency",min:0,max:90},null,8,["modelValue"])]),_:1}),t(Y,null,{default:n(()=>[t(k,{color:"primary",onClick:o[2]||(o[2]=s=>u(a).managerVars.configMenuOpen=!1)},{default:n(()=>[y("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(ee,{"open-snackbar":d.value,message:m.value,duration:3e3,"close-button":!1,"onUpdate:openSnackbar":o[4]||(o[4]=s=>d.value=s)},null,8,["open-snackbar","message"])],64)}}}),ue=Z(se,[["__scopeId","data-v-19294f46"]]);export{ue as default};
