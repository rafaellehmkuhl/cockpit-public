import{c as A,I as M,u as N,J as F,K as T,r as f,k as u,w as k,L as B,M as V,h as U,l as d,m as c,q as D,T as P,n as o,x as O,F as v,t as m,G as r,N as g,V as j,O as z,s,P as G,Q as R,R as q,S as _,H as E,U as H,v as J,W as K}from"./index-dsO78R3K.js";const L={class:"flex items-center w-[5.5rem] h-12 text-white justify-center"},Q=o("span",{class:"absolute text-sm text-yellow-400 -bottom-[2px] -right-[7px] mdi mdi-alert-circle"},null,-1),X=[Q],Y={class:"flex flex-col w-[4rem] select-none text-sm font-semibold leading-4 text-end"},Z={class:"w-full"},$={class:"font-mono"},ee=o("span",null," V",-1),te={class:"w-full"},oe={class:"font-mono"},se=o("span",null," A",-1),ae={class:"w-full"},ne={class:"font-mono"},le=o("span",null," W",-1),re={class:"w-full"},ie={class:"font-mono"},ue=o("span",null," Wh",-1),ce=A({__name:"BatteryIndicator",props:{miniWidget:{}},setup(y){const e=M(y).miniWidget,t=N(),h=F(),x=T(),p=f(!0),i=f(void 0),C=u(()=>{var a;return((a=t==null?void 0:t.powerSupply)==null?void 0:a.voltage)===void 0?NaN:Math.abs(t.powerSupply.voltage)>=100?t.powerSupply.voltage.toFixed(0):t.powerSupply.voltage.toFixed(1)}),S=u(()=>{var a;return((a=t==null?void 0:t.powerSupply)==null?void 0:a.current)===void 0?NaN:Math.abs(t.powerSupply.current)>=100?t.powerSupply.current.toFixed(0):t.powerSupply.current.toFixed(1)}),b=u(()=>t.instantaneousWatts?t.instantaneousWatts.toFixed(1):NaN),I=u(()=>t.totalConsumedWatts.toFixed(1)),W=u(()=>"mdi-battery"),w=()=>{i.value&&clearInterval(i.value),e.value.options.showVoltageAndCurrent&&e.value.options.showPowerAndConsumption?i.value=setInterval(()=>{p.value=!p.value},e.value.options.toggleInterval):p.value=e.value.options.showVoltageAndCurrent};return k(()=>e.value.options,w,{deep:!0}),B(()=>{const a={showVoltageAndCurrent:!0,showPowerAndConsumption:!0,toggleInterval:3e3};e.value.options=Object.assign({},a,e.value.options),w(),V.registerUsage("Instantaneous Watts"),V.registerUsage("Total Consumed Wh")}),U(()=>{i.value&&clearInterval(i.value)}),(a,n)=>(d(),c(v,null,[D((d(),c("div",L,[o("span",{class:O(["relative w-[1.5rem] mdi battery-icon",[W.value]])},X,2),o("div",Y,[p.value?(d(),c(v,{key:0},[o("div",Z,[o("span",$,m(C.value),1),ee]),o("div",te,[o("span",oe,m(S.value),1),se])],64)):(d(),c(v,{key:1},[o("div",ae,[o("span",ne,m(b.value),1),le]),o("div",re,[o("span",ie,m(I.value),1),ue])],64))])])),[[P,"Battery information"]]),r(K,{modelValue:s(h).miniWidgetManagerVars(s(e).hash).configMenuOpen,"onUpdate:modelValue":n[3]||(n[3]=l=>s(h).miniWidgetManagerVars(s(e).hash).configMenuOpen=l),width:"auto"},{default:g(()=>[r(j,{class:"pa-4 text-white",style:z([{"border-radius":"15px"},s(x).globalGlassMenuStyles])},{default:g(()=>[r(G,{class:"text-center"},{default:g(()=>[R("Battery Indicator Config")]),_:1}),r(q,{class:"flex flex-col gap-y-4"},{default:g(()=>[r(_,{modelValue:s(e).options.showVoltageAndCurrent,"onUpdate:modelValue":n[0]||(n[0]=l=>s(e).options.showVoltageAndCurrent=l),label:"Show Voltage and Current","hide-details":""},null,8,["modelValue"]),r(_,{modelValue:s(e).options.showPowerAndConsumption,"onUpdate:modelValue":n[1]||(n[1]=l=>s(e).options.showPowerAndConsumption=l),label:"Show Power and Consumption","hide-details":""},null,8,["modelValue"]),s(e).options.showVoltageAndCurrent&&s(e).options.showPowerAndConsumption?(d(),E(H,{key:0,modelValue:s(e).options.toggleInterval,"onUpdate:modelValue":n[2]||(n[2]=l=>s(e).options.toggleInterval=l),modelModifiers:{number:!0},label:"Toggle Interval (ms)",type:"number",min:"1000",step:"100",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])):J("",!0)]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])],64))}});export{ce as default};
