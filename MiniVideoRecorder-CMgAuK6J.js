import{A as Mt,B as Vt,C as Ia,F as Dt,G as Pa,H as Rt,I as Na,J as ka,K as Ut,L as Oa,M as Lt,N as Aa,O as Ma,P as Va,Q as Da,R as Ft,q as S,S as Bt,v as ae,y as Ze,T as Ra,U as Yt,V as kt,h as u,W as Ua,X as La,Y as Fa,Z as Ne,_ as Ba,$ as Ya,a0 as Wt,d as ut,o as y,i as Pe,a1 as T,a2 as Ht,a3 as J,a4 as M,t as ee,a5 as Xt,a6 as Wa,a7 as zt,c as I,a as d,a8 as be,a9 as Ge,aa as Ie,j as Z,n as Ee,ab as Le,ac as Ha,ad as Xa,ae as za,af as ja,ag as qa,ah as jt,ai as qt,aj as $t,ak as Gt,al as $a,am as Ga,an as Za,ao as Ja,ap as Ka,aq as Ot,ar as Qa,as as ei,at as ti,au as ai,av as ii,w as ni,aw as si,ax as oi,ay as ri,az as li,aA as ci,aB as ui,aC as di,k as At,aD as fi,aE as Ue,aF as vi,r as hi,b as lt,aG as mi}from"./index-C7_LSVjv.js";var Zt={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(s){(function(g,v,P,f){var h=["","webkit","Moz","MS","ms","o"],_=v.createElement("div"),z="function",x=Math.round,l=Math.abs,C=Date.now;function V(e,t,a){return setTimeout(ie(e,a),t)}function D(e,t,a){return Array.isArray(e)?(N(e,a[t],a),!0):!1}function N(e,t,a){var i;if(e)if(e.forEach)e.forEach(t,a);else if(e.length!==f)for(i=0;i<e.length;)t.call(a,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(a,e[i],i,e)}function w(e,t,a){var i="DEPRECATED METHOD: "+t+`
`+a+` AT 
`;return function(){var n=new Error("get-stack-trace"),o=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",p=g.console&&(g.console.warn||g.console.log);return p&&p.call(g.console,i,o),e.apply(this,arguments)}}var k;typeof Object.assign!="function"?k=function(t){if(t===f||t===null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==f&&n!==null)for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])}return a}:k=Object.assign;var te=w(function(t,a,i){for(var n=Object.keys(a),o=0;o<n.length;)(!i||i&&t[n[o]]===f)&&(t[n[o]]=a[n[o]]),o++;return t},"extend","Use `assign`."),H=w(function(t,a){return te(t,a,!0)},"merge","Use `assign`.");function O(e,t,a){var i=t.prototype,n;n=e.prototype=Object.create(i),n.constructor=e,n._super=i,a&&k(n,a)}function ie(e,t){return function(){return e.apply(t,arguments)}}function ue(e,t){return typeof e==z?e.apply(t&&t[0]||f,t):e}function L(e,t){return e===f?t:e}function ne(e,t,a){N(m(t),function(i){e.addEventListener(i,a,!1)})}function j(e,t,a){N(m(t),function(i){e.removeEventListener(i,a,!1)})}function re(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function b(e,t){return e.indexOf(t)>-1}function m(e){return e.trim().split(/\s+/g)}function U(e,t,a){if(e.indexOf&&!a)return e.indexOf(t);for(var i=0;i<e.length;){if(a&&e[i][a]==t||!a&&e[i]===t)return i;i++}return-1}function F(e){return Array.prototype.slice.call(e,0)}function Te(e,t,a){for(var i=[],n=[],o=0;o<e.length;){var p=t?e[o][t]:e[o];U(n,p)<0&&i.push(e[o]),n[o]=p,o++}return a&&(t?i=i.sort(function(X,G){return X[t]>G[t]}):i=i.sort()),i}function he(e,t){for(var a,i,n=t[0].toUpperCase()+t.slice(1),o=0;o<h.length;){if(a=h[o],i=a?a+n:t,i in e)return i;o++}return f}var ye=1;function c(){return ye++}function E(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||g}var A=/mobile|tablet|ip(ad|hone|od)|android/i,r="ontouchstart"in g,B=he(g,"PointerEvent")!==f,q=r&&A.test(navigator.userAgent),K="touch",Y="pen",le="mouse",Kt="kinect",Qt=25,$=1,xe=2,R=4,Q=8,Fe=1,ke=2,Oe=4,Ae=8,Me=16,de=ke|Oe,we=Ae|Me,dt=de|we,ft=["x","y"],Be=["clientX","clientY"];function se(e,t){var a=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(i){ue(e.options.enable,[e])&&a.handler(i)},this.init()}se.prototype={handler:function(){},init:function(){this.evEl&&ne(this.element,this.evEl,this.domHandler),this.evTarget&&ne(this.target,this.evTarget,this.domHandler),this.evWin&&ne(E(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&j(this.element,this.evEl,this.domHandler),this.evTarget&&j(this.target,this.evTarget,this.domHandler),this.evWin&&j(E(this.element),this.evWin,this.domHandler)}};function ea(e){var t,a=e.options.inputClass;return a?t=a:B?t=Qe:q?t=He:r?t=et:t=We,new t(e,ta)}function ta(e,t,a){var i=a.pointers.length,n=a.changedPointers.length,o=t&$&&i-n===0,p=t&(R|Q)&&i-n===0;a.isFirst=!!o,a.isFinal=!!p,o&&(e.session={}),a.eventType=t,aa(e,a),e.emit("hammer.input",a),e.recognize(a),e.session.prevInput=a}function aa(e,t){var a=e.session,i=t.pointers,n=i.length;a.firstInput||(a.firstInput=vt(t)),n>1&&!a.firstMultiple?a.firstMultiple=vt(t):n===1&&(a.firstMultiple=!1);var o=a.firstInput,p=a.firstMultiple,W=p?p.center:o.center,X=t.center=ht(i);t.timeStamp=C(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=Ke(W,X),t.distance=Ye(W,X),ia(a,t),t.offsetDirection=pt(t.deltaX,t.deltaY);var G=mt(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=G.x,t.overallVelocityY=G.y,t.overallVelocity=l(G.x)>l(G.y)?G.x:G.y,t.scale=p?oa(p.pointers,i):1,t.rotation=p?sa(p.pointers,i):0,t.maxPointers=a.prevInput?t.pointers.length>a.prevInput.maxPointers?t.pointers.length:a.prevInput.maxPointers:t.pointers.length,na(a,t);var ve=e.element;re(t.srcEvent.target,ve)&&(ve=t.srcEvent.target),t.target=ve}function ia(e,t){var a=t.center,i=e.offsetDelta||{},n=e.prevDelta||{},o=e.prevInput||{};(t.eventType===$||o.eventType===R)&&(n=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:a.x,y:a.y}),t.deltaX=n.x+(a.x-i.x),t.deltaY=n.y+(a.y-i.y)}function na(e,t){var a=e.lastInterval||t,i=t.timeStamp-a.timeStamp,n,o,p,W;if(t.eventType!=Q&&(i>Qt||a.velocity===f)){var X=t.deltaX-a.deltaX,G=t.deltaY-a.deltaY,ve=mt(i,X,G);o=ve.x,p=ve.y,n=l(ve.x)>l(ve.y)?ve.x:ve.y,W=pt(X,G),e.lastInterval=t}else n=a.velocity,o=a.velocityX,p=a.velocityY,W=a.direction;t.velocity=n,t.velocityX=o,t.velocityY=p,t.direction=W}function vt(e){for(var t=[],a=0;a<e.pointers.length;)t[a]={clientX:x(e.pointers[a].clientX),clientY:x(e.pointers[a].clientY)},a++;return{timeStamp:C(),pointers:t,center:ht(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ht(e){var t=e.length;if(t===1)return{x:x(e[0].clientX),y:x(e[0].clientY)};for(var a=0,i=0,n=0;n<t;)a+=e[n].clientX,i+=e[n].clientY,n++;return{x:x(a/t),y:x(i/t)}}function mt(e,t,a){return{x:t/e||0,y:a/e||0}}function pt(e,t){return e===t?Fe:l(e)>=l(t)?e<0?ke:Oe:t<0?Ae:Me}function Ye(e,t,a){a||(a=ft);var i=t[a[0]]-e[a[0]],n=t[a[1]]-e[a[1]];return Math.sqrt(i*i+n*n)}function Ke(e,t,a){a||(a=ft);var i=t[a[0]]-e[a[0]],n=t[a[1]]-e[a[1]];return Math.atan2(n,i)*180/Math.PI}function sa(e,t){return Ke(t[1],t[0],Be)+Ke(e[1],e[0],Be)}function oa(e,t){return Ye(t[0],t[1],Be)/Ye(e[0],e[1],Be)}var ra={mousedown:$,mousemove:xe,mouseup:R},la="mousedown",ca="mousemove mouseup";function We(){this.evEl=la,this.evWin=ca,this.pressed=!1,se.apply(this,arguments)}O(We,se,{handler:function(t){var a=ra[t.type];a&$&&t.button===0&&(this.pressed=!0),a&xe&&t.which!==1&&(a=R),this.pressed&&(a&R&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[t],changedPointers:[t],pointerType:le,srcEvent:t}))}});var ua={pointerdown:$,pointermove:xe,pointerup:R,pointercancel:Q,pointerout:Q},da={2:K,3:Y,4:le,5:Kt},gt="pointerdown",Tt="pointermove pointerup pointercancel";g.MSPointerEvent&&!g.PointerEvent&&(gt="MSPointerDown",Tt="MSPointerMove MSPointerUp MSPointerCancel");function Qe(){this.evEl=gt,this.evWin=Tt,se.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}O(Qe,se,{handler:function(t){var a=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=ua[n],p=da[t.pointerType]||t.pointerType,W=p==K,X=U(a,t.pointerId,"pointerId");o&$&&(t.button===0||W)?X<0&&(a.push(t),X=a.length-1):o&(R|Q)&&(i=!0),!(X<0)&&(a[X]=t,this.callback(this.manager,o,{pointers:a,changedPointers:[t],pointerType:p,srcEvent:t}),i&&a.splice(X,1))}});var fa={touchstart:$,touchmove:xe,touchend:R,touchcancel:Q},va="touchstart",ha="touchstart touchmove touchend touchcancel";function yt(){this.evTarget=va,this.evWin=ha,this.started=!1,se.apply(this,arguments)}O(yt,se,{handler:function(t){var a=fa[t.type];if(a===$&&(this.started=!0),!!this.started){var i=ma.call(this,t,a);a&(R|Q)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,a,{pointers:i[0],changedPointers:i[1],pointerType:K,srcEvent:t})}}});function ma(e,t){var a=F(e.touches),i=F(e.changedTouches);return t&(R|Q)&&(a=Te(a.concat(i),"identifier",!0)),[a,i]}var pa={touchstart:$,touchmove:xe,touchend:R,touchcancel:Q},ga="touchstart touchmove touchend touchcancel";function He(){this.evTarget=ga,this.targetIds={},se.apply(this,arguments)}O(He,se,{handler:function(t){var a=pa[t.type],i=Ta.call(this,t,a);i&&this.callback(this.manager,a,{pointers:i[0],changedPointers:i[1],pointerType:K,srcEvent:t})}});function Ta(e,t){var a=F(e.touches),i=this.targetIds;if(t&($|xe)&&a.length===1)return i[a[0].identifier]=!0,[a,a];var n,o,p=F(e.changedTouches),W=[],X=this.target;if(o=a.filter(function(G){return re(G.target,X)}),t===$)for(n=0;n<o.length;)i[o[n].identifier]=!0,n++;for(n=0;n<p.length;)i[p[n].identifier]&&W.push(p[n]),t&(R|Q)&&delete i[p[n].identifier],n++;if(W.length)return[Te(o.concat(W),"identifier",!0),W]}var ya=2500,_t=25;function et(){se.apply(this,arguments);var e=ie(this.handler,this);this.touch=new He(this.manager,e),this.mouse=new We(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}O(et,se,{handler:function(t,a,i){var n=i.pointerType==K,o=i.pointerType==le;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)_a.call(this,a,i);else if(o&&ba.call(this,i))return;this.callback(t,a,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function _a(e,t){e&$?(this.primaryTouch=t.changedPointers[0].identifier,bt.call(this,t)):e&(R|Q)&&bt.call(this,t)}function bt(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var a={x:t.clientX,y:t.clientY};this.lastTouches.push(a);var i=this.lastTouches,n=function(){var o=i.indexOf(a);o>-1&&i.splice(o,1)};setTimeout(n,ya)}}function ba(e){for(var t=e.srcEvent.clientX,a=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var n=this.lastTouches[i],o=Math.abs(t-n.x),p=Math.abs(a-n.y);if(o<=_t&&p<=_t)return!0}return!1}var Et=he(_.style,"touchAction"),xt=Et!==f,wt="compute",St="auto",tt="manipulation",Se="none",Ve="pan-x",De="pan-y",Xe=xa();function at(e,t){this.manager=e,this.set(t)}at.prototype={set:function(e){e==wt&&(e=this.compute()),xt&&this.manager.element.style&&Xe[e]&&(this.manager.element.style[Et]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return N(this.manager.recognizers,function(t){ue(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Ea(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,a=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var i=this.actions,n=b(i,Se)&&!Xe[Se],o=b(i,De)&&!Xe[De],p=b(i,Ve)&&!Xe[Ve];if(n){var W=e.pointers.length===1,X=e.distance<2,G=e.deltaTime<250;if(W&&X&&G)return}if(!(p&&o)&&(n||o&&a&de||p&&a&we))return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function Ea(e){if(b(e,Se))return Se;var t=b(e,Ve),a=b(e,De);return t&&a?Se:t||a?t?Ve:De:b(e,tt)?tt:St}function xa(){if(!xt)return!1;var e={},t=g.CSS&&g.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(a){e[a]=t?g.CSS.supports("touch-action",a):!0}),e}var ze=1,oe=2,Ce=4,_e=8,me=_e,Re=16,fe=32;function pe(e){this.options=k({},this.defaults,e||{}),this.id=c(),this.manager=null,this.options.enable=L(this.options.enable,!0),this.state=ze,this.simultaneous={},this.requireFail=[]}pe.prototype={defaults:{},set:function(e){return k(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(D(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=je(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return D(e,"dropRecognizeWith",this)?this:(e=je(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(D(e,"requireFailure",this))return this;var t=this.requireFail;return e=je(e,this),U(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(D(e,"dropRequireFailure",this))return this;e=je(e,this);var t=U(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,a=this.state;function i(n){t.manager.emit(n,e)}a<_e&&i(t.options.event+Ct(a)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),a>=_e&&i(t.options.event+Ct(a))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=fe},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(fe|ze)))return!1;e++}return!0},recognize:function(e){var t=k({},e);if(!ue(this.options.enable,[this,t])){this.reset(),this.state=fe;return}this.state&(me|Re|fe)&&(this.state=ze),this.state=this.process(t),this.state&(oe|Ce|_e|Re)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}};function Ct(e){return e&Re?"cancel":e&_e?"end":e&Ce?"move":e&oe?"start":""}function It(e){return e==Me?"down":e==Ae?"up":e==ke?"left":e==Oe?"right":""}function je(e,t){var a=t.manager;return a?a.get(e):e}function ce(){pe.apply(this,arguments)}O(ce,pe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,a=e.eventType,i=t&(oe|Ce),n=this.attrTest(e);return i&&(a&Q||!n)?t|Re:i||n?a&R?t|_e:t&oe?t|Ce:oe:fe}});function qe(){ce.apply(this,arguments),this.pX=null,this.pY=null}O(qe,ce,{defaults:{event:"pan",threshold:10,pointers:1,direction:dt},getTouchAction:function(){var e=this.options.direction,t=[];return e&de&&t.push(De),e&we&&t.push(Ve),t},directionTest:function(e){var t=this.options,a=!0,i=e.distance,n=e.direction,o=e.deltaX,p=e.deltaY;return n&t.direction||(t.direction&de?(n=o===0?Fe:o<0?ke:Oe,a=o!=this.pX,i=Math.abs(e.deltaX)):(n=p===0?Fe:p<0?Ae:Me,a=p!=this.pY,i=Math.abs(e.deltaY))),e.direction=n,a&&i>t.threshold&&n&t.direction},attrTest:function(e){return ce.prototype.attrTest.call(this,e)&&(this.state&oe||!(this.state&oe)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=It(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}});function it(){ce.apply(this,arguments)}O(it,ce,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Se]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&oe)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function nt(){pe.apply(this,arguments),this._timer=null,this._input=null}O(nt,pe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[St]},process:function(e){var t=this.options,a=e.pointers.length===t.pointers,i=e.distance<t.threshold,n=e.deltaTime>t.time;if(this._input=e,!i||!a||e.eventType&(R|Q)&&!n)this.reset();else if(e.eventType&$)this.reset(),this._timer=V(function(){this.state=me,this.tryEmit()},t.time,this);else if(e.eventType&R)return me;return fe},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===me&&(e&&e.eventType&R?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=C(),this.manager.emit(this.options.event,this._input)))}});function st(){ce.apply(this,arguments)}O(st,ce,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Se]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&oe)}});function ot(){ce.apply(this,arguments)}O(ot,ce,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:de|we,pointers:1},getTouchAction:function(){return qe.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,a;return t&(de|we)?a=e.overallVelocity:t&de?a=e.overallVelocityX:t&we&&(a=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&l(a)>this.options.velocity&&e.eventType&R},emit:function(e){var t=It(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}});function $e(){pe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}O($e,pe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[tt]},process:function(e){var t=this.options,a=e.pointers.length===t.pointers,i=e.distance<t.threshold,n=e.deltaTime<t.time;if(this.reset(),e.eventType&$&&this.count===0)return this.failTimeout();if(i&&n&&a){if(e.eventType!=R)return this.failTimeout();var o=this.pTime?e.timeStamp-this.pTime<t.interval:!0,p=!this.pCenter||Ye(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!p||!o?this.count=1:this.count+=1,this._input=e;var W=this.count%t.taps;if(W===0)return this.hasRequireFailures()?(this._timer=V(function(){this.state=me,this.tryEmit()},t.interval,this),oe):me}return fe},failTimeout:function(){return this._timer=V(function(){this.state=fe},this.options.interval,this),fe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==me&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ge(e,t){return t=t||{},t.recognizers=L(t.recognizers,ge.defaults.preset),new rt(e,t)}ge.VERSION="2.0.7",ge.defaults={domEvents:!1,touchAction:wt,enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[it,{enable:!1},["rotate"]],[ot,{direction:de}],[qe,{direction:de},["swipe"]],[$e],[$e,{event:"doubletap",taps:2},["tap"]],[nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var wa=1,Pt=2;function rt(e,t){this.options=k({},ge.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=ea(this),this.touchAction=new at(this,this.options.touchAction),Nt(this,!0),N(this.options.recognizers,function(a){var i=this.add(new a[0](a[1]));a[2]&&i.recognizeWith(a[2]),a[3]&&i.requireFailure(a[3])},this)}rt.prototype={set:function(e){return k(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?Pt:wa},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var a,i=this.recognizers,n=t.curRecognizer;(!n||n&&n.state&me)&&(n=t.curRecognizer=null);for(var o=0;o<i.length;)a=i[o],t.stopped!==Pt&&(!n||a==n||a.canRecognizeWith(n))?a.recognize(e):a.reset(),!n&&a.state&(oe|Ce|_e)&&(n=t.curRecognizer=a),o++}},get:function(e){if(e instanceof pe)return e;for(var t=this.recognizers,a=0;a<t.length;a++)if(t[a].options.event==e)return t[a];return null},add:function(e){if(D(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(D(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,a=U(t,e);a!==-1&&(t.splice(a,1),this.touchAction.update())}return this},on:function(e,t){if(e!==f&&t!==f){var a=this.handlers;return N(m(e),function(i){a[i]=a[i]||[],a[i].push(t)}),this}},off:function(e,t){if(e!==f){var a=this.handlers;return N(m(e),function(i){t?a[i]&&a[i].splice(U(a[i],t),1):delete a[i]}),this}},emit:function(e,t){this.options.domEvents&&Sa(e,t);var a=this.handlers[e]&&this.handlers[e].slice();if(!(!a||!a.length)){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<a.length;)a[i](t),i++}},destroy:function(){this.element&&Nt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Nt(e,t){var a=e.element;if(a.style){var i;N(e.options.cssProps,function(n,o){i=he(a.style,o),t?(e.oldCssProps[i]=a.style[i],a.style[i]=n):a.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={})}}function Sa(e,t){var a=v.createEvent("Event");a.initEvent(e,!0,!0),a.gesture=t,t.target.dispatchEvent(a)}k(ge,{INPUT_START:$,INPUT_MOVE:xe,INPUT_END:R,INPUT_CANCEL:Q,STATE_POSSIBLE:ze,STATE_BEGAN:oe,STATE_CHANGED:Ce,STATE_ENDED:_e,STATE_RECOGNIZED:me,STATE_CANCELLED:Re,STATE_FAILED:fe,DIRECTION_NONE:Fe,DIRECTION_LEFT:ke,DIRECTION_RIGHT:Oe,DIRECTION_UP:Ae,DIRECTION_DOWN:Me,DIRECTION_HORIZONTAL:de,DIRECTION_VERTICAL:we,DIRECTION_ALL:dt,Manager:rt,Input:se,TouchAction:at,TouchInput:He,MouseInput:We,PointerEventInput:Qe,TouchMouseInput:et,SingleTouchInput:yt,Recognizer:pe,AttrRecognizer:ce,Tap:$e,Pan:qe,Swipe:ot,Pinch:it,Rotate:st,Press:nt,on:ne,off:j,each:N,merge:H,extend:te,assign:k,inherit:O,bindFn:ie,prefixed:he});var Ca=typeof g<"u"?g:typeof self<"u"?self:{};Ca.Hammer=ge,typeof f=="function"&&f.amd?f(function(){return ge}):s.exports?s.exports=ge:g[P]=ge})(window,document,"Hammer")})(Zt);var ct=Zt.exports;function pi(s){const g=Bt(s);let v=-1;function P(){clearInterval(v)}function f(){P(),Wt(()=>g.value=s)}function h(_){const z=_?getComputedStyle(_):{transitionDuration:.2},x=parseFloat(z.transitionDuration)*1e3||200;if(P(),g.value<=0)return;const l=performance.now();v=window.setInterval(()=>{const C=performance.now()-l+x;g.value=Math.max(s-C,0),g.value<=0&&P()},x)}return Ya(P),{clear:P,time:g,start:h,reset:f}}const gi=Mt({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Vt({location:"bottom"}),...Ia(),...Dt(),...Pa(),...Rt(),...Na(ka({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Ti=Ut()({name:"VSnackbar",props:gi(),emits:{"update:modelValue":s=>!0},setup(s,g){let{slots:v}=g;const P=Oa(s,"modelValue"),{locationStyles:f}=Lt(s),{positionClasses:h}=Aa(s),{scopeId:_}=Ma(),{themeClasses:z}=Va(s),{colorClasses:x,colorStyles:l,variantClasses:C}=Da(s),{roundedClasses:V}=Ft(s),D=pi(Number(s.timeout)),N=S(),w=S(),k=Bt(!1);ae(P,H),ae(()=>s.timeout,H),Ze(()=>{P.value&&H()});let te=-1;function H(){D.reset(),window.clearTimeout(te);const L=Number(s.timeout);if(!P.value||L===-1)return;const ne=Ra(w.value);D.start(ne),te=window.setTimeout(()=>{P.value=!1},L)}function O(){D.reset(),window.clearTimeout(te)}function ie(){k.value=!0,O()}function ue(){k.value=!1,H()}return Yt(()=>{const L=kt.filterProps(s),ne=!!(v.default||v.text||s.text);return u(kt,Ne({ref:N,class:["v-snackbar",{"v-snackbar--active":P.value,"v-snackbar--multi-line":s.multiLine&&!s.vertical,"v-snackbar--timer":!!s.timer,"v-snackbar--vertical":s.vertical},h.value,s.class],style:s.style},L,{modelValue:P.value,"onUpdate:modelValue":j=>P.value=j,contentProps:Ne({class:["v-snackbar__wrapper",z.value,x.value,V.value,C.value],style:[f.value,l.value],onPointerenter:ie,onPointerleave:ue},L.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},_),{default:()=>{var j,re;return[Ua(!1,"v-snackbar"),s.timer&&!k.value&&u("div",{key:"timer",class:"v-snackbar__timer"},[u(La,{ref:w,color:typeof s.timer=="string"?s.timer:"info",max:s.timeout,"model-value":D.time.value},null)]),ne&&u("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((j=v.text)==null?void 0:j.call(v))??s.text,(re=v.default)==null?void 0:re.call(v)]),v.actions&&u(Fa,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[u("div",{class:"v-snackbar__actions"},[v.actions()])]})]},activator:v.activator})}),Ba({},N)}}),yi=ut({__name:"Snackbar",props:{openSnackbar:Boolean,message:{type:String,default:""},duration:{type:Number,default:3e3}},emits:["update:openSnackbar"],setup(s,{emit:g}){const v=s,P=g,f=S(v.openSnackbar),h=S(v.message),_=S(v.duration||3e3),z=()=>{f.value=!1,P("update:openSnackbar",!1)};return ae(()=>v.openSnackbar,x=>{f.value=x}),ae(()=>v.message,x=>{h.value=x}),ae(f,x=>{x||P("update:openSnackbar",!1)}),(x,l)=>(y(),Pe(Ti,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=C=>f.value=C),elevation:"4",rounded:"lg",color:"#ffffff40",timeout:_.value,location:"bottom left","content-class":"bg-[#4f4f4f44] backdrop-filter backdrop-blur-lg text-white mb-[50px]",style:{marginBottom:40}},{actions:T(()=>[u(Ht,{color:"white",variant:"text",onClick:z},{default:T(()=>[u(J,null,{default:T(()=>[M("mdi-close")]),_:1})]),_:1})]),default:T(()=>[M(ee(h.value)+" ",1)]),_:1},8,["modelValue","timeout"]))}}),Jt=s=>(qt("data-v-642ac1e1"),s=s(),$t(),s),_i={class:"video-modal"},bi={class:"modal-content"},Ei={class:"flex flex-col justify-between align-center py-3 px-5 h-full"},xi={class:"flex flex-col justify-between align-center gap-y-8 pt-2"},wi=["disabled","onClick"],Si={class:"flex flex-col justify-center py-2 mb-[10px] ml-1 align-center"},Ci=Jt(()=>d("div",{class:"flex flex-col p-2 gap-y-2"},[d("div",null,[d("strong",null,"Computer:"),M(" Command+click, Ctrl+click or Long click to select multiple videos. ")]),d("div",null,[d("strong",null,"Mobile:"),M(" Long press to select multiple videos.")])],-1)),Ii={class:"frosted-button flex flex-col justify-center align-center w-[28px] h-[28px] rounded-full mb-1"},Pi=Jt(()=>d("div",{class:"text-sm"},"Close",-1)),Ni={key:0,class:"flex flex-col justify-between align-center py-8 px-2 w-[300px] h-[500px]"},ki={class:"flex flex-col align-center h-full w-full overflow-auto px-4"},Oi={class:"relative video-wrapper"},Ai=["id"],Mi=["src"],Vi={key:2,class:"checkmark-button"},Di={key:0,class:"flex justify-center w-full text-xs overflow-hidden"},Ri={class:"flex flex-col justify-between mt-5 align-center w-[720px]"},Ui=["src"],Li={key:1,class:"flex flex-col justify-start w-full p-2 pt-3"},Fi={class:"card-grid"},Bi={key:2,class:"flex flex-row justify-between align-center w-full h-full px-8 overflow-hidden"},Yi={class:"flex flex-row justify-between align-center pl-2 gap-x-6"},Wi={class:"cursor-default flex flex-row text-md"},Hi={key:0,class:"flex flex-row justify-between align-center w-[80px] ml-1"},Xi={class:"frosted-button w-[32px] h-[32px] button rounded-full p-2"},zi={class:"frosted-button w-[32px] h-[32px] button rounded-full p-2"},ji={class:"flex flex-row mt-2"},qi=["disabled","onClick"],$i={class:"bg-[#32c925] p-1 backdrop-filter backdrop-blur-lg flex flex-col justify-center align-center rounded-full"},Gi={key:1},Zi={key:1,class:"flex flex-row justify-start align-center text-xl w-full h-full"},Ji=ut({__name:"VideoLibraryModal",props:{openModal:Boolean},emits:["update:openModal"],setup(s,{emit:g}){const v=Xt(),P=s,f=g,h=S([]),_=S([]),z=S([]),x=S(P.openModal),l=S([]),C=S(null),V=S("videos"),D=S(!1),N=S(""),w=S(!1),k=S(!1),te=S(!1),H=S({}),O=S(!1),ie=S(!0),ue=[{name:"Videos",icon:"mdi-video-outline",selected:!0,enable:!0,tooltip:""},{name:"Pictures",icon:"mdi-image-outline",selected:!1,enable:!1,tooltip:"Coming soon"}],L=[{name:"Delete",icon:"mdi-delete-outline",size:22,confirmAction:!0,enable:!0,action:()=>he(l.value.map(c=>c.filename))},{name:"Download",icon:"mdi-tray-arrow-down",size:28,confirmAction:!1,enable:!0,action:()=>Te(l.value.map(c=>c.filename))}],ne=()=>{x.value=!1,f("update:openModal",!1),V.value="videos",h.value.forEach(c=>URL.revokeObjectURL(c)),h.value=[],U()},j=c=>{const E=/\(([^)]+)\)/,A=c.match(E);return A?A[1]:""},re=c=>{c.key==="Escape"&&U()},b=()=>{if(l.value.length===1&&!w.value){const c=document.getElementById("video-player");c&&c.play().catch(E=>console.error("Error auto-playing video:",E))}},m=()=>{l.value=[..._.value],w.value=!0},U=()=>{w.value=!1,k.value=!1,te.value=!1,l.value.length>1&&(l.value=[l.value[0]])},F=c=>c.flatMap(A=>{const r=A.replace(".webm",".ass");return z.value.some(q=>q.filename===r)?[A,r]:[A]}),Te=async c=>{N.value="Preparing download...",await v.downloadFilesFromVideoDB(F(c)),D.value=!0},he=async c=>{let E=l.value.length;N.value=`${E} video(s) discarded.`,await v.discardFilesFromVideoDB(F(c)),D.value=!0,await ye(),_.value.length>0?l.value=[_.value[0]]:l.value=[]},ye=async()=>{ie.value=!0,_.value=[];const c=[],E=[];await v.videoStoringDB.iterate((B,q)=>{q.endsWith(".webm")&&c.push((async()=>{const K=await v.videoStoringDB.getItem(q);let Y="";K instanceof Blob?(Y=URL.createObjectURL(K),h.value.push(Y)):console.error("Video data is not a Blob:",K);const le=await v.videoStorageFileSize(q)??0;return{filename:q,size:le,url:Y}})()),q.endsWith(".ass")&&E.push((async()=>{const K=await v.videoStoringDB.getItem(q);let Y="";K instanceof Blob?(Y=URL.createObjectURL(K),h.value.push(Y)):console.error("Video data is not a Blob:",K);const le=await v.videoStorageFileSize(q)??0;return{filename:q,size:le,url:Y}})())});const A=await Promise.all(c),r=await Promise.all(E);_.value=A,z.value=r,_.value.length>0&&(l.value=[_.value[0]]),ie.value=!1};return ae(x,c=>{f("update:openModal",c)}),ae(()=>P.openModal,async c=>{x.value=c,c===!0&&await ye()}),ae(l,c=>{if(c.length===1){w.value=!1;const E=c[0].url,A=C.value;A&&(A.src=E,A.load())}},{immediate:!0,deep:!0}),ae(_,async()=>{await Wt(),_.value.forEach(c=>{var A;const E=document.getElementById(`video-library-${c.filename}`);if(E){(A=H.value[c.filename])==null||A.destroy();const r=new ct.Manager(E);r.add(new ct.Tap),r.add(new ct.Press({time:500})),r.on("tap",B=>{const q=l.value.some(Y=>Y.filename===c.filename);if(w.value||B.srcEvent.ctrlKey||B.srcEvent.metaKey){w.value=!0;const Y=l.value.findIndex(le=>le.filename===c.filename);Y>-1?l.value.length>1&&l.value.splice(Y,1):l.value.push(c)}else q||(l.value=[c]);if(l.value.length===1&&q){const Y=document.getElementById("video-player");Y&&(Y.load(),Y.play().catch(le=>console.error("Error auto-playing video:",le)))}}),r.on("press",()=>{w.value=!0,l.value.some(B=>B.filename===c.filename)||l.value.push(c)}),H.value[c.filename]=r}})},{immediate:!0,deep:!0}),Ze(()=>{window.addEventListener("keydown",re)}),Wa(()=>{window.removeEventListener("keydown",re)}),Ze(async()=>{ie.value=!0,await ye()}),zt(()=>{V.value="videos",h.value.forEach(c=>URL.revokeObjectURL(c)),h.value=[],Object.values(H.value).forEach(c=>{c.destroy()})}),(c,E)=>(y(),I(be,null,[u(jt,{modelValue:x.value,"onUpdate:modelValue":E[3]||(E[3]=A=>x.value=A),persistent:"",class:"dialog"},{default:T(()=>{var A;return[d("div",_i,[d("div",bi,[d("div",Ei,[d("div",xi,[(y(),I(be,null,Ge(ue,r=>d("button",{key:r.name,disabled:!r.enable,class:"flex flex-col justify-center align-center",onClick:B=>V.value=r.name.toLowerCase()},[r.tooltip!==""?(y(),Pe(Ie,{key:0,"open-delay":"600",activator:"parent",location:"top"},{default:T(()=>[M(ee(r.tooltip),1)]),_:2},1024)):Z("",!0),d("div",{class:Ee(["rounded-full mb-1 text-2xl",[r.enable?"frosted-button":"frosted-button-disabled",V.value===r.name.toLowerCase()?"w-[60px] h-[60px]":"w-[40px] h-[40px]"]])},[u(J,{size:V.value===r.name.toLowerCase()?40:24,class:Ee({"ml-1":r.name.toLowerCase()==="videos"})},{default:T(()=>[M(ee(r.icon),1)]),_:2},1032,["size","class"])],2),d("div",{class:Ee(["text-sm",{"text-white/30":!r.enable}])},ee(r.name),3)],8,wi)),64))]),d("div",null,[d("div",Si,[d("button",{class:"frosted-button text-[#ffffffaa] flex flex-col justify-center align-center w-[28px] h-[28px] rounded-full mb-[4px]",onClick:E[2]||(E[2]=r=>O.value=!O.value)},[u(J,{class:"text-[24px]"},{default:T(()=>[M("mdi-help-circle-outline")]),_:1}),u(Ie,{modelValue:O.value,"onUpdate:modelValue":E[0]||(E[0]=r=>O.value=r),"open-on-hover":!1,activator:"parent",location:"top",arrow:"","content-class":"border-[#ffffff55] border-2 backdrop-blur-md","onClick:outside":E[1]||(E[1]=r=>O.value=!1)},{default:T(()=>[Ci]),_:1},8,["modelValue"])])]),u(Le,{class:"opacity-[0.1]"}),d("button",{class:"flex flex-col justify-center py-2 mt-4 align-center",onClick:ne},[d("div",Ii,[u(J,{class:"text-[18px]"},{default:T(()=>[M("mdi-close")]),_:1})]),Pi])])]),u(Le,{vertical:"",class:"h-[92%] mt-4 opacity-[0.1]"}),V.value==="videos"?(y(),I(be,{key:0},[_.value.length>0?(y(),I("div",Ni,[d("div",ki,[(y(!0),I(be,null,Ge(_.value,r=>(y(),I("div",{key:r.filename,class:"video-container mb-4"},[d("div",Oi,[r.filename.endsWith(".webm")?(y(),I("video",{key:0,id:`video-library-${r.filename}`,class:Ee(["border-4 border-white rounded-md cursor-pointer border-opacity-[0.1] hover:border-opacity-[0.4] transition duration-75 hover:ease-in",l.value.find(B=>B.filename===r.filename)?["border-opacity-[0.4]","w-[220px]"]:["border-opacity-[0.1]","w-[190px]"]]),preload:"auto"},[d("source",{src:r.url,type:"video/webm"},null,8,Mi)],10,Ai)):Z("",!0),l.value.find(B=>B.filename===r.filename)&&!w.value?(y(),I("div",{key:1,class:"play-button",onClick:b},[u(J,{size:"40",class:"text-white"},{default:T(()=>[M("mdi-play-circle-outline")]),_:1})])):Z("",!0),l.value.find(B=>B.filename===r.filename)&&w.value?(y(),I("div",Vi,[u(J,{size:"15",class:"text-white"},{default:T(()=>[M("mdi-check-circle-outline")]),_:1})])):Z("",!0)]),r.filename.endsWith(".webm")?(y(),I("div",Di,[u(Ie,{"open-delay":"500",activator:"parent",location:"top"},{default:T(()=>[M(ee(r.filename??"Cockpit webm"),1)]),_:2},1024),M(" "+ee(j(r.filename)??"Cockpit webm"),1)])):Z("",!0)]))),128))])])):Z("",!0),u(Le,{vertical:"",class:"h-[92%] mt-4 opacity-[0.1]"}),d("div",Ri,[_.value.length>0&&l.value.length===1&&!w.value?(y(),I("video",{key:0,id:"video-player",ref_key:"videoPlayerRef",ref:C,width:"660px",controls:"",preload:"auto",class:"border-[14px] border-white border-opacity-10 rounded-lg min-h-[382px]"},[d("source",{src:l.value[0]&&l.value[0].url,type:"video/webm"},null,8,Ui)],512)):Z("",!0),_.value.length>0&&l.value.length>=1&&w.value?(y(),I("div",Li,[d("div",Fi,[(y(!0),I(be,null,Ge(l.value,r=>(y(),Pe(Ha,{key:r.filename,class:"video-card"},{default:T(()=>[u(Xa,null,{default:T(()=>[M(ee(j(r.filename)),1)]),_:2},1024)]),_:2},1024))),128))]),u(Le,{class:"mb-[-10px] opacity-[0.1] mx-3"})])):Z("",!0),_.value.length>0?(y(),I("div",Bi,[d("div",Yi,[d("div",Wi,ee(w.value?`Files selected: ${l.value.length}`:j((A=l.value[0])==null?void 0:A.filename)),1),w.value?(y(),I("div",Hi,[d("div",Xi,[d("button",{onClick:m},[u(Ie,{"open-delay":"500",activator:"parent",location:"bottom"},{default:T(()=>[M("Select all")]),_:1}),u(J,{size:"20",class:"mt-[-3px]"},{default:T(()=>[M("mdi-select-group")]),_:1})])]),d("div",zi,[d("button",{onClick:U},[u(Ie,{"open-delay":"500",activator:"parent",location:"bottom"},{default:T(()=>[M("Select none")]),_:1}),u(J,{size:"20",class:"mt-[-3px]"},{default:T(()=>[M("mdi-select-off")]),_:1})])])])):Z("",!0)]),d("div",ji,[(y(),I(be,null,Ge(L,r=>d("button",{key:r.name,class:"flex flex-col justify-center align-center ml-6",disabled:!r.enable,onClick:B=>!r.confirmAction&&r.action()},[d("div",{class:Ee([[r.enable?"frosted-button":"frosted-button-disabled"],"frosted-button flex flex-col justify-center align-center button rounded-full mb-1 p-2"])},[u(Ie,{"open-delay":"500",activator:"parent",location:"bottom"},{default:T(()=>[M(ee(r.name),1)]),_:2},1024),r.confirmAction?(y(),Pe(za,{key:0,location:"top",opacity:"0"},{activator:T(({props:B})=>[u(J,Ne(B,{size:r.size}),{default:T(()=>[M(ee(r.icon),1)]),_:2},1040,["size"])]),default:T(()=>[u(ja,{class:"bg-transparent",elevation:"0"},{default:T(()=>[u(qa,null,{append:T(()=>[u(Ht,{variant:"text",size:"medium",class:"wobble-effect border-2 border-[#fafafadd] rounded-full",onClick:r.action},{default:T(()=>[d("div",$i,[u(J,{size:"20px",color:"white"},{default:T(()=>[M("mdi-check")]),_:1})])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):(y(),I("div",Gi,[u(J,Ne(P,{size:r.size}),{default:T(()=>[M(ee(r.icon),1)]),_:2},1040,["size"])]))],2)],8,qi)),64))])])):Z("",!0)]),_.value.length===0?(y(),I("div",Zi,ee(ie.value?"Loading":"No videos on storage"),1)):Z("",!0)],64)):Z("",!0)])])]}),_:1},8,["modelValue"]),u(yi,{"open-snackbar":D.value,message:N.value,duration:3e3,"onUpdate:openSnackbar":E[4]||(E[4]=A=>D.value=A)},null,8,["open-snackbar","message"])],64))}}),Ki=Gt(Ji,[["__scopeId","data-v-642ac1e1"]]),Qi=Mt({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:$a,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Ga(),...Vt({location:"top end"}),...Dt(),...Za(),...Rt(),...Ja({transition:"scale-rotate-transition"})},"VBadge"),en=Ut()({name:"VBadge",inheritAttrs:!1,props:Qi(),setup(s,g){const{backgroundColorClasses:v,backgroundColorStyles:P}=Ka(Ot(s,"color")),{roundedClasses:f}=Ft(s),{t:h}=Qa(),{textColorClasses:_,textColorStyles:z}=ei(Ot(s,"textColor")),{themeClasses:x}=ti(),{locationStyles:l}=Lt(s,!0,C=>(s.floating?s.dot?2:4:s.dot?8:12)+(["top","bottom"].includes(C)?+(s.offsetY??0):["left","right"].includes(C)?+(s.offsetX??0):0));return Yt(()=>{const C=Number(s.content),V=!s.max||isNaN(C)?s.content:C<=+s.max?C:`${s.max}+`,[D,N]=ai(g.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return u(s.tag,Ne({class:["v-badge",{"v-badge--bordered":s.bordered,"v-badge--dot":s.dot,"v-badge--floating":s.floating,"v-badge--inline":s.inline},s.class]},N,{style:s.style}),{default:()=>{var w,k;return[u("div",{class:"v-badge__wrapper"},[(k=(w=g.slots).default)==null?void 0:k.call(w),u(ii,{transition:s.transition},{default:()=>{var te,H;return[ni(u("span",Ne({class:["v-badge__badge",x.value,v.value,f.value,_.value],style:[P.value,z.value,s.inline?{}:l.value],"aria-atomic":"true","aria-label":h(s.label,C),"aria-live":"polite",role:"status"},D),[s.dot?void 0:g.slots.badge?(H=(te=g.slots).badge)==null?void 0:H.call(te):s.icon?u(J,{icon:s.icon},null):V]),[[si,s.modelValue]])]}})])]}})}),{}}}),Je=s=>(qt("data-v-e9668b7d"),s=s(),$t(),s),tn={key:1},an={class:"text-xs text-white select-none scroll-text"},nn={key:3,class:"w-16 text-justify text-slate-100"},sn={key:4,class:"w-16 text-justify text-slate-100"},on=Je(()=>d("div",{class:"text-center text-xs text-white select-none flex-nowrap"},"Processing video...",-1)),rn=[on],ln={key:5,class:"flex justify-center w-8"},cn={class:"p-6 m-5 bg-white rounded-md"},un=Je(()=>d("p",{class:"text-xl font-semibold"},"Choose a stream to record",-1)),dn=Je(()=>d("div",{class:"w-auto h-px my-2 bg-grey-lighten-3"},null,-1)),fn={class:"flex items-center"},vn=Je(()=>d("span",null,"Record",-1)),hn={key:1,class:"w-5 h-5 ml-2 rounded-full bg-red"},mn=ut({__name:"MiniVideoRecorder",props:{miniWidget:{}},setup(s){const g=oi(),v=Xt(),f=ri(s).miniWidget,h=S(),{namesAvailableStreams:_}=li(v),z=S(),{isOutside:x}=ci(z),l=S(!1),C=S(!1),V=S(!1),D=ui({interval:100}),N=S(),w=S(!1),k=S(0);Ze(async()=>{await H()}),di(async()=>{Object.keys(f.value.options).length===0&&(f.value.options={streamName:void 0}),h.value=f.value.options.streamName}),ae(h,()=>{f.value.options.streamName=h.value,N.value=void 0});const te=b=>{C.value=b},H=async()=>{let b=0;await v.videoStoringDB.iterate((m,U)=>{U.endsWith(".webm")&&b++}),k.value=b};function O(b){if(h.value=b,h.value===void 0){Ue.fire({text:"No stream selected.",icon:"error"});return}if(_.value.includes(h.value))return;const m="The selected stream is not available. Please check its source or select another stream.";throw Ue.fire({text:m,icon:"error"}),new Error(m)}const ie=async()=>{if(L.value){h.value!==void 0&&(v.stopRecording(h.value),w.value=!0);return}if(h.value===void 0){l.value=!0;return}ue()},ue=()=>{O(h.value),v.startRecording(h.value),l.value=!1},L=At(()=>h.value===void 0?!1:v.isRecording(h.value)),ne=At(()=>{var he,ye,c,E;if(h.value===void 0)return"00:00:00";const b=(he=v.getStreamData(h.value))==null?void 0:he.timeRecordingStart;if(b===void 0)return"00:00:00";const m=fi({start:b,end:D.value}),U=((ye=m.hours)==null?void 0:ye.toFixed(0).length)===1?`0${m.hours}`:m.hours,F=((c=m.minutes)==null?void 0:c.toFixed(0).length)===1?`0${m.minutes}`:m.minutes,Te=((E=m.seconds)==null?void 0:E.toFixed(0).length)===1?`0${m.seconds}`:m.seconds;return`${U}:${F}:${Te}`}),j=async b=>{O(b),N.value=void 0,V.value=!0;let m=0;const U=100,F=3e3;for(;V.value&&m<F;)V.value=N.value===void 0||!N.value.active,await new Promise(Te=>setTimeout(Te,U)),m+=U;if(V.value){Ue.fire({text:"Could not load media stream.",icon:"error"});return}f.value.options.streamName=b};let re;return g.isRealMiniWidget(f.value)&&(re=setInterval(()=>{f.value.options.streamName===void 0&&!_.value.isEmpty()&&(f.value.options.streamName=_.value[0],h.value=f.value.options.streamName,_.value.length>1&&Ue.fire({title:"Multiple streams detected",text:`You have multiple streams available, so we chose one randomly to start with.
          If you want to change it, please open the widget configuration.`,icon:"info",confirmButtonText:"OK"}));const b=v.getMediaStream(f.value.options.streamName);vi(b,N.value)||(N.value=b)},1e3)),zt(()=>clearInterval(re)),ae(()=>v.areThereVideosProcessing,b=>{w.value=b,H()}),ae(()=>C.value,async b=>{b===!1&&await H()}),ae(L,()=>{if(!L.value){window.onbeforeunload=null;return}window.onbeforeunload=()=>(Ue.fire({text:`
      You have a video recording ongoing.
      Remember to stop it before closing Cockpit, or the record will be lost.
    `,icon:"warning"}),"I hope the user does not click on the leave button.")}),(b,m)=>{const U=hi("FontAwesomeIcon");return y(),I(be,null,[d("div",{ref_key:"recorderWidget",ref:z,class:Ee(["flex justify-around px-2 py-1 text-center rounded-lg h-9 align-center bg-slate-800/60",{"w-48":k.value>0,"w-32":k.value<=0}])},[w.value?(y(),I("div",tn,[u(J,{class:"w-6 h-6 animate-spin",color:"white"},{default:T(()=>[M("mdi-loading")]),_:1})])):(y(),I("div",{key:0,class:Ee([{"blob red w-5 opacity-100 rounded-sm":L.value,"opacity-30 bg-red-400":lt(x)&&!L.value},"w-6 transition-all duration-500 rounded-full aspect-square bg-red-lighten-1 hover:cursor-pointer opacity-70 hover:opacity-90"]),onClick:m[0]||(m[0]=F=>ie())},null,2)),L.value?Z("",!0):(y(),I(be,{key:2},[h.value?(y(),I("div",{key:0,class:"flex flex-col max-w-[50%] scroll-container transition-all border-blur cursor-pointer",onClick:m[1]||(m[1]=F=>l.value=!0)},[d("div",an,ee(h.value),1)])):(y(),Pe(U,{key:1,icon:"fa-solid fa-video",class:"h-6 text-slate-100"}))],64)),L.value&&!w.value?(y(),I("div",nn,ee(ne.value),1)):w.value?(y(),I("div",sn,rn)):Z("",!0),k.value>0?(y(),I("div",ln,[u(Le,{vertical:"",class:"h-6"}),u(en,{color:"info",content:k.value,dot:lt(x)||C.value,class:"cursor-pointer",onClick:m[3]||(m[3]=F=>C.value=!0)},{default:T(()=>[u(J,{class:"w-6 h-6 text-slate-100 ml-3",onClick:m[2]||(m[2]=F=>C.value=!0)},{default:T(()=>[M(" mdi-video-box ")]),_:1})]),_:1},8,["content","dot"])])):Z("",!0)],2),u(jt,{modelValue:l.value,"onUpdate:modelValue":m[5]||(m[5]=F=>l.value=F),width:"auto"},{default:T(()=>[d("div",cn,[un,dn,u(mi,{"model-value":h.value,label:"Stream name",items:lt(_),"item-title":"name",density:"compact",variant:"outlined","no-data-text":"No streams available.","hide-details":"","return-object":"","onUpdate:modelValue":j},null,8,["model-value","items"]),d("div",fn,[d("button",{class:"w-auto p-3 m-2 font-medium transition-all rounded-md shadow-md text-uppercase hover:bg-slate-100",onClick:m[4]||(m[4]=F=>l.value=!1)}," Cancel "),d("button",{class:Ee(["flex items-center p-3 mx-2 font-medium transition-all rounded-md shadow-md w-fit text-uppercase hover:bg-slate-100",{"bg-slate-200 opacity-30 pointer-events-none":V.value}]),onClick:ue},[vn,V.value?(y(),Pe(J,{key:0,class:"m-2 animate-spin"},{default:T(()=>[M("mdi-loading")]),_:1})):(y(),I("div",hn))],2)])])]),_:1},8,["modelValue"]),u(Ki,{"open-modal":C.value,"onUpdate:openModal":te},null,8,["open-modal"])],64)}}}),gn=Gt(mn,[["__scopeId","data-v-e9668b7d"]]);export{gn as default};
