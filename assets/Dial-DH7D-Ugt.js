import{c as O,y as z,J as B,r as x,w as P,o as T,au as X,k as Y,h as j,av as $,aw as q,l as C,m as F,n as v,v as f,O as b,q as n,t as J,s as U,ax as G,_ as H}from"./index-j_pn1PLB.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new l.Error().stack;a&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[a]="4a363395-dabe-40bd-81b8-4a87f985d7a8",l._sentryDebugIdIdentifier="sentry-dbid-4a363395-dabe-40bd-81b8-4a87f985d7a8")}catch{}})();const K={class:"potentiometer-scale elevation-5"},Q={key:0,class:"value-display bg-[#FFFFFF22] border-[#FFFFFF44] border-[1px] rounded-md p-[2px] min-w-9 text-center elevation-1"},Z=O({__name:"Dial",props:{miniWidget:{}},setup(l){const a=z(),e=B(l).miniWidget,d=x(0),g=x(-150);P(()=>a.miniWidgetManagerVars(e.value.hash).configMenuOpen,t=>{t===!0&&(a.showElementPropsDrawer(e.value.hash),setTimeout(()=>{a.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const y=t=>{var s,u,c,m;let i;t==null||isNaN(Number(t))?i=((s=e.value.options.layout)==null?void 0:s.minValue)||0:i=Number(t),d.value=i;const o=300,r=((u=e.value.options.layout)==null?void 0:u.maxValue)-((c=e.value.options.layout)==null?void 0:c.minValue)||1;g.value=(i-((m=e.value.options.layout)==null?void 0:m.minValue))/r*o-150};T(()=>{var t;if((!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,a.updateElementOptions(e.value.hash,{layout:{minValue:0,maxValue:100,size:"small",showValue:!0,align:"center",knobColor:"#838383",notchColor:"#303030aa"},variableType:"number",actionVariable:void 0})),e.value.options.actionVariable){X((t=e.value.options.actionVariable)==null?void 0:t.name,o=>{y(o)});const i=a.getMiniWidgetLastValue(e.value.hash);y(i)}});const E=Y(()=>{var t;switch((t=e.value.options.layout)==null?void 0:t.size){case"medium":return"potentiometer-medium";case"large":return"potentiometer-large";default:return"potentiometer-small"}}),I=t=>{t.preventDefault();const o=t.currentTarget.getBoundingClientRect(),r=o.left+o.width/2,s=o.top+o.height/2,u=t.clientX-r,c=t.clientY-s,m=Math.atan2(c,u)*(180/Math.PI),R=g.value,V=M=>{var k,D,_;const W=M.clientX-r,S=M.clientY-s;let p=Math.atan2(S,W)*(180/Math.PI)-m;p>180?p-=360:p<-180&&(p+=360);let h=R+p;h=Math.max(-150,Math.min(150,h)),g.value=h;const L=300,N=((k=e.value.options.layout)==null?void 0:k.maxValue)-((D=e.value.options.layout)==null?void 0:D.minValue)||1;if(d.value=(h+150)/L*N+((_=e.value.options.layout)==null?void 0:_.minValue),e.value.options.actionVariable){if(a.editingMode)return;a.setMiniWidgetLastValue(e.value.hash,Math.round(d.value)),G(e.value.options.actionVariable.name,Math.round(d.value))}},w=()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",V),document.addEventListener("mouseup",w)};return j(()=>{e.value.options.actionVariable&&($(e.value.options.actionVariable.name),q(e.value.options.actionVariable.id))}),(t,i)=>{var o,r,s,u,c;return C(),F("div",{id:"dial",class:f(["flex items-center w-auto",((o=n(a).elementToShowOnDrawer)==null?void 0:o.hash)===n(e).hash&&n(a).editingMode?"bg-[#00000010] ":"border-0"]),style:b({justifyContent:(r=n(e).options.layout)==null?void 0:r.align}),onClick:i[0]||(i[0]=m=>n(a).editingMode&&n(a).showElementPropsDrawer(n(e).hash))},[v("div",{class:f(["flex flex-row",n(a).editingMode?"pointer-events-none":"pointer-events-auto"])},[v("div",{class:f(["potentiometer-container w-full",E.value]),onMousedown:I},[v("div",K,[v("div",{class:"potentiometer-knob",style:b({transform:`rotate(${g.value}deg)`,background:((s=n(e).options.layout)==null?void 0:s.knobColor)||"#838383"})},[v("div",{class:"knob-notch",style:b({background:((u=n(e).options.layout)==null?void 0:u.notchColor)||"#222222"})},null,4)],4)])],34)],2),(c=n(e).options.layout)!=null&&c.showValue?(C(),F("div",Q,J(Math.round(d.value)||0),1)):U("",!0)],6)}}}),ae=H(Z,[["__scopeId","data-v-4ec050d3"]]);export{ae as default};
//# sourceMappingURL=Dial-DH7D-Ugt.js.map
