import{c as z,y as B,J as P,r as x,w as T,o as X,au as Y,k as j,h as $,av as q,aw as J,l as C,m as F,n as v,v as b,O as y,q as o,t as U,s as G,ax as H,_ as K}from"./index-BuIQHwnx.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new l.Error().stack;a&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[a]="672d4f77-1ed0-452d-912b-0f7e7c5442e0",l._sentryDebugIdIdentifier="sentry-dbid-672d4f77-1ed0-452d-912b-0f7e7c5442e0")}catch{}})();const Q={class:"potentiometer-scale elevation-5"},Z={key:0,class:"value-display bg-[#FFFFFF22] border-[#FFFFFF44] border-[1px] rounded-md p-[2px] min-w-9 text-center elevation-1"},ee=z({__name:"Dial",props:{miniWidget:{}},setup(l){const a=B(),e=P(l).miniWidget,c=x(0),g=x(-150);let h;T(()=>a.miniWidgetManagerVars(e.value.hash).configMenuOpen,t=>{t===!0&&(a.showElementPropsDrawer(e.value.hash),setTimeout(()=>{a.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0});const V=t=>{var i,u,d,m;let s;t==null||isNaN(Number(t))?s=((i=e.value.options.layout)==null?void 0:i.minValue)||0:s=Number(t),c.value=s;const n=300,r=((u=e.value.options.layout)==null?void 0:u.maxValue)-((d=e.value.options.layout)==null?void 0:d.minValue)||1;g.value=(s-((m=e.value.options.layout)==null?void 0:m.minValue))/r*n-150};X(()=>{var t;if((!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,a.updateElementOptions(e.value.hash,{layout:{minValue:0,maxValue:100,size:"small",showValue:!0,align:"center",knobColor:"#838383",notchColor:"#303030aa"},variableType:"number",dataLakeVariable:void 0})),e.value.options.dataLakeVariable){h=Y((t=e.value.options.dataLakeVariable)==null?void 0:t.name,n=>{V(n)});const s=a.getMiniWidgetLastValue(e.value.hash);V(s)}});const I=j(()=>{var t;switch((t=e.value.options.layout)==null?void 0:t.size){case"medium":return"potentiometer-medium";case"large":return"potentiometer-large";default:return"potentiometer-small"}}),R=t=>{t.preventDefault();const n=t.currentTarget.getBoundingClientRect(),r=n.left+n.width/2,i=n.top+n.height/2,u=t.clientX-r,d=t.clientY-i,m=Math.atan2(d,u)*(180/Math.PI),W=g.value,k=M=>{var D,L,_;const S=M.clientX-r,A=M.clientY-i;let p=Math.atan2(A,S)*(180/Math.PI)-m;p>180?p-=360:p<-180&&(p+=360);let f=W+p;f=Math.max(-150,Math.min(150,f)),g.value=f;const N=300,O=((D=e.value.options.layout)==null?void 0:D.maxValue)-((L=e.value.options.layout)==null?void 0:L.minValue)||1;if(c.value=(f+150)/N*O+((_=e.value.options.layout)==null?void 0:_.minValue),e.value.options.dataLakeVariable){if(a.editingMode)return;a.setMiniWidgetLastValue(e.value.hash,Math.round(c.value)),H(e.value.options.dataLakeVariable.name,Math.round(c.value))}},w=()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",k),document.addEventListener("mouseup",w)};return $(()=>{e.value.options.dataLakeVariable&&(q(e.value.options.dataLakeVariable.id),h&&J(e.value.options.dataLakeVariable.name,h))}),(t,s)=>{var n,r,i,u,d;return C(),F("div",{id:"dial",class:b(["flex items-center w-auto",((n=o(a).elementToShowOnDrawer)==null?void 0:n.hash)===o(e).hash&&o(a).editingMode?"bg-[#00000010] ":"border-0"]),style:y({justifyContent:(r=o(e).options.layout)==null?void 0:r.align}),onClick:s[0]||(s[0]=m=>o(a).editingMode&&o(a).showElementPropsDrawer(o(e).hash))},[v("div",{class:b(["flex flex-row",o(a).editingMode?"pointer-events-none":"pointer-events-auto"])},[v("div",{class:b(["potentiometer-container w-full",I.value]),onMousedown:R},[v("div",Q,[v("div",{class:"potentiometer-knob",style:y({transform:`rotate(${g.value}deg)`,background:((i=o(e).options.layout)==null?void 0:i.knobColor)||"#838383"})},[v("div",{class:"knob-notch",style:y({background:((u=o(e).options.layout)==null?void 0:u.notchColor)||"#222222"})},null,4)],4)])],34)],2),(d=o(e).options.layout)!=null&&d.showValue?(C(),F("div",Z,U(Math.round(c.value)||0),1)):G("",!0)],6)}}}),ne=K(ee,[["__scopeId","data-v-4e9f8eed"]]);export{ne as default};
//# sourceMappingURL=Dial-DfG95Pd9.js.map
