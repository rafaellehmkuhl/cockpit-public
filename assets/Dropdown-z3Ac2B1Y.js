import{c as y,y as k,k as D,J as L,r as g,w as b,o as M,au as S,h as O,av as W,aw as _,l as x,m as E,n as I,H as C,N,Q as T,q as n,v as w,ah as B,O as j,ax as z,_ as P}from"./index-BuIQHwnx.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new l.Error().stack;a&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[a]="94b347e2-6df7-4d99-8cc2-dc75e5b4c9d4",l._sentryDebugIdIdentifier="sentry-dbid-94b347e2-6df7-4d99-8cc2-dc75e5b4c9d4")}catch{}})();const U=y({__name:"Dropdown",props:{miniWidget:{}},setup(l){var c,m;const a=k();let d;const v=l,o=D(()=>{var t;return((t=e.value.options.layout)==null?void 0:t.selectorOptions)||[]}),e=L(v).miniWidget,u=g(o.value.find(t=>{var i;return t.value===((i=v.miniWidget.options.lastSelected)==null?void 0:i.value)})||o.value[0]),p=g(((c=v.miniWidget.options.lastSelected)==null?void 0:c.value)||((m=o.value[0])==null?void 0:m.value));b(()=>a.miniWidgetManagerVars(e.value.hash).configMenuOpen,t=>{t===!0&&(a.showElementPropsDrawer(e.value.hash),setTimeout(()=>{a.miniWidgetManagerVars(e.value.hash).configMenuOpen=!1},200))},{immediate:!0,deep:!0}),b(u,t=>{a.updateElementOptions(e.value.hash,{...e.value.options,lastSelected:t})});const V=t=>{if(a.editingMode)return;const i=o.value.find(s=>s.value===t);i&&(p.value=t,e.value.options.dataLakeVariable&&z(e.value.options.dataLakeVariable.id,t),a.setMiniWidgetLastValue(e.value.hash,i.value))};return M(()=>{var t;if((!e.value.options||Object.keys(e.value.options).length===0)&&(e.value.isCustomElement=!0,a.updateElementOptions(e.value.hash,{layout:{selectorOptions:[],align:"start",width:168},variableType:"string",dataLakeVariable:void 0})),e.value.options.dataLakeVariable){d=S(e.value.options.dataLakeVariable.name,s=>{u.value=o.value.find(r=>r.value===s)});const i=a.getMiniWidgetLastValue(e.value.hash);u.value=o.value.find(s=>s.value===i)}((t=e.value.options.lastSelected)==null?void 0:t.name)!==""&&(u.value=e.value.options.lastSelected)}),O(()=>{e.value.options.dataLakeVariable&&(W(e.value.options.dataLakeVariable.id),d&&_(e.value.options.dataLakeVariable.name,d))}),(t,i)=>{var s,r,f;return x(),E("div",{class:w(["flex w-full",((s=n(a).elementToShowOnDrawer)==null?void 0:s.hash)===n(e).hash&&n(a).editingMode?"bg-[#00000010] ":"border-0"]),style:j({width:"100%",justifyContent:(r=n(e).options.layout)==null?void 0:r.align}),onClick:i[1]||(i[1]=h=>n(a).editingMode&&n(a).showElementPropsDrawer(n(e).hash))},[I("div",null,[C(B,{modelValue:p.value,"onUpdate:modelValue":[i[0]||(i[0]=h=>p.value=h),V],items:o.value,"item-title":"name","item-value":"value",theme:"dark",density:"compact",variant:"filled","min-width":((f=n(e).options.layout)==null?void 0:f.width)||168,"hide-details":"",class:w(["text-white",{"pointer-events-none":n(a).editingMode}])},{default:N(()=>i[2]||(i[2]=[T(" > ")])),_:1},8,["modelValue","items","min-width","class"])])],6)}}}),H=P(U,[["__scopeId","data-v-2e79badc"]]);export{H as default};
//# sourceMappingURL=Dropdown-z3Ac2B1Y.js.map
