{"version":3,"file":"Checkbox-GKOMg5q1.js","sources":["../../src/components/custom-widget-elements/Checkbox.vue"],"sourcesContent":["<template>\n  <div\n    class=\"flex items-center h-[30px]\"\n    :style=\"{ justifyContent: miniWidget.options.layout?.align }\"\n    :class=\"\n      widgetStore.elementToShowOnDrawer?.hash === miniWidget.hash && widgetStore.editingMode\n        ? 'bg-[#00000010] '\n        : 'border-0'\n    \"\n    @click=\"widgetStore.editingMode && widgetStore.showElementPropsDrawer(miniWidget.hash)\"\n  >\n    <p v-if=\"miniWidget.options.layout?.label !== ''\" class=\"mr-3 mb-[3px] text-white\">\n      {{ miniWidget.options.layout?.label }}\n    </p>\n    <v-checkbox\n      v-model=\"isChecked\"\n      hide-details\n      :color=\"miniWidget.options.layout?.color\"\n      class=\"text-white\"\n      :class=\"{ 'pointer-events-none': widgetStore.editingMode }\"\n      theme=\"dark\"\n      @update:model-value=\"handleToggleAction\"\n    ></v-checkbox>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, onUnmounted, ref, toRefs, watch } from 'vue'\n\nimport {\n  deleteDataLakeVariable,\n  listenDataLakeVariable,\n  setDataLakeVariableData,\n  unlistenDataLakeVariable,\n} from '@/libs/actions/data-lake'\nimport { useWidgetManagerStore } from '@/stores/widgetManager'\nimport { CustomWidgetElementOptions, CustomWidgetElementType } from '@/types/widgets'\n\nconst widgetStore = useWidgetManagerStore()\n\nconst props = defineProps<{\n  /**\n   * Element instance\n   */\n  miniWidget: CustomWidgetElementOptions[CustomWidgetElementType.Checkbox]\n}>()\n\nconst miniWidget = toRefs(props).miniWidget\nconst isChecked = ref(false)\nlet listenerId: string | undefined\n\nconst handleToggleAction = (): void => {\n  if (widgetStore.editingMode) return\n  widgetStore.setMiniWidgetLastValue(miniWidget.value.hash, isChecked.value)\n  if (miniWidget.value.options.dataLakeVariable) {\n    setDataLakeVariableData(miniWidget.value.options.dataLakeVariable.name, isChecked.value)\n  }\n}\n\nwatch(\n  () => widgetStore.miniWidgetManagerVars(miniWidget.value.hash).configMenuOpen,\n  (newValue) => {\n    if (newValue === true) {\n      widgetStore.showElementPropsDrawer(miniWidget.value.hash)\n      setTimeout(() => {\n        widgetStore.miniWidgetManagerVars(miniWidget.value.hash).configMenuOpen = false\n      }, 200)\n    }\n  },\n  { immediate: true, deep: true }\n)\n\nonMounted(() => {\n  if (!miniWidget.value.options || Object.keys(miniWidget.value.options).length === 0) {\n    miniWidget.value.isCustomElement = true\n    widgetStore.updateElementOptions(miniWidget.value.hash, {\n      layout: {\n        label: '',\n        align: 'center',\n        color: '#FFFFFF',\n      },\n      variableType: 'boolean',\n      dataLakeVariable: undefined,\n    })\n  }\n  if (miniWidget.value.options.dataLakeVariable) {\n    listenerId = listenDataLakeVariable(miniWidget.value.options.dataLakeVariable.name, (value) => {\n      isChecked.value = value as boolean\n    })\n    isChecked.value = widgetStore.getMiniWidgetLastValue(miniWidget.value.hash) as boolean\n  }\n})\n\nonUnmounted(() => {\n  if (miniWidget.value.options.dataLakeVariable) {\n    deleteDataLakeVariable(miniWidget.value.options.dataLakeVariable.id)\n    if (listenerId) {\n      unlistenDataLakeVariable(miniWidget.value.options.dataLakeVariable.name, listenerId)\n    }\n  }\n})\n</script>\n\n<style scoped></style>\n"],"names":["widgetStore","useWidgetManagerStore","miniWidget","toRefs","__props","isChecked","ref","listenerId","handleToggleAction","setDataLakeVariableData","watch","newValue","onMounted","listenDataLakeVariable","value","onUnmounted","deleteDataLakeVariable","unlistenDataLakeVariable"],"mappings":"ukBAsCA,MAAMA,EAAcC,EAAsB,EASpCC,EAAaC,EAPLC,CAOiB,EAAE,WAC3BC,EAAYC,EAAI,EAAK,EACvB,IAAAC,EAEJ,MAAMC,EAAqB,IAAY,CACjCR,EAAY,cAChBA,EAAY,uBAAuBE,EAAW,MAAM,KAAMG,EAAU,KAAK,EACrEH,EAAW,MAAM,QAAQ,kBAC3BO,EAAwBP,EAAW,MAAM,QAAQ,iBAAiB,KAAMG,EAAU,KAAK,EAE3F,EAEA,OAAAK,EACE,IAAMV,EAAY,sBAAsBE,EAAW,MAAM,IAAI,EAAE,eAC9DS,GAAa,CACRA,IAAa,KACHX,EAAA,uBAAuBE,EAAW,MAAM,IAAI,EACxD,WAAW,IAAM,CACfF,EAAY,sBAAsBE,EAAW,MAAM,IAAI,EAAE,eAAiB,IACzE,GAAG,EAEV,EACA,CAAE,UAAW,GAAM,KAAM,EAAK,CAChC,EAEAU,EAAU,IAAM,EACV,CAACV,EAAW,MAAM,SAAW,OAAO,KAAKA,EAAW,MAAM,OAAO,EAAE,SAAW,KAChFA,EAAW,MAAM,gBAAkB,GACvBF,EAAA,qBAAqBE,EAAW,MAAM,KAAM,CACtD,OAAQ,CACN,MAAO,GACP,MAAO,SACP,MAAO,SACT,EACA,aAAc,UACd,iBAAkB,MAAA,CACnB,GAECA,EAAW,MAAM,QAAQ,mBAC3BK,EAAaM,EAAuBX,EAAW,MAAM,QAAQ,iBAAiB,KAAOY,GAAU,CAC7FT,EAAU,MAAQS,CAAA,CACnB,EACDT,EAAU,MAAQL,EAAY,uBAAuBE,EAAW,MAAM,IAAI,EAC5E,CACD,EAEDa,EAAY,IAAM,CACZb,EAAW,MAAM,QAAQ,mBAC3Bc,EAAuBd,EAAW,MAAM,QAAQ,iBAAiB,EAAE,EAC/DK,GACFU,EAAyBf,EAAW,MAAM,QAAQ,iBAAiB,KAAMK,CAAU,EAEvF,CACD"}