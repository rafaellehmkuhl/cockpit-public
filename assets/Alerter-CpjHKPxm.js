import{d as k,u as V,a as S,w as i,A as u,b as f,c as E,e as T,r as h,o as C,f as j,h as H,i as L,j as b,k as N,l as m,m as p,n as s,t as c,F as M,p as U,q as I,s as $,v as F,x as q,_ as z}from"./index-BvgFrkVz.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a6e81f8a-b7b0-4d53-ac5c-2fc1966c758a",e._sentryDebugIdIdentifier="sentry-dbid-a6e81f8a-b7b0-4d53-ac5c-2fc1966c758a")}catch{}})();const O=k("vehicle-alerter",()=>{const e=V(),t=S();i(e.statusText,()=>{e.statusText.text&&t.pushAlert(new u(e.statusText.severity,e.statusText.text))}),i(()=>e.mode,()=>t.pushAlert(new u(f.Info,`Vehicle mode changed to ${e.mode}.`))),i(()=>e.isArmed,n=>{const o=n?"armed":"disarmed";t.pushAlert(new u(f.Info,`Vehicle ${o}`))}),i(()=>e.isVehicleOnline,n=>{const o=n?f.Success:f.Error,l=n?"connected":"disconnected";t.pushAlert(new u(o,`Vehicle ${l}`))})}),P={class:"mx-1 my-1.5 w-[500px]"},R={class:"mx-1 overflow-hidden text-xl font-medium text-gray-100 text-ellipsis"},G={class:"flex flex-col justify-center mx-1 font-mono text-xs font-semibold leading-3 text-right text-gray-100"},J=["title"],K={class:"mx-1 overflow-hidden text-lg font-medium leading-none text-ellipsis"},Q={class:"flex flex-col justify-center mx-1 font-mono text-xs font-semibold leading-3 text-right text-gray-100"},W={key:0,class:"h-px mx-1 mb-2 bg-slate-50/30"},X=10,Y=E({__name:"Alerter",setup(e){O();const t=S(),n=T({interval:1e3}),o=r=>q(r,"HH:mm:ss"),l=h(t.alerts[0]);let _;C(()=>{_=setInterval(()=>{var a;const r=new Date(n.value);if(j(r,((a=t.alerts.last())==null?void 0:a.time_created)||r)>X){l.value=new u(f.Info,"No recent alerts.");return}l.value=t.alerts.last()},1e3)}),H(()=>{clearInterval(_)});const[x,v]=L(),g=h(),w=b(g),y=h(),A=b(y);i(w,(r,d)=>{d&&!r&&setTimeout(()=>{!A.value&&!w.value&&x.value&&v()},250),!x.value&&v()}),i(A,(r,d)=>{d&&!r&&v()});const B=N(()=>[...t.sortedAlerts].reverse());return(r,d)=>(m(),p("div",P,[s("div",{ref_key:"currentAlertBar",ref:g,class:"flex items-center justify-between p-1 overflow-hidden rounded cursor-pointer select-none whitespace-nowrap bg-slate-800/75"},[s("p",R,c(l.value.message),1),s("div",G,[s("p",null,c(o(l.value.time_created||new Date)),1),s("p",null,c(l.value.level.toUpperCase()),1)])],512),s("div",{ref_key:"expandedAlertsBar",ref:y,class:F(["expanded-alerts-bar absolute w-full p-2 transition-all rounded top-12 max-h-[30vh] overflow-y-auto text-slate-50 scrollbar-hide bg-slate-800/75 select-none flex flex-col",{"opacity-0 invisible":!I(x)}])},[(m(!0),p(M,null,U(B.value,(a,D)=>(m(),p("div",{key:a.time_created.toISOString()},[s("div",{title:a.message,class:"flex items-center justify-between whitespace-nowrap"},[s("p",K,c(a.message),1),s("div",Q,[s("p",null,c(o(a.time_created||new Date)),1),s("p",null,c(a.level.toUpperCase()),1)])],8,J),D!==I(t).alerts.length-1?(m(),p("div",W)):$("",!0)]))),128))],2)]))}}),ee=z(Y,[["__scopeId","data-v-d73840a1"]]);export{ee as default};
//# sourceMappingURL=Alerter-CpjHKPxm.js.map
