{"version":3,"file":"Label-7PU7Pnoq.js","sources":["../../src/components/custom-widget-elements/Label.vue"],"sourcesContent":["<template>\n  <div\n    class=\"label-container\"\n    :class=\"\n      widgetStore.elementToShowOnDrawer?.hash === miniWidget.hash && widgetStore.editingMode\n        ? 'bg-[#00000010] '\n        : 'border-0'\n    \"\n    @click=\"widgetStore.editingMode && widgetStore.showElementPropsDrawer(miniWidget.hash)\"\n  >\n    <div\n      :style=\"{\n        width: '100%',\n        fontSize: `${miniWidget.options.layout?.textSize}px` || '35px',\n        fontWeight: miniWidget.options.layout?.weight,\n        textDecoration: miniWidget.options.layout?.decoration,\n        color: miniWidget.options.layout?.color || '#FFFFFF',\n        textAlign: miniWidget.options.layout?.align || 'center',\n        margin: '1px',\n      }\"\n    >\n      {{ miniWidget.options.text || 'Label' }}\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, onUnmounted, toRefs, watch } from 'vue'\n\nimport { deleteDataLakeVariable, listenDataLakeVariable, unlistenDataLakeVariable } from '@/libs/actions/data-lake'\nimport { useWidgetManagerStore } from '@/stores/widgetManager'\nimport { CustomWidgetElementOptions, CustomWidgetElementType } from '@/types/widgets'\n\nconst widgetStore = useWidgetManagerStore()\n\nconst props = defineProps<{\n  /**\n   * Element instance\n   */\n  miniWidget: CustomWidgetElementOptions[CustomWidgetElementType.Label]\n}>()\n\nconst miniWidget = toRefs(props).miniWidget\nlet listenerId: string | undefined\n\nwatch(\n  () => widgetStore.miniWidgetManagerVars(miniWidget.value.hash).configMenuOpen,\n  (newValue) => {\n    if (newValue === true) {\n      widgetStore.showElementPropsDrawer(miniWidget.value.hash)\n      setTimeout(() => {\n        widgetStore.miniWidgetManagerVars(miniWidget.value.hash).configMenuOpen = false\n      }, 200)\n    }\n  },\n  { immediate: true, deep: true }\n)\n\nonMounted(() => {\n  if (!props.miniWidget.options || Object.keys(props.miniWidget.options).length === 0) {\n    miniWidget.value.isCustomElement = true\n    widgetStore.updateElementOptions(props.miniWidget.hash, {\n      text: 'Label',\n      layout: {\n        textSize: 20,\n        weight: 'normal',\n        decoration: 'none',\n        color: '#FFFFFF',\n        align: 'center',\n      },\n      variableType: 'string',\n      dataLakeVariable: undefined,\n    })\n  }\n  if (props.miniWidget.options.dataLakeVariable) {\n    listenerId = listenDataLakeVariable(props.miniWidget.options.dataLakeVariable?.name, (value) => {\n      miniWidget.value.options.text = value as string\n    })\n    miniWidget.value.options.text = widgetStore.getMiniWidgetLastValue(miniWidget.value.hash) as string\n  }\n})\n\nonUnmounted(() => {\n  if (miniWidget.value.options.dataLakeVariable) {\n    deleteDataLakeVariable(miniWidget.value.options.dataLakeVariable.id)\n    if (listenerId) {\n      unlistenDataLakeVariable(miniWidget.value.options.dataLakeVariable.name, listenerId)\n    }\n  }\n})\n</script>\n\n<style scoped>\n.label-container {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n</style>\n"],"names":["widgetStore","useWidgetManagerStore","props","__props","miniWidget","toRefs","listenerId","watch","newValue","onMounted","listenDataLakeVariable","_a","value","onUnmounted","deleteDataLakeVariable","unlistenDataLakeVariable"],"mappings":"6gBAiCA,MAAMA,EAAcC,EAAsB,EAEpCC,EAAQC,EAORC,EAAaC,EAAOH,CAAK,EAAE,WAC7B,IAAAI,EAEJ,OAAAC,EACE,IAAMP,EAAY,sBAAsBI,EAAW,MAAM,IAAI,EAAE,eAC9DI,GAAa,CACRA,IAAa,KACHR,EAAA,uBAAuBI,EAAW,MAAM,IAAI,EACxD,WAAW,IAAM,CACfJ,EAAY,sBAAsBI,EAAW,MAAM,IAAI,EAAE,eAAiB,IACzE,GAAG,EAEV,EACA,CAAE,UAAW,GAAM,KAAM,EAAK,CAChC,EAEAK,EAAU,IAAM,QACV,CAACP,EAAM,WAAW,SAAW,OAAO,KAAKA,EAAM,WAAW,OAAO,EAAE,SAAW,KAChFE,EAAW,MAAM,gBAAkB,GACvBJ,EAAA,qBAAqBE,EAAM,WAAW,KAAM,CACtD,KAAM,QACN,OAAQ,CACN,SAAU,GACV,OAAQ,SACR,WAAY,OACZ,MAAO,UACP,MAAO,QACT,EACA,aAAc,SACd,iBAAkB,MAAA,CACnB,GAECA,EAAM,WAAW,QAAQ,mBAC3BI,EAAaI,GAAuBC,EAAAT,EAAM,WAAW,QAAQ,mBAAzB,YAAAS,EAA2C,KAAOC,GAAU,CACnFR,EAAA,MAAM,QAAQ,KAAOQ,CAAA,CACjC,EACDR,EAAW,MAAM,QAAQ,KAAOJ,EAAY,uBAAuBI,EAAW,MAAM,IAAI,EAC1F,CACD,EAEDS,EAAY,IAAM,CACZT,EAAW,MAAM,QAAQ,mBAC3BU,EAAuBV,EAAW,MAAM,QAAQ,iBAAiB,EAAE,EAC/DE,GACFS,EAAyBX,EAAW,MAAM,QAAQ,iBAAiB,KAAME,CAAU,EAEvF,CACD"}