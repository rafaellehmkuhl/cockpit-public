import{d as S,u as B,a as I,b as k,r as u,o as C,c as j,A as D,e as E,f as H,h as N,i as g,w as h,j as L,k as o,l as i,m as e,t as r,n as T,F as U,p as V,q as F,s as w,v as q,_ as z}from"./index-NMTuNY07.js";const M={class:"mx-1 my-1.5 w-[500px]"},O={class:"mx-1 overflow-hidden text-xl font-medium text-gray-100 text-ellipsis"},P={class:"flex flex-col justify-center mx-1 font-mono text-xs font-semibold leading-3 text-right text-gray-100"},R=["title"],G={class:"mx-1 overflow-hidden text-lg font-medium leading-none text-ellipsis"},J={class:"flex flex-col justify-center mx-1 font-mono text-xs font-semibold leading-3 text-right text-gray-100"},K={key:0,class:"h-px mx-1 mb-2 bg-slate-50/30"},Q=10,W=S({__name:"Alerter",setup(X){B();const a=I(),A=k({interval:1e3}),m=t=>T(t,"HH:mm:ss"),l=u(a.alerts[0]);let f;C(()=>{f=setInterval(()=>{var s;const t=new Date(A.value);if(j(t,((s=a.alerts.last())==null?void 0:s.time_created)||t)>Q){l.value=new D(E.Info,"No recent alerts.");return}l.value=a.alerts.last()},1e3)}),H(()=>{clearInterval(f)});const[c,d]=N(),p=u(),v=g(p),x=u(),_=g(x);h(v,(t,n)=>{n&&!t&&setTimeout(()=>{!_.value&&!v.value&&c.value&&d()},250),!c.value&&d()}),h(_,(t,n)=>{n&&!t&&d()});const y=L(()=>[...a.sortedAlerts].reverse());return(t,n)=>(i(),o("div",M,[e("div",{ref_key:"currentAlertBar",ref:p,class:"flex items-center justify-between p-1 overflow-hidden rounded cursor-pointer select-none whitespace-nowrap bg-slate-800/75"},[e("p",O,r(l.value.message),1),e("div",P,[e("p",null,r(m(l.value.time_created||new Date)),1),e("p",null,r(l.value.level.toUpperCase()),1)])],512),e("div",{ref_key:"expandedAlertsBar",ref:x,class:q(["expanded-alerts-bar absolute w-full p-2 transition-all rounded top-12 max-h-[30vh] overflow-y-auto text-slate-50 scrollbar-hide bg-slate-800/75 select-none flex flex-col",{"opacity-0 invisible":!w(c)}])},[(i(!0),o(U,null,V(y.value,(s,b)=>(i(),o("div",{key:s.time_created.toISOString()},[e("div",{title:s.message,class:"flex items-center justify-between whitespace-nowrap"},[e("p",G,r(s.message),1),e("div",J,[e("p",null,r(m(s.time_created||new Date)),1),e("p",null,r(s.level.toUpperCase()),1)])],8,R),b!==w(a).alerts.length-1?(i(),o("div",K)):F("",!0)]))),128))],2)]))}}),Z=z(W,[["__scopeId","data-v-d73840a1"]]);export{Z as default};
