{"version":3,"file":"JoystickCommIndicator-B3hq9v-n.js","sources":["../../src/components/mini-widgets/JoystickCommIndicator.vue"],"sourcesContent":["<template>\n  <div>\n    <v-tooltip :text=\"tooltipText\" location=\"bottom\">\n      <template #activator=\"{ props: tooltipProps }\">\n        <div v-bind=\"tooltipProps\" class=\"relative cursor-pointer\" :class=\"indicatorClass\" @click=\"showDialog = true\">\n          <FontAwesomeIcon icon=\"fa-solid fa-gamepad\" size=\"xl\" />\n          <FontAwesomeIcon\n            v-if=\"!joystickConnected || !controllerStore.enableForwarding\"\n            icon=\"fa-solid fa-slash\"\n            size=\"xl\"\n            class=\"absolute left-0\"\n          />\n        </div>\n      </template>\n    </v-tooltip>\n\n    <InteractionDialog\n      v-model=\"showDialog\"\n      :title=\"joystickConnected ? 'Joystick connected' : 'Joystick disconnected'\"\n      max-width=\"400px\"\n      variant=\"text-only\"\n    >\n      <template #content>\n        <div class=\"flex items-center justify-center mb-4 flex-col\">\n          <span class=\"mr-2\"></span>\n          <v-switch\n            v-model=\"controllerStore.enableForwarding\"\n            hide-details\n            :label=\"switchLabel\"\n            color=\"white\"\n            :disabled=\"!joystickConnected\"\n          />\n        </div>\n      </template>\n      <template #actions>\n        <v-btn @click=\"showDialog = false\">Close</v-btn>\n      </template>\n    </InteractionDialog>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref } from 'vue'\n\nimport InteractionDialog from '@/components/InteractionDialog.vue'\nimport { joystickManager } from '@/libs/joystick/manager'\nimport { useControllerStore } from '@/stores/controller'\n\nconst controllerStore = useControllerStore()\nconst joystickConnected = ref(false)\nconst showDialog = ref(false)\n\nonMounted(() => {\n  joystickManager.onJoystickUpdate((event) => {\n    processJoystickEvent(event)\n  })\n})\n\nconst processJoystickEvent = (event: Map<number, Gamepad>): void => {\n  joystickConnected.value = event.size !== 0\n}\n\nconst indicatorClass = computed(() => {\n  if (!joystickConnected.value) return 'text-gray-700'\n  if (!controllerStore.enableForwarding) return 'text-yellow-500'\n  return 'text-slate-50'\n})\n\nconst tooltipText = computed(() => {\n  if (!joystickConnected.value) return 'Joystick disconnected'\n  if (!controllerStore.enableForwarding) return 'Joystick connected but disabled'\n  return 'Joystick connected and enabled'\n})\n\nconst switchLabel = computed(() => {\n  if (controllerStore.enableForwarding) return 'Joystick commands enabled'\n  return 'Joystick commands paused'\n})\n</script>\n"],"names":["controllerStore","useControllerStore","joystickConnected","ref","showDialog","onMounted","joystickManager","event","processJoystickEvent","indicatorClass","computed","tooltipText","switchLabel"],"mappings":"6lBAgDA,MAAMA,EAAkBC,IAClBC,EAAoBC,EAAI,EAAK,EAC7BC,EAAaD,EAAI,EAAK,EAE5BE,EAAU,IAAM,CACEC,EAAA,iBAAkBC,GAAU,CAC1CC,EAAqBD,CAAK,CAAA,CAC3B,CAAA,CACF,EAEK,MAAAC,EAAwBD,GAAsC,CAChDL,EAAA,MAAQK,EAAM,OAAS,CAAA,EAGrCE,EAAiBC,EAAS,IACzBR,EAAkB,MAClBF,EAAgB,iBACd,gBADuC,kBADT,eAGtC,EAEKW,EAAcD,EAAS,IACtBR,EAAkB,MAClBF,EAAgB,iBACd,iCADuC,kCADT,uBAGtC,EAEKY,EAAcF,EAAS,IACvBV,EAAgB,iBAAyB,4BACtC,0BACR"}