import{c as P,I as F,u as k,J as B,K as U,r as v,k as f,w as O,L as A,M as j,h as z,l as w,m as c,D as E,T as G,n as a,v as R,t as b,F as V,G as u,N as y,V as q,O as J,q as s,P as K,Q as L,R as Q,S as M,U as $,W as H}from"./index-BvgFrkVz.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},h=new l.Error().stack;h&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[h]="38af2d05-08ef-4db9-bd9b-b6959aeb4241",l._sentryDebugIdIdentifier="sentry-dbid-38af2d05-08ef-4db9-bd9b-b6959aeb4241")}catch{}})();const X={class:"flex items-center w-[5.5rem] h-12 text-white justify-center"},Y={class:"flex flex-col w-[4rem] select-none text-sm font-semibold leading-4 text-end"},Z={class:"w-full"},ee={class:"font-mono"},te={class:"w-full"},oe={class:"font-mono"},ae={class:"font-mono"},se={class:"text-red-500 text-center text-sm w-[full]"},d=500,ne=P({__name:"BatteryIndicator",props:{miniWidget:{}},setup(l){const e=F(l).miniWidget,I={showCurrent:!0,showPower:!0,toggleInterval:1e3},o=k(),S=B(),T=U(),m=v(!0),p=v(void 0),g=v(""),x=v(void 0),n=v(e.value.options.toggleInterval??I.toggleInterval),W=f(()=>{var i;return((i=o==null?void 0:o.powerSupply)==null?void 0:i.voltage)===void 0?NaN:Math.abs(o.powerSupply.voltage)>=100?o.powerSupply.voltage.toFixed(0):o.powerSupply.voltage.toFixed(1)}),_=f(()=>{var i;return((i=o==null?void 0:o.powerSupply)==null?void 0:i.current)===void 0?NaN:Math.abs(o.powerSupply.current)>=100?o.powerSupply.current.toFixed(0):o.powerSupply.current.toFixed(1)}),D=f(()=>o.instantaneousWatts!==void 0?o.instantaneousWatts.toFixed(1):NaN),N=f(()=>"mdi-battery"),C=()=>{(p.value||x.value)&&(clearInterval(p.value),clearTimeout(x.value)),n.value<d?(e.value.options.toggleInterval=d,g.value=`Interval must be at least ${d}ms.`):e.value.options.toggleInterval=n.value,!e.value.options.showCurrent&&!e.value.options.showPower&&(e.value.options.showCurrent=!0,e.value.options.showPower=!0,g.value="At least one of the options must be enabled."),e.value.options.showCurrent&&e.value.options.showPower?p.value=setInterval(()=>{m.value=!m.value},e.value.options.toggleInterval):m.value=e.value.options.showCurrent,x.value=setTimeout(()=>{g.value="",n.value<d&&(n.value=d)},5e3)};return O([()=>e.value.options,n],C,{deep:!0}),A(()=>{e.value.options=Object.assign({},I,e.value.options),C(),j.registerUsage("Instantaneous Watts")}),z(()=>{p.value===void 0&&clearInterval(p.value)}),(i,t)=>(w(),c(V,null,[E((w(),c("div",X,[a("span",{class:R(["relative w-[1.5rem] mdi battery-icon",[N.value]])},t[4]||(t[4]=[a("span",{class:"absolute text-sm text-yellow-400 -bottom-[2px] -right-[7px] mdi mdi-alert-circle"},null,-1)]),2),a("div",Y,[a("div",Z,[a("span",ee,b(W.value),1),t[5]||(t[5]=a("span",null," V",-1))]),a("div",te,[m.value?(w(),c(V,{key:0},[a("span",oe,b(_.value),1),t[6]||(t[6]=a("span",null," A",-1))],64)):(w(),c(V,{key:1},[a("span",ae,b(D.value),1),t[7]||(t[7]=a("span",null," W",-1))],64))])])])),[[G,"Battery information"]]),u(H,{modelValue:s(S).miniWidgetManagerVars(s(e).hash).configMenuOpen,"onUpdate:modelValue":t[3]||(t[3]=r=>s(S).miniWidgetManagerVars(s(e).hash).configMenuOpen=r),width:"auto"},{default:y(()=>[u(q,{class:"pa-4 text-white w-[20rem]",style:J([{"border-radius":"15px"},s(T).globalGlassMenuStyles])},{default:y(()=>[u(K,{class:"text-center"},{default:y(()=>t[8]||(t[8]=[L("Battery Indicator Config")])),_:1}),u(Q,{class:"flex flex-col gap-y-4"},{default:y(()=>[u(M,{modelValue:s(e).options.showCurrent,"onUpdate:modelValue":t[0]||(t[0]=r=>s(e).options.showCurrent=r),label:"Show Current","hide-details":""},null,8,["modelValue"]),u(M,{modelValue:s(e).options.showPower,"onUpdate:modelValue":t[1]||(t[1]=r=>s(e).options.showPower=r),label:"Show Power","hide-details":""},null,8,["modelValue"]),u($,{modelValue:n.value,"onUpdate:modelValue":t[2]||(t[2]=r=>n.value=r),modelModifiers:{number:!0},label:"Toggle Interval (ms)",type:"number",min:d,step:"100",density:"compact",variant:"outlined",disabled:!s(e).options.showCurrent||!s(e).options.showPower},null,8,["modelValue","disabled"]),a("p",se,b(g.value),1)]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])],64))}});export{ne as default};
//# sourceMappingURL=BatteryIndicator-D6LitL5O.js.map
