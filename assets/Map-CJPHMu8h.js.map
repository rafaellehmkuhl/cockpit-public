{"version":3,"file":"Map-CJPHMu8h.js","sources":["../../node_modules/date-fns/esm/_lib/assign/index.js","../../node_modules/date-fns/esm/_lib/cloneObject/index.js","../../node_modules/date-fns/esm/formatDistance/index.js","../../node_modules/date-fns/esm/formatDistanceToNow/index.js","../../src/assets/blueboat-marker.png","../../src/assets/brov2-marker.png","../../src/assets/generic-vehicle-marker.png","../../src/components/widgets/Map.vue"],"sourcesContent":["export default function assign(target, object) {\n  if (target == null) {\n    throw new TypeError('assign requires that input parameter not be null or undefined');\n  }\n  for (var property in object) {\n    if (Object.prototype.hasOwnProperty.call(object, property)) {\n      ;\n      target[property] = object[property];\n    }\n  }\n  return target;\n}","import assign from \"../assign/index.js\";\nexport default function cloneObject(object) {\n  return assign({}, object);\n}","import { getDefaultOptions } from \"../_lib/defaultOptions/index.js\";\nimport compareAsc from \"../compareAsc/index.js\";\nimport differenceInMonths from \"../differenceInMonths/index.js\";\nimport differenceInSeconds from \"../differenceInSeconds/index.js\";\nimport defaultLocale from \"../_lib/defaultLocale/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport cloneObject from \"../_lib/cloneObject/index.js\";\nimport assign from \"../_lib/assign/index.js\";\nimport getTimezoneOffsetInMilliseconds from \"../_lib/getTimezoneOffsetInMilliseconds/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nvar MINUTES_IN_DAY = 1440;\nvar MINUTES_IN_ALMOST_TWO_DAYS = 2520;\nvar MINUTES_IN_MONTH = 43200;\nvar MINUTES_IN_TWO_MONTHS = 86400;\n\n/**\n * @name formatDistance\n * @category Common Helpers\n * @summary Return the distance between the given dates in words.\n *\n * @description\n * Return the distance between the given dates in words.\n *\n * | Distance between dates                                            | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance between dates | Result               |\n * |------------------------|----------------------|\n * | 0 secs ... 5 secs      | less than 5 seconds  |\n * | 5 secs ... 10 secs     | less than 10 seconds |\n * | 10 secs ... 20 secs    | less than 20 seconds |\n * | 20 secs ... 40 secs    | half a minute        |\n * | 40 secs ... 60 secs    | less than a minute   |\n * | 60 secs ... 90 secs    | 1 minute             |\n *\n * @param {Date|Number} date - the date\n * @param {Date|Number} baseDate - the date to compare with\n * @param {Object} [options] - an object with options.\n * @param {Boolean} [options.includeSeconds=false] - distances less than a minute are more detailed\n * @param {Boolean} [options.addSuffix=false] - result indicates if the second date is earlier or later than the first\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @returns {String} the distance in words\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `date` must not be Invalid Date\n * @throws {RangeError} `baseDate` must not be Invalid Date\n * @throws {RangeError} `options.locale` must contain `formatDistance` property\n *\n * @example\n * // What is the distance between 2 July 2014 and 1 January 2015?\n * const result = formatDistance(new Date(2014, 6, 2), new Date(2015, 0, 1))\n * //=> '6 months'\n *\n * @example\n * // What is the distance between 1 January 2015 00:00:15\n * // and 1 January 2015 00:00:00, including seconds?\n * const result = formatDistance(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   new Date(2015, 0, 1, 0, 0, 0),\n *   { includeSeconds: true }\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, with a suffix?\n * const result = formatDistance(new Date(2015, 0, 1), new Date(2016, 0, 1), {\n *   addSuffix: true\n * })\n * //=> 'about 1 year ago'\n *\n * @example\n * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = formatDistance(new Date(2016, 7, 1), new Date(2015, 0, 1), {\n *   locale: eoLocale\n * })\n * //=> 'pli ol 1 jaro'\n */\n\nexport default function formatDistance(dirtyDate, dirtyBaseDate, options) {\n  var _ref, _options$locale;\n  requiredArgs(2, arguments);\n  var defaultOptions = getDefaultOptions();\n  var locale = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions.locale) !== null && _ref !== void 0 ? _ref : defaultLocale;\n  if (!locale.formatDistance) {\n    throw new RangeError('locale must contain formatDistance property');\n  }\n  var comparison = compareAsc(dirtyDate, dirtyBaseDate);\n  if (isNaN(comparison)) {\n    throw new RangeError('Invalid time value');\n  }\n  var localizeOptions = assign(cloneObject(options), {\n    addSuffix: Boolean(options === null || options === void 0 ? void 0 : options.addSuffix),\n    comparison: comparison\n  });\n  var dateLeft;\n  var dateRight;\n  if (comparison > 0) {\n    dateLeft = toDate(dirtyBaseDate);\n    dateRight = toDate(dirtyDate);\n  } else {\n    dateLeft = toDate(dirtyDate);\n    dateRight = toDate(dirtyBaseDate);\n  }\n  var seconds = differenceInSeconds(dateRight, dateLeft);\n  var offsetInSeconds = (getTimezoneOffsetInMilliseconds(dateRight) - getTimezoneOffsetInMilliseconds(dateLeft)) / 1000;\n  var minutes = Math.round((seconds - offsetInSeconds) / 60);\n  var months;\n\n  // 0 up to 2 mins\n  if (minutes < 2) {\n    if (options !== null && options !== void 0 && options.includeSeconds) {\n      if (seconds < 5) {\n        return locale.formatDistance('lessThanXSeconds', 5, localizeOptions);\n      } else if (seconds < 10) {\n        return locale.formatDistance('lessThanXSeconds', 10, localizeOptions);\n      } else if (seconds < 20) {\n        return locale.formatDistance('lessThanXSeconds', 20, localizeOptions);\n      } else if (seconds < 40) {\n        return locale.formatDistance('halfAMinute', 0, localizeOptions);\n      } else if (seconds < 60) {\n        return locale.formatDistance('lessThanXMinutes', 1, localizeOptions);\n      } else {\n        return locale.formatDistance('xMinutes', 1, localizeOptions);\n      }\n    } else {\n      if (minutes === 0) {\n        return locale.formatDistance('lessThanXMinutes', 1, localizeOptions);\n      } else {\n        return locale.formatDistance('xMinutes', minutes, localizeOptions);\n      }\n    }\n\n    // 2 mins up to 0.75 hrs\n  } else if (minutes < 45) {\n    return locale.formatDistance('xMinutes', minutes, localizeOptions);\n\n    // 0.75 hrs up to 1.5 hrs\n  } else if (minutes < 90) {\n    return locale.formatDistance('aboutXHours', 1, localizeOptions);\n\n    // 1.5 hrs up to 24 hrs\n  } else if (minutes < MINUTES_IN_DAY) {\n    var hours = Math.round(minutes / 60);\n    return locale.formatDistance('aboutXHours', hours, localizeOptions);\n\n    // 1 day up to 1.75 days\n  } else if (minutes < MINUTES_IN_ALMOST_TWO_DAYS) {\n    return locale.formatDistance('xDays', 1, localizeOptions);\n\n    // 1.75 days up to 30 days\n  } else if (minutes < MINUTES_IN_MONTH) {\n    var days = Math.round(minutes / MINUTES_IN_DAY);\n    return locale.formatDistance('xDays', days, localizeOptions);\n\n    // 1 month up to 2 months\n  } else if (minutes < MINUTES_IN_TWO_MONTHS) {\n    months = Math.round(minutes / MINUTES_IN_MONTH);\n    return locale.formatDistance('aboutXMonths', months, localizeOptions);\n  }\n  months = differenceInMonths(dateRight, dateLeft);\n\n  // 2 months up to 12 months\n  if (months < 12) {\n    var nearestMonth = Math.round(minutes / MINUTES_IN_MONTH);\n    return locale.formatDistance('xMonths', nearestMonth, localizeOptions);\n\n    // 1 year up to max Date\n  } else {\n    var monthsSinceStartOfYear = months % 12;\n    var years = Math.floor(months / 12);\n\n    // N years up to 1 years 3 months\n    if (monthsSinceStartOfYear < 3) {\n      return locale.formatDistance('aboutXYears', years, localizeOptions);\n\n      // N years 3 months up to N years 9 months\n    } else if (monthsSinceStartOfYear < 9) {\n      return locale.formatDistance('overXYears', years, localizeOptions);\n\n      // N years 9 months up to N year 12 months\n    } else {\n      return locale.formatDistance('almostXYears', years + 1, localizeOptions);\n    }\n  }\n}","import distanceInWords from \"../formatDistance/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name formatDistanceToNow\n * @category Common Helpers\n * @summary Return the distance between the given date and now in words.\n * @pure false\n *\n * @description\n * Return the distance between the given date and now in words.\n *\n * | Distance to now                                                   | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance to now     | Result               |\n * |---------------------|----------------------|\n * | 0 secs ... 5 secs   | less than 5 seconds  |\n * | 5 secs ... 10 secs  | less than 10 seconds |\n * | 10 secs ... 20 secs | less than 20 seconds |\n * | 20 secs ... 40 secs | half a minute        |\n * | 40 secs ... 60 secs | less than a minute   |\n * | 60 secs ... 90 secs | 1 minute             |\n *\n * > ⚠️ Please note that this function is not present in the FP submodule as\n * > it uses `Date.now()` internally hence impure and can't be safely curried.\n *\n * @param {Date|Number} date - the given date\n * @param {Object} [options] - the object with options\n * @param {Boolean} [options.includeSeconds=false] - distances less than a minute are more detailed\n * @param {Boolean} [options.addSuffix=false] - result specifies if now is earlier or later than the passed date\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @returns {String} the distance in words\n * @throws {TypeError} 1 argument required\n * @throws {RangeError} `date` must not be Invalid Date\n * @throws {RangeError} `options.locale` must contain `formatDistance` property\n *\n * @example\n * // If today is 1 January 2015, what is the distance to 2 July 2014?\n * const result = formatDistanceToNow(\n *   new Date(2014, 6, 2)\n * )\n * //=> '6 months'\n *\n * @example\n * // If now is 1 January 2015 00:00:00,\n * // what is the distance to 1 January 2015 00:00:15, including seconds?\n * const result = formatDistanceToNow(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   {includeSeconds: true}\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 January 2016, with a suffix?\n * const result = formatDistanceToNow(\n *   new Date(2016, 0, 1),\n *   {addSuffix: true}\n * )\n * //=> 'in about 1 year'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 August 2016 in Esperanto?\n * const eoLocale = require('date-fns/locale/eo')\n * const result = formatDistanceToNow(\n *   new Date(2016, 7, 1),\n *   {locale: eoLocale}\n * )\n * //=> 'pli ol 1 jaro'\n */\nexport default function formatDistanceToNow(dirtyDate, options) {\n  requiredArgs(1, arguments);\n  return distanceInWords(dirtyDate, Date.now(), options);\n}","export default \"__VITE_ASSET__BHFrLHo$__\"","export default \"__VITE_ASSET__CpDYhEAD__\"","export default \"__VITE_ASSET__BcUJwPKN__\"","<template>\n  <div ref=\"mapBase\" class=\"page-base\" :class=\"widgetStore.editingMode ? 'pointer-events-none' : 'pointer-events-auto'\">\n    <div :id=\"mapId\" ref=\"map\" class=\"map\">\n      <v-btn\n        v-if=\"showButtons\"\n        v-tooltip=\"home ? 'Center map on home position.' : 'Home position is currently undefined.'\"\n        class=\"absolute left-0 m-3 bottom-button bg-slate-50\"\n        :class=\"!home ? 'active-events-on-disabled' : ''\"\n        :color=\"followerTarget == WhoToFollow.HOME ? 'red' : ''\"\n        elevation=\"2\"\n        style=\"z-index: 1002; border-radius: 0px\"\n        icon=\"mdi-home-map-marker\"\n        size=\"x-small\"\n        :disabled=\"!home\"\n        @click.stop=\"targetFollower.goToTarget(WhoToFollow.HOME, true)\"\n        @dblclick.stop=\"targetFollower.follow(WhoToFollow.HOME)\"\n      />\n\n      <v-btn\n        v-if=\"showButtons\"\n        v-tooltip=\"vehiclePosition ? 'Center map on vehicle position.' : 'Vehicle position is currently undefined.'\"\n        class=\"absolute m-3 bottom-button left-10 bg-slate-50\"\n        :class=\"!vehiclePosition ? 'active-events-on-disabled' : ''\"\n        :color=\"followerTarget == WhoToFollow.VEHICLE ? 'red' : ''\"\n        elevation=\"2\"\n        style=\"z-index: 1002; border-radius: 0px\"\n        icon=\"mdi-airplane-marker\"\n        size=\"x-small\"\n        :disabled=\"!vehiclePosition\"\n        @click.stop=\"targetFollower.goToTarget(WhoToFollow.VEHICLE, true)\"\n        @dblclick.stop=\"targetFollower.follow(WhoToFollow.VEHICLE)\"\n      />\n\n      <v-btn\n        v-if=\"showButtons\"\n        class=\"absolute m-3 bottom-button left-20 bg-slate-50\"\n        elevation=\"2\"\n        style=\"z-index: 1002; border-radius: 0px\"\n        icon=\"mdi-download\"\n        size=\"x-small\"\n        @click.stop=\"downloadMissionFromVehicle\"\n      />\n\n      <v-btn\n        v-if=\"showButtons\"\n        class=\"absolute mb-3 ml-1 bottom-button left-32 bg-slate-50\"\n        elevation=\"2\"\n        style=\"z-index: 1002; border-radius: 0px\"\n        icon=\"mdi-play\"\n        size=\"x-small\"\n        @click.stop=\"executeMissionOnVehicle\"\n      />\n    </div>\n  </div>\n\n  <div v-if=\"showContextMenu\" class=\"context-menu\" :style=\"{ top: menuPosition.top, left: menuPosition.left }\">\n    <ul @click.stop=\"\">\n      <li @click=\"onMenuOptionSelect('goto')\">GoTo</li>\n    </ul>\n  </div>\n\n  <v-dialog v-model=\"widgetStore.widgetManagerVars(widget.hash).configMenuOpen\" width=\"auto\">\n    <v-card class=\"pa-2\" :style=\"interfaceStore.globalGlassMenuStyles\">\n      <v-card-title class=\"text-center\">Map widget settings</v-card-title>\n      <v-card-text>\n        <v-switch\n          v-model=\"widget.options.showVehiclePath\"\n          class=\"my-1\"\n          label=\"Show vehicle path\"\n          :color=\"widget.options.showVehiclePath ? 'white' : undefined\"\n          hide-details\n        />\n      </v-card-text>\n    </v-card>\n  </v-dialog>\n\n  <v-progress-linear\n    v-if=\"fetchingMission\"\n    :model-value=\"missionFetchProgress\"\n    height=\"10\"\n    absolute\n    bottom\n    color=\"white\"\n    :style=\"`top: ${topProgressBarDisplacement}`\"\n  />\n  <p\n    v-if=\"fetchingMission\"\n    :style=\"{ top: topProgressBarDisplacement }\"\n    class=\"absolute left-[7px] mt-4 flex text-md font-bold text-white z-30 drop-shadow-md\"\n  >\n    Loading mission...\n  </p>\n</template>\n\n<script setup lang=\"ts\">\nimport { useElementHover, useRefHistory } from '@vueuse/core'\nimport { formatDistanceToNow } from 'date-fns'\nimport L, { type LatLngTuple, Map } from 'leaflet'\nimport { type Ref, computed, onBeforeMount, onBeforeUnmount, onMounted, reactive, ref, toRefs, watch } from 'vue'\n\nimport blueboatMarkerImage from '@/assets/blueboat-marker.png'\nimport brov2MarkerImage from '@/assets/brov2-marker.png'\nimport genericVehicleMarkerImage from '@/assets/generic-vehicle-marker.png'\nimport { useInteractionDialog } from '@/composables/interactionDialog'\nimport { openSnackbar } from '@/composables/snackbar'\nimport { MavType } from '@/libs/connection/m2r/messages/mavlink2rest-enum'\nimport { datalogger, DatalogVariable } from '@/libs/sensors-logging'\nimport { canByPassCategory, EventCategory, slideToConfirm } from '@/libs/slide-to-confirm'\nimport { degrees } from '@/libs/utils'\nimport { TargetFollower, WhoToFollow } from '@/libs/utils-map'\nimport { useAppInterfaceStore } from '@/stores/appInterface'\nimport { useMainVehicleStore } from '@/stores/mainVehicle'\nimport { useMissionStore } from '@/stores/mission'\nimport { useWidgetManagerStore } from '@/stores/widgetManager'\nimport type { WaypointCoordinates } from '@/types/mission'\nimport type { Widget } from '@/types/widgets'\n\n// Define widget props\n// eslint-disable-next-line jsdoc/require-jsdoc\nconst props = defineProps<{ widget: Widget }>()\nconst widget = toRefs(props).widget\nconst interfaceStore = useAppInterfaceStore()\nconst { showDialog } = useInteractionDialog()\n\n// Instantiate the necessary stores\nconst vehicleStore = useMainVehicleStore()\nconst missionStore = useMissionStore()\n\n// Declare the general variables\nconst map: Ref<Map | undefined> = ref()\nconst zoom = ref(15)\nconst mapCenter = ref<WaypointCoordinates>([-27.5935, -48.55854])\nconst home = ref()\nconst mapId = computed(() => `map-${widget.value.hash}`)\nconst showButtons = ref(false)\n\n// Register the usage of the coordinate variables for logging\ndatalogger.registerUsage(DatalogVariable.latitude)\ndatalogger.registerUsage(DatalogVariable.longitude)\n\n// Before mounting:\n// - set initial widget options if they don't exist\n// - enable auto update for target follower\nonBeforeMount(() => {\n  if (Object.keys(widget.value.options).length === 0) {\n    widget.value.options = {\n      showVehiclePath: true,\n    }\n  }\n  targetFollower.enableAutoUpdate()\n})\n\n// Configure the available map tile providers\nconst osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n  maxZoom: 19,\n  attribution: '© OpenStreetMap',\n})\n\nconst esri = L.tileLayer(\n  'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\n  { maxZoom: 19, attribution: '© Esri World Imagery' }\n)\n\nconst baseMaps = {\n  'OpenStreetMap': osm,\n  'Esri World Imagery': esri,\n}\n\n// Show buttons when the mouse is over the widget\nconst mapBase = ref<HTMLElement>()\nconst isMouseOver = useElementHover(mapBase)\n\nconst zoomControl = L.control.zoom({ position: 'bottomright' })\nconst layerControl = L.control.layers(baseMaps)\n\nwatch(showButtons, () => {\n  if (map.value === undefined) return\n  if (showButtons.value) {\n    map.value.addControl(zoomControl)\n    map.value.addControl(layerControl)\n  } else {\n    map.value.removeControl(zoomControl)\n    map.value.removeControl(layerControl)\n  }\n})\n\nwatch(isMouseOver, () => {\n  showButtons.value = isMouseOver.value\n})\n\nonMounted(async () => {\n  // Bind leaflet instance to map element\n  map.value = L.map(mapId.value, { layers: [osm, esri], attributionControl: false }).setView(\n    mapCenter.value as LatLngTuple,\n    zoom.value\n  ) as Map\n\n  // Remove default zoom control\n  map.value.removeControl(map.value.zoomControl)\n\n  // Update center value after panning\n  map.value.on('moveend', () => {\n    if (map.value === undefined) return\n    let { lat, lng } = map.value.getCenter()\n    if (lat && lng) {\n      mapCenter.value = [lat, lng]\n    }\n  })\n\n  // Update zoom value after zooming\n  map.value.on('zoomend', () => {\n    if (map.value === undefined) return\n    zoom.value = map.value?.getZoom() ?? mapCenter.value\n  })\n\n  // Add click event listener to the map\n  map.value.on('click', () => {\n    if (map.value === undefined) return\n    map.value.on('click', onMapClick)\n  })\n\n  // Add context menu event listener to the map\n  map.value.on('contextmenu', () => {\n    hideContextMenuAndMarker()\n  })\n\n  // Enable auto update for target follower\n  targetFollower.enableAutoUpdate()\n\n  window.addEventListener('keydown', onKeydown)\n\n  // Pan map to vehicle on mounting if it's position is available, otherwise pan to home\n  if (vehiclePosition.value) {\n    targetFollower.goToTarget(WhoToFollow.VEHICLE)\n  } else {\n    targetFollower.goToTarget(WhoToFollow.HOME)\n  }\n})\n\n// Before unmounting:\n// - disable auto update for target follower\n// - remove event listeners\nonBeforeUnmount(() => {\n  targetFollower.disableAutoUpdate()\n  window.removeEventListener('keydown', onKeydown)\n\n  if (map.value) {\n    map.value.off('click', onMapClick)\n    map.value.off('contextmenu')\n  }\n})\n\n// Pan when variables change\nwatch(mapCenter, (newCenter, oldCenter) => {\n  if (newCenter.toString() === oldCenter.toString()) return\n  map.value?.panTo(newCenter as LatLngTuple)\n\n  // Update the tooltip content of the home marker\n  homeMarker.value?.getTooltip()?.setContent(`Home: ${newCenter[0].toFixed(6)}, ${newCenter[1].toFixed(6)}`)\n})\n\n// Keep map binded\nwatch(map, (newMap, oldMap) => {\n  if (map.value === undefined) return\n  if (newMap?.options !== undefined) return\n\n  map.value = oldMap\n})\n\n// Zoom when the variable changes\nwatch(zoom, (newZoom, oldZoom) => {\n  if (newZoom === oldZoom) return\n  map.value?.setZoom(zoom.value)\n})\n\n// Re-render the map when the widget changes\nwatch(props.widget, () => {\n  map.value?.invalidateSize()\n})\n\n// Allow following a given target\nconst followerTarget = ref<WhoToFollow | undefined>(undefined)\nconst targetFollower = new TargetFollower(\n  (newTarget: WhoToFollow | undefined) => (followerTarget.value = newTarget),\n  (newCenter: WaypointCoordinates) => (mapCenter.value = newCenter)\n)\ntargetFollower.setTrackableTarget(WhoToFollow.VEHICLE, () => vehiclePosition.value)\ntargetFollower.setTrackableTarget(WhoToFollow.HOME, () => home.value)\n\n// Calculate live vehicle position\nconst vehiclePosition = computed(() =>\n  vehicleStore.coordinates.latitude\n    ? ([vehicleStore.coordinates.latitude, vehicleStore.coordinates.longitude] as WaypointCoordinates)\n    : undefined\n)\n\n// Calculate live vehicle heading\nconst vehicleHeading = computed(() => (vehicleStore.attitude.yaw ? degrees(vehicleStore.attitude?.yaw) : 0))\n\n// Calculate time since last vehicle heartbeat\nconst timeAgoSeenText = computed(() => {\n  const lastBeat = vehicleStore.lastHeartbeat\n  return lastBeat ? `${formatDistanceToNow(lastBeat ?? 0, { includeSeconds: true })} ago` : 'never'\n})\n\n// Save vehicle position history\nconst { history: vehiclePositionHistory } = useRefHistory(vehiclePosition)\n\n// Update home position when location is available\n// Try to update home position based on browser geolocation\nnavigator?.geolocation?.watchPosition(\n  (position) => (home.value = [position.coords.latitude, position.coords.longitude]),\n  (error) => console.error(`Failed to get position: (${error.code}) ${error.message}`),\n  { enableHighAccuracy: false, timeout: 5000, maximumAge: 0 }\n)\n\n// If home position is updated and map was not yet centered on it, center\nlet mapNotYetCenteredInHome = true\nwatch([home, map], async () => {\n  if (home.value === mapCenter.value || !map.value || !mapNotYetCenteredInHome) return\n  targetFollower.goToTarget(WhoToFollow.HOME)\n  mapNotYetCenteredInHome = false\n})\n\n// Create marker for the vehicle\nconst vehicleMarker = ref<L.Marker>()\nwatch(vehicleStore.coordinates, () => {\n  if (!map.value || !vehiclePosition.value) return\n\n  if (vehicleMarker.value === undefined) {\n    let vehicleIconUrl = genericVehicleMarkerImage\n\n    if (vehicleStore.vehicleType === MavType.MAV_TYPE_SURFACE_BOAT) {\n      vehicleIconUrl = blueboatMarkerImage\n    } else if (vehicleStore.vehicleType === MavType.MAV_TYPE_SUBMARINE) {\n      vehicleIconUrl = brov2MarkerImage\n    }\n\n    const vehicleMarkerIcon = L.divIcon({\n      className: 'vehicle-marker',\n      html: `<img src=\"${vehicleIconUrl}\" style=\"width: 64px; height: 64px;\">`,\n      iconSize: [64, 64],\n      iconAnchor: [32, 32],\n    })\n\n    vehicleMarker.value = L.marker(vehiclePosition.value, { icon: vehicleMarkerIcon })\n\n    const vehicleMarkerTooltip = L.tooltip({\n      content: 'No data available',\n      className: 'waypoint-tooltip',\n      offset: [40, 0],\n    })\n    vehicleMarker.value.bindTooltip(vehicleMarkerTooltip)\n    map.value.addLayer(vehicleMarker.value)\n  }\n  vehicleMarker.value.setLatLng(vehiclePosition.value)\n})\n\n// If vehicle position was not available and now it is, start following it\nwatch(vehiclePosition, (_, oldPosition) => {\n  if (followerTarget.value === WhoToFollow.VEHICLE || oldPosition !== undefined) return\n  targetFollower.follow(WhoToFollow.VEHICLE)\n})\n\n// Dinamically update data of the vehicle tooltip\nwatch([vehiclePosition, vehicleHeading, timeAgoSeenText, () => vehicleStore.isArmed], () => {\n  if (vehicleMarker.value === undefined) return\n\n  vehicleMarker.value.getTooltip()?.setContent(`\n    <p>Coordinates: ${vehiclePosition.value?.[0].toFixed(6)}, ${vehiclePosition.value?.[1].toFixed(6)}</p>\n    <p>Velocity: ${vehicleStore.velocity.ground?.toFixed(2) ?? 'N/A'} m/s</p>\n    <p>Heading: ${vehicleHeading.value.toFixed(2)}°</p>\n    <p>${vehicleStore.isArmed ? 'Armed' : 'Disarmed'}</p>\n    <p>Last seen: ${timeAgoSeenText.value}</p>\n  `)\n\n  // Update the rotation\n  const iconElement = vehicleMarker.value.getElement()?.querySelector('img')\n  if (iconElement) {\n    iconElement.style.transform = `rotate(${vehicleHeading.value}deg)`\n  }\n})\n\n// Create marker for the home position\nconst homeMarker = ref<L.Marker>()\nwatch(home, () => {\n  if (map.value === undefined) return\n\n  const position = home.value\n  if (position === undefined) return\n\n  if (homeMarker.value === undefined) {\n    homeMarker.value = L.marker(position as LatLngTuple)\n    const homeMarkerIcon = L.divIcon({ className: 'marker-icon', iconSize: [32, 32], iconAnchor: [16, 16], html: 'H' })\n    homeMarker.value.setIcon(homeMarkerIcon)\n    const homeMarkerTooltip = L.tooltip({ content: 'No data available', className: 'waypoint-tooltip' })\n    homeMarker.value.bindTooltip(homeMarkerTooltip)\n    map.value.addLayer(homeMarker.value)\n  }\n  homeMarker.value.setLatLng(home.value)\n})\n\n// Create polyline for the vehicle path\nconst missionWaypointsPolyline = ref()\nwatch(missionStore.currentPlanningWaypoints, (newWaypoints) => {\n  if (map.value === undefined) return\n  if (missionWaypointsPolyline.value === undefined) {\n    const coordinates = newWaypoints.map((w) => w.coordinates)\n    missionWaypointsPolyline.value = L.polyline(coordinates, { color: '#358AC3' }).addTo(map.value)\n  }\n  missionWaypointsPolyline.value.setLatLngs(newWaypoints.map((w) => w.coordinates))\n\n  // Add a marker for each point\n  newWaypoints.forEach((waypoint, idx) => {\n    const marker = L.marker(waypoint.coordinates)\n    const markerIcon = L.divIcon({ className: 'marker-icon', iconSize: [32, 32], iconAnchor: [16, 16], html: `${idx}` })\n    marker.setIcon(markerIcon)\n    map.value?.addLayer(marker)\n  })\n})\n\n// Create polyline for the vehicle path\nconst vehicleHistoryPolyline = ref<L.Polyline>()\nwatch(vehiclePositionHistory, (newPoints) => {\n  if (map.value === undefined || newPoints === undefined) return\n\n  if (vehicleHistoryPolyline.value === undefined) {\n    vehicleHistoryPolyline.value = L.polyline([], { color: '#ffff00' }).addTo(map.value)\n  }\n\n  const latLongHistory = newPoints.filter((posHis) => posHis.snapshot !== undefined).map((posHis) => posHis.snapshot)\n  vehicleHistoryPolyline.value.setLatLngs(latLongHistory as L.LatLngExpression[])\n})\n\n// Handle context menu toggling and selection\nconst showContextMenu = ref(false)\nconst clickedLocation = ref<[number, number] | null>(null)\nconst menuPosition = reactive({ top: '0px', left: '0px' })\nconst contextMenuMarker = ref<L.Marker>()\n\n// Handle map click event to show the context menu\nconst onMapClick = (event: L.LeafletMouseEvent): void => {\n  if (contextMenuMarker.value !== undefined && map.value !== undefined) {\n    contextMenuMarker.value?.removeFrom(map.value)\n  }\n\n  // Check if event.latlng is defined and has the required properties\n  if (event?.latlng?.lat != null && event?.latlng?.lng != null) {\n    clickedLocation.value = [event.latlng.lat, event.latlng.lng]\n    showContextMenu.value = true\n\n    // Calculate and update menu position\n    const mapElement = map.value?.getContainer()\n    if (mapElement) {\n      const { x, y } = mapElement.getBoundingClientRect()\n      menuPosition.left = `${event.originalEvent.clientX - x}px`\n      menuPosition.top = `${event.originalEvent.clientY - y}px`\n    }\n  } else {\n    console.error('Invalid event structure:', event)\n  }\n\n  // Create marker for the clicked location\n  if (map.value !== undefined) {\n    contextMenuMarker.value = L.marker(clickedLocation.value as LatLngTuple)\n    const markerIcon = L.divIcon({ className: 'marker-icon', iconSize: [32, 32], iconAnchor: [16, 16] })\n    contextMenuMarker.value.setIcon(markerIcon)\n    map.value.addLayer(contextMenuMarker.value)\n  }\n}\n\nconst onMenuOptionSelect = (option: string): void => {\n  switch (option) {\n    case 'goto':\n      if (clickedLocation.value) {\n        // Define default values\n        const hold = 0\n        const acceptanceRadius = 0\n        const passRadius = 0\n        const yaw = 0\n        const altitude = vehicleStore.coordinates.altitude ?? 0\n\n        const latitude = clickedLocation.value[0]\n        const longitude = clickedLocation.value[1]\n\n        slideToConfirm(\n          async () => {\n            try {\n              await vehicleStore.goTo(hold, acceptanceRadius, passRadius, yaw, latitude, longitude, altitude)\n            } catch (error) {\n              openSnackbar({\n                message: error as string,\n                variant: 'error',\n              })\n            }\n          },\n          {\n            command: 'GoTo',\n          },\n          canByPassCategory(EventCategory.GOTO)\n        )\n      }\n      break\n\n    // Add more cases for other options if needed in the future\n\n    default:\n      console.warn('Unknown menu option selected:', option)\n  }\n\n  // hide the context menu after an option is selected\n  showContextMenu.value = false\n}\n\nconst hideContextMenuAndMarker = (): void => {\n  showContextMenu.value = false\n  clickedLocation.value = null\n  if (map.value !== undefined && contextMenuMarker.value !== undefined) {\n    map.value.removeLayer(contextMenuMarker.value)\n  }\n}\n\nconst onKeydown = (event: KeyboardEvent): void => {\n  if (event.key === 'Escape') {\n    hideContextMenuAndMarker()\n  }\n}\n\n// Allow fetching missions\nconst fetchingMission = ref(false)\nconst missionFetchProgress = ref(0)\nconst downloadMissionFromVehicle = async (): Promise<void> => {\n  fetchingMission.value = true\n  missionFetchProgress.value = 0\n  while (missionStore.currentPlanningWaypoints.length > 0) {\n    missionStore.currentPlanningWaypoints.pop()\n  }\n  const loadingCallback = async (loadingPerc: number): Promise<void> => {\n    missionFetchProgress.value = loadingPerc\n  }\n  try {\n    const missionItemsInVehicle = await vehicleStore.fetchMission(loadingCallback)\n    missionItemsInVehicle.forEach((w) => {\n      missionStore.currentPlanningWaypoints.push(w)\n    })\n    openSnackbar({ variant: 'success', message: 'Mission download succeed!', duration: 3000 })\n  } catch (error) {\n    showDialog({ variant: 'error', title: 'Mission download failed', message: error as string, timer: 5000 })\n  } finally {\n    fetchingMission.value = false\n  }\n}\n\n// Allow executing missions\nconst executeMissionOnVehicle = async (): Promise<void> => {\n  try {\n    await vehicleStore.startMission()\n  } catch (error) {\n    openSnackbar({ message: 'Failed to start mission.', variant: 'error' })\n  }\n}\n\n// Set dynamic styles for correct displacement of the bottom buttons when the widget is below the bottom bar\nconst widgetStore = useWidgetManagerStore()\nconst bottomButtonsDisplacement = computed(() => {\n  return `${Math.max(-widgetStore.widgetClearanceForVisibleArea(widget.value).bottom, 0)}px`\n})\n\nconst topProgressBarDisplacement = computed(() => {\n  return `${Math.max(-widgetStore.widgetClearanceForVisibleArea(widget.value).top, 0)}px`\n})\n</script>\n\n<style>\n.page-base {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.map {\n  position: absolute;\n  z-index: 0;\n  height: 100%;\n  width: 100%;\n}\n\n.marker-icon {\n  color: white;\n  background-color: #358ac3;\n  padding: 0.75rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 800;\n}\n\n.waypoint-tooltip {\n  background-color: white;\n  padding: 0.75rem;\n  border: 1rem;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  color: black;\n}\n\n.leaflet-control-zoom {\n  bottom: v-bind('bottomButtonsDisplacement');\n}\n\n.context-menu {\n  position: absolute;\n  z-index: 1003;\n  background-color: rgba(255, 255, 255, 0.9);\n  /* White with slight transparency */\n  border: 1px solid #ccc;\n  /* Optional: adds a subtle border */\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  /* Optional: adds a slight shadow for depth */\n  border-radius: 4px;\n  /* Optional: rounds the corners */\n  top: 50px;\n  left: 50px;\n}\n\n.context-menu ul {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n}\n\n.context-menu ul li {\n  padding: 5px 10px;\n  cursor: pointer;\n}\n\n.context-menu ul li:hover {\n  background-color: #ddd;\n}\n\n.active-events-on-disabled {\n  pointer-events: all;\n}\n\n.bottom-button {\n  bottom: v-bind('bottomButtonsDisplacement');\n}\n</style>\n"],"names":["assign","target","object","property","cloneObject","MINUTES_IN_DAY","MINUTES_IN_ALMOST_TWO_DAYS","MINUTES_IN_MONTH","MINUTES_IN_TWO_MONTHS","formatDistance","dirtyDate","dirtyBaseDate","options","_ref","_options$locale","requiredArgs","defaultOptions","getDefaultOptions","locale","defaultLocale","comparison","compareAsc","localizeOptions","dateLeft","dateRight","toDate","seconds","differenceInSeconds","offsetInSeconds","getTimezoneOffsetInMilliseconds","minutes","months","hours","days","differenceInMonths","nearestMonth","monthsSinceStartOfYear","years","formatDistanceToNow","distanceInWords","blueboatMarkerImage","brov2MarkerImage","genericVehicleMarkerImage","props","__props","widget","toRefs","interfaceStore","useAppInterfaceStore","showDialog","useInteractionDialog","vehicleStore","useMainVehicleStore","missionStore","useMissionStore","map","ref","zoom","mapCenter","home","mapId","computed","showButtons","datalogger","DatalogVariable","onBeforeMount","targetFollower","osm","L","esri","baseMaps","mapBase","isMouseOver","useElementHover","zoomControl","layerControl","watch","onMounted","lat","lng","_a","onMapClick","hideContextMenuAndMarker","onKeydown","vehiclePosition","WhoToFollow","onBeforeUnmount","newCenter","oldCenter","_c","_b","homeMarker","newMap","oldMap","newZoom","oldZoom","followerTarget","TargetFollower","newTarget","vehicleHeading","degrees","timeAgoSeenText","lastBeat","vehiclePositionHistory","useRefHistory","position","error","mapNotYetCenteredInHome","vehicleMarker","vehicleIconUrl","MavType","vehicleMarkerIcon","vehicleMarkerTooltip","_","oldPosition","_d","iconElement","_e","homeMarkerIcon","homeMarkerTooltip","missionWaypointsPolyline","newWaypoints","coordinates","w","waypoint","idx","marker","markerIcon","vehicleHistoryPolyline","newPoints","latLongHistory","posHis","showContextMenu","clickedLocation","menuPosition","reactive","contextMenuMarker","event","mapElement","x","y","onMenuOptionSelect","option","altitude","latitude","longitude","slideToConfirm","openSnackbar","canByPassCategory","EventCategory","fetchingMission","missionFetchProgress","downloadMissionFromVehicle","loadingCallback","loadingPerc","executeMissionOnVehicle","widgetStore","useWidgetManagerStore","bottomButtonsDisplacement","topProgressBarDisplacement"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}