import{c as I,J as R,y as W,K as B,r as u,L as F,af as T,a1 as A,D as N,l as k,m as M,n as t,H as i,x as h,v as a,s as _,t as g,N as c,V as z,O as U,P as j,Q as E,R as G,ag as H,W as J,F as K,a9 as m,ah as f}from"./index-B-pttZeH.js";const P={class:"flex items-center gap-2"},Q={key:0,class:"flex flex-col"},$={class:"flex items-center gap-1"},q={class:"flex items-center gap-1"},X={key:1,class:"flex flex-col"},Y={class:"flex items-center gap-1"},Z={class:"flex items-center gap-1"},ae=I({__name:"MAVLinkStats",props:{miniWidget:{}},setup(w){const s=R(w).miniWidget,L={displayMode:"rates"},S=[{title:"Rates Only",value:"rates"},{title:"Totals Only",value:"totals"},{title:"Both",value:"both"}],b=W(),C=B(),v=u(0),x=u(0),y=u(0),V=u(0),l=[],d=n=>n>=1e3?`${(n/1e3).toFixed(1)}k`:n.toFixed(0),O=()=>{const n=m("mavlink-total-incoming",o=>{v.value=typeof o=="number"?o:0});l.push(n);const e=m("mavlink-total-outgoing",o=>{x.value=typeof o=="number"?o:0});l.push(e);const p=m("mavlink-incoming-rate",o=>{y.value=typeof o=="number"?o:0});l.push(p);const r=m("mavlink-outgoing-rate",o=>{V.value=typeof o=="number"?o:0});l.push(r)},D=()=>{v.value=f("mavlink-total-incoming")||0,x.value=f("mavlink-total-outgoing")||0,y.value=f("mavlink-incoming-rate")||0,V.value=f("mavlink-outgoing-rate")||0};return F(()=>{s.value.options=Object.assign({},L,s.value.options),D(),O()}),T(()=>{l.forEach((n,e)=>{A(["mavlink-total-incoming","mavlink-total-outgoing","mavlink-incoming-rate","mavlink-outgoing-rate"][e],n)})}),(n,e)=>{const p=N("FontAwesomeIcon");return M(),k(K,null,[t("div",{class:h(["flex items-center justify-center h-12 text-white",a(s).options.displayMode==="both"?"w-[200px]":"w-[120px]"])},[t("div",P,[i(p,{icon:"fa-solid fa-arrow-right-arrow-left",size:"lg",class:"text-blue-400"}),t("div",{class:h(["flex text-xs font-mono leading-tight",a(s).options.displayMode==="both"?"gap-4":"flex-col"])},[a(s).options.displayMode==="rates"||a(s).options.displayMode==="both"?(M(),k("div",Q,[t("div",$,[e[2]||(e[2]=t("span",{class:"text-green-400"},"↓",-1)),t("span",null,g(d(y.value))+"/s",1)]),t("div",q,[e[3]||(e[3]=t("span",{class:"text-orange-400"},"↑",-1)),t("span",null,g(d(V.value))+"/s",1)])])):_("",!0),a(s).options.displayMode==="totals"||a(s).options.displayMode==="both"?(M(),k("div",X,[t("div",Y,[e[4]||(e[4]=t("span",{class:"text-green-400"},"↓",-1)),t("span",null,g(d(v.value)),1)]),t("div",Z,[e[5]||(e[5]=t("span",{class:"text-orange-400"},"↑",-1)),t("span",null,g(d(x.value)),1)])])):_("",!0)],2)])],2),i(J,{modelValue:a(b).miniWidgetManagerVars(a(s).hash).configMenuOpen,"onUpdate:modelValue":e[1]||(e[1]=r=>a(b).miniWidgetManagerVars(a(s).hash).configMenuOpen=r),width:"auto"},{default:c(()=>[i(z,{class:"pa-4 text-white w-[25rem]",style:U([{"border-radius":"15px"},a(C).globalGlassMenuStyles])},{default:c(()=>[i(j,{class:"text-center"},{default:c(()=>e[6]||(e[6]=[E("MAVLink Stats Config")])),_:1,__:[6]}),i(G,{class:"flex flex-col gap-y-4"},{default:c(()=>[i(H,{modelValue:a(s).options.displayMode,"onUpdate:modelValue":e[0]||(e[0]=r=>a(s).options.displayMode=r),items:S,label:"Display Mode",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])],64)}}});export{ae as default};
