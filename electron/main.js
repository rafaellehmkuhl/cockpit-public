"use strict";var Ed=Object.defineProperty;var vd=(e,t,r)=>t in e?Ed(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var J=(e,t,r)=>(vd(e,typeof t!="symbol"?t+"":t,r),r);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const se=require("electron"),Z=require("path"),Pr=require("child_process"),Ze=require("os"),Ne=require("fs"),Fn=require("util"),xn=require("events"),Kl=require("http"),wd=require("https"),Dr=require("crypto"),Ql=require("tty"),Nr=require("stream"),Yt=require("url"),_d=require("string_decoder"),Sd=require("constants"),Zl=require("assert"),ec=require("zlib");var je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gn={exports:{}},hi={exports:{}},$s;function rc(){return $s||($s=1,function(e){let t={};try{t=require("electron")}catch{}t.ipcRenderer&&r(t),e.exports=r;function r({contextBridge:n,ipcRenderer:i}){if(!i)return;i.on("__ELECTRON_LOG_IPC__",(s,a)=>{window.postMessage({cmd:"message",...a})}),i.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(s=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${s.message}`)));const o={sendToMain(s){try{i.send("__ELECTRON_LOG__",s)}catch(a){console.error("electronLog.sendToMain ",a,"data:",s),i.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:"sendToMain"})}},log(...s){o.sendToMain({data:s,level:"info"})}};for(const s of["error","warn","info","verbose","debug","silly"])o[s]=(...a)=>o.sendToMain({data:a,level:s});if(n&&process.contextIsolated)try{n.exposeInMainWorld("__electronLog",o)}catch{}typeof window=="object"?window.__electronLog=o:__electronLog=o}}(hi)),hi.exports}var pi={exports:{}},mi,Rs;function Ad(){if(Rs)return mi;Rs=1,mi=e;function e(t){return Object.defineProperties(r,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof r.labelPadding){case"boolean":return r.labelPadding?r.maxLabelLength:0;case"number":return r.labelPadding;default:return 0}}}});function r(n){r.maxLabelLength=Math.max(r.maxLabelLength,n.length);const i={};for(const o of t.levels)i[o]=(...s)=>t.logData(s,{level:o,scope:n});return i.log=i.info,i}}return mi}var gi,Is;function bd(){if(Is)return gi;Is=1;class e{constructor({processMessage:r}){this.processMessage=r,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(r){this.buffer.push(r)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(r=>this.processMessage(r)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return gi=e,gi}var yi,Ps;function nc(){if(Ps)return yi;Ps=1;const e=Ad(),t=bd(),n=class n{constructor({allowUnknownLevel:o=!1,dependencies:s={},errorHandler:a,eventLogger:l,initializeFn:c,isDev:f=!1,levels:u=["error","warn","info","verbose","debug","silly"],logId:h,transportFactories:p={},variables:E}={}){J(this,"dependencies",{});J(this,"errorHandler",null);J(this,"eventLogger",null);J(this,"functions",{});J(this,"hooks",[]);J(this,"isDev",!1);J(this,"levels",null);J(this,"logId",null);J(this,"scope",null);J(this,"transports",{});J(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=o,this.buffering=new t(this),this.dependencies=s,this.initializeFn=c,this.isDev=f,this.levels=u,this.logId=h,this.scope=e(this),this.transportFactories=p,this.variables=E||{};for(const _ of this.levels)this.addLevel(_,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=a,a==null||a.setOptions({...s,logFn:this.error}),this.eventLogger=l,l==null||l.setOptions({...s,logger:this});for(const[_,v]of Object.entries(p))this.transports[_]=v(this,s);n.instances[h]=this}static getInstance({logId:o}){return this.instances[o]||this.instances.default}addLevel(o,s=this.levels.length){s!==!1&&this.levels.splice(s,0,o),this[o]=(...a)=>this.logData(a,{level:o}),this.functions[o]=this[o]}catchErrors(o){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(o)}create(o){return typeof o=="string"&&(o={logId:o}),new n({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...o})}compareLevels(o,s,a=this.levels){const l=a.indexOf(o),c=a.indexOf(s);return c===-1||l===-1?!0:c<=l}initialize(o={}){this.initializeFn({logger:this,...this.dependencies,...o})}logData(o,s={}){this.buffering.enabled?this.buffering.addMessage({data:o,...s}):this.processMessage({data:o,...s})}processMessage(o,{transports:s=this.transports}={}){if(o.cmd==="errorHandler"){this.errorHandler.handle(o.error,{errorName:o.errorName,processType:"renderer",showDialog:!!o.showDialog});return}let a=o.level;this.allowUnknownLevel||(a=this.levels.includes(o.level)?o.level:"info");const l={date:new Date,logId:this.logId,...o,level:a,variables:{...this.variables,...o.variables}};for(const[c,f]of this.transportEntries(s))if(!(typeof f!="function"||f.level===!1)&&this.compareLevels(f.level,o.level))try{const u=this.hooks.reduce((h,p)=>h&&p(h,f,c),l);u&&f({...u,data:[...u.data]})}catch(u){this.processInternalErrorFn(u)}}processInternalErrorFn(o){}transportEntries(o=this.transports){return(Array.isArray(o)?o:Object.entries(o)).map(a=>{switch(typeof a){case"string":return this.transports[a]?[a,this.transports[a]]:null;case"function":return[a.name,a];default:return Array.isArray(a)?a:null}}).filter(Boolean)}};J(n,"instances",{});let r=n;return yi=r,yi}var Ei,Ds;function Td(){if(Ds)return Ei;Ds=1;const e=console.error;class t{constructor({logFn:n=null}={}){J(this,"logFn",null);J(this,"onError",null);J(this,"showDialog",!1);J(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=n}handle(n,{logFn:i=this.logFn,errorName:o="",onError:s=this.onError,showDialog:a=this.showDialog}={}){try{(s==null?void 0:s({error:n,errorName:o,processType:"renderer"}))!==!1&&i({error:n,errorName:o,showDialog:a})}catch{e(n)}}setOptions({logFn:n,onError:i,preventDefault:o,showDialog:s}){typeof n=="function"&&(this.logFn=n),typeof i=="function"&&(this.onError=i),typeof o=="boolean"&&(this.preventDefault=o),typeof s=="boolean"&&(this.showDialog=s)}startCatching({onError:n,showDialog:i}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:n,showDialog:i}),window.addEventListener("error",o=>{var s;this.preventDefault&&((s=o.preventDefault)==null||s.call(o)),this.handleError(o.error||o)}),window.addEventListener("unhandledrejection",o=>{var s;this.preventDefault&&((s=o.preventDefault)==null||s.call(o)),this.handleRejection(o.reason||o)}))}handleError(n){this.handle(n,{errorName:"Unhandled"})}handleRejection(n){const i=n instanceof Error?n:new Error(JSON.stringify(n));this.handle(i,{errorName:"Unhandled rejection"})}}return Ei=t,Ei}var vi,Ns;function Cd(){if(Ns)return vi;Ns=1,vi=t;const e={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function t(r){return Object.assign(n,{format:"{h}:{i}:{s}.{ms}{scope} › {text}",formatDataFn({data:i=[],date:o=new Date,format:s=n.format,logId:a=r.logId,scope:l=r.scopeName,...c}){return typeof s=="function"?s({...c,data:i,date:o,logId:a,scope:l}):(typeof s!="string"||(i.unshift(s),typeof i[1]=="string"&&i[1].match(/%[1cdfiOos]/)&&(i=[`${i[0]} ${i[1]}`,...i.slice(2)]),i[0]=i[0].replace(/\{(\w+)}/g,(f,u)=>{var h;switch(u){case"level":return c.level;case"logId":return a;case"scope":return l?` (${l})`:"";case"text":return"";case"y":return o.getFullYear().toString(10);case"m":return(o.getMonth()+1).toString(10).padStart(2,"0");case"d":return o.getDate().toString(10).padStart(2,"0");case"h":return o.getHours().toString(10).padStart(2,"0");case"i":return o.getMinutes().toString(10).padStart(2,"0");case"s":return o.getSeconds().toString(10).padStart(2,"0");case"ms":return o.getMilliseconds().toString(10).padStart(3,"0");case"iso":return o.toISOString();default:return((h=c.variables)==null?void 0:h[u])||f}}).trim()),i)},writeFn({message:{level:i,data:o}}){const s=e[i]||e.info;setTimeout(()=>s(...o))}});function n(i){n.writeFn({message:{...i,data:n.formatDataFn(i)}})}}return vi}var wi,Fs;function Od(){if(Fs)return wi;Fs=1,wi=t;const e=new Set([Promise,WeakMap,WeakSet]);function t(n){return Object.assign(i,{depth:5,serializeFn(o,{depth:s=5,seen:a=new WeakSet}={}){return a.has(o)?"[Circular]":s<1?r(o)?o:Array.isArray(o)?"[Array]":`[${typeof o}]`:["function","symbol"].includes(typeof o)?o.toString():r(o)?o:e.has(o.constructor)?`[${o.constructor.name}]`:Array.isArray(o)?o.map(l=>i.serializeFn(l,{depth:s-1,seen:a})):o instanceof Date?o.toISOString():o instanceof Error?o.stack:o instanceof Map?new Map(Array.from(o).map(([l,c])=>[i.serializeFn(l,{depth:s-1,seen:a}),i.serializeFn(c,{depth:s-1,seen:a})])):o instanceof Set?new Set(Array.from(o).map(l=>i.serializeFn(l,{depth:s-1,seen:a}))):(a.add(o),Object.fromEntries(Object.entries(o).map(([l,c])=>[l,i.serializeFn(c,{depth:s-1,seen:a})])))}});function i(o){if(!window.__electronLog){n.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{__electronLog.sendToMain(i.serializeFn(o,{depth:i.depth}))}catch(s){n.transports.console({data:["electronLog.transports.ipc",s,"data:",o.data],level:"error"})}}}function r(n){return Object(n)!==n}return wi}var xs;function $d(){return xs||(xs=1,function(e){const t=nc(),r=Td(),n=Cd(),i=Od();e.exports=o(),e.exports.Logger=t,e.exports.default=e.exports;function o(){const s=new t({allowUnknownLevel:!0,errorHandler:new r,initializeFn:()=>{},logId:"default",transportFactories:{console:n,ipc:i},variables:{processType:"renderer"}});return s.errorHandler.setOptions({logFn({error:a,errorName:l,showDialog:c}){s.transports.console({data:[l,a].filter(Boolean),level:"error"}),s.transports.ipc({cmd:"errorHandler",error:{cause:a==null?void 0:a.cause,code:a==null?void 0:a.code,name:a==null?void 0:a.name,message:a==null?void 0:a.message,stack:a==null?void 0:a.stack},errorName:l,logId:s.logId,showDialog:c})}}),typeof window=="object"&&window.addEventListener("message",a=>{const{cmd:l,logId:c,...f}=a.data||{},u=t.getInstance({logId:c});l==="message"&&u.processMessage(f,{transports:["console"]})}),new Proxy(s,{get(a,l){return typeof a[l]<"u"?a[l]:(...c)=>s.logData(c,{level:l})}})}}(pi)),pi.exports}var _i,Ls;function Rd(){if(Ls)return _i;Ls=1;const e=Ne,t=Z;_i={findAndReadPackageJson:r,tryReadJsonAt:n};function r(){return n(s())||n(o())||n(process.resourcesPath,"app.asar")||n(process.resourcesPath,"app")||n(process.cwd())||{name:void 0,version:void 0}}function n(...a){if(a[0])try{const l=t.join(...a),c=i("package.json",l);if(!c)return;const f=JSON.parse(e.readFileSync(c,"utf8")),u=(f==null?void 0:f.productName)||(f==null?void 0:f.name);return!u||u.toLowerCase()==="electron"?void 0:u?{name:u,version:f==null?void 0:f.version}:void 0}catch{return}}function i(a,l){let c=l;for(;;){const f=t.parse(c),u=f.root,h=f.dir;if(e.existsSync(t.join(c,a)))return t.resolve(t.join(c,a));if(c===u)return null;c=h}}function o(){const a=process.argv.filter(c=>c.indexOf("--user-data-dir=")===0);return a.length===0||typeof a[0]!="string"?null:a[0].replace("--user-data-dir=","")}function s(){var a;try{return(a=require.main)==null?void 0:a.filename}catch{return}}return _i}var Si,Us;function ic(){if(Us)return Si;Us=1;const e=Pr,t=Ze,r=Z,n=Rd();class i{constructor(){J(this,"appName");J(this,"appPackageJson");J(this,"platform",process.platform)}getAppLogPath(s=this.getAppName()){return this.platform==="darwin"?r.join(this.getSystemPathHome(),"Library/Logs",s):r.join(this.getAppUserDataPath(s),"logs")}getAppName(){var a;const s=this.appName||((a=this.getAppPackageJson())==null?void 0:a.name);if(!s)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return s}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=n.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(s=this.getAppName()){return s?r.join(this.getSystemPathAppData(),s):void 0}getAppVersion(){var s;return(s=this.getAppPackageJson())==null?void 0:s.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const s=Number(t.release().split(".")[0]);return s<=19?`10.${s-4}`:s-9}getOsVersion(){let s=t.type().replace("_"," "),a=t.release();return s==="Darwin"&&(s="macOS",a=this.getMacOsVersion()),`${s} ${a}`}getPathVariables(){const s=this.getAppName(),a=this.getAppVersion(),l=this;return{appData:this.getSystemPathAppData(),appName:s,appVersion:a,get electronDefaultDir(){return l.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(s),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(s)}}getSystemPathAppData(){const s=this.getSystemPathHome();switch(this.platform){case"darwin":return r.join(s,"Library/Application Support");case"win32":return process.env.APPDATA||r.join(s,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||r.join(s,".config")}}getSystemPathHome(){var s;return((s=t.homedir)==null?void 0:s.call(t))||process.env.HOME}getSystemPathTemp(){return t.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(s,a){}onAppReady(s){s()}onEveryWebContentsEvent(s,a){}onIpc(s,a){}onIpcInvoke(s,a){}openUrl(s,a=console.error){const c={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";e.exec(`${c} ${s}`,{},f=>{f&&a(f)})}setAppName(s){this.appName=s}setPlatform(s){this.platform=s}setPreloadFileForSessions({filePath:s,includeFutureSession:a=!0,getSessions:l=()=>[]}){}sendIpc(s,a){}showErrorBox(s,a){}}return Si=i,Si}var Ai,ks;function Id(){if(ks)return Ai;ks=1;const e=Z,t=ic();class r extends t{constructor({electron:o}={}){super();J(this,"electron");this.electron=o}getAppName(){var s,a;let o;try{o=this.appName||((s=this.electron.app)==null?void 0:s.name)||((a=this.electron.app)==null?void 0:a.getName())}catch{}return o||super.getAppName()}getAppUserDataPath(o){return this.getPath("userData")||super.getAppUserDataPath(o)}getAppVersion(){var s;let o;try{o=(s=this.electron.app)==null?void 0:s.getVersion()}catch{}return o||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(o){var s;try{return(s=this.electron.app)==null?void 0:s.getPath(o)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var o;return((o=this.electron.app)==null?void 0:o.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?e.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(o,s){var a;return(a=this.electron.app)==null||a.on(o,s),()=>{var l;(l=this.electron.app)==null||l.off(o,s)}}onAppReady(o){var s,a,l;(s=this.electron.app)!=null&&s.isReady()?o():(a=this.electron.app)!=null&&a.once?(l=this.electron.app)==null||l.once("ready",o):o()}onEveryWebContentsEvent(o,s){var l,c,f;return(c=(l=this.electron.webContents)==null?void 0:l.getAllWebContents())==null||c.forEach(u=>{u.on(o,s)}),(f=this.electron.app)==null||f.on("web-contents-created",a),()=>{var u,h;(u=this.electron.webContents)==null||u.getAllWebContents().forEach(p=>{p.off(o,s)}),(h=this.electron.app)==null||h.off("web-contents-created",a)};function a(u,h){h.on(o,s)}}onIpc(o,s){var a;(a=this.electron.ipcMain)==null||a.on(o,s)}onIpcInvoke(o,s){var a,l;(l=(a=this.electron.ipcMain)==null?void 0:a.handle)==null||l.call(a,o,s)}openUrl(o,s=console.error){var a;(a=this.electron.shell)==null||a.openExternal(o).catch(s)}setPreloadFileForSessions({filePath:o,includeFutureSession:s=!0,getSessions:a=()=>{var l;return[(l=this.electron.session)==null?void 0:l.defaultSession]}}){for(const c of a().filter(Boolean))l(c);s&&this.onAppEvent("session-created",c=>{l(c)});function l(c){c.setPreloads([...c.getPreloads(),o])}}sendIpc(o,s){var a,l;(l=(a=this.electron.BrowserWindow)==null?void 0:a.getAllWindows())==null||l.forEach(c=>{var f;((f=c.webContents)==null?void 0:f.isDestroyed())===!1&&c.webContents.send(o,s)})}showErrorBox(o,s){var a;(a=this.electron.dialog)==null||a.showErrorBox(o,s)}}return Ai=r,Ai}var bi,Ms;function Pd(){if(Ms)return bi;Ms=1;const e=Ne,t=Ze,r=Z,n=rc();bi={initialize({externalApi:s,getSessions:a,includeFutureSession:l,logger:c,preload:f=!0,spyRendererConsole:u=!1}){s.onAppReady(()=>{try{f&&i({externalApi:s,getSessions:a,includeFutureSession:l,preloadOption:f}),u&&o({externalApi:s,logger:c})}catch(h){c.warn(h)}})}};function i({externalApi:s,getSessions:a,includeFutureSession:l,preloadOption:c}){let f=typeof c=="string"?c:void 0;try{f=r.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!f||!e.existsSync(f)){f=r.join(s.getAppUserDataPath()||t.tmpdir(),"electron-log-preload.js");const u=`
      try {
        (${n.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;e.writeFileSync(f,u,"utf8")}s.setPreloadFileForSessions({filePath:f,includeFutureSession:l,getSessions:a})}function o({externalApi:s,logger:a}){const l=["verbose","info","warning","error"];s.onEveryWebContentsEvent("console-message",(c,f,u)=>{a.processMessage({data:[u],level:l[f],variables:{processType:"renderer"}})})}return bi}var Ti,js;function Dd(){if(js)return Ti;js=1;class e{constructor({externalApi:n,logFn:i=void 0,onError:o=void 0,showDialog:s=void 0}={}){J(this,"externalApi");J(this,"isActive",!1);J(this,"logFn");J(this,"onError");J(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:n,logFn:i,onError:o,showDialog:s}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(n,{logFn:i=this.logFn,onError:o=this.onError,processType:s="browser",showDialog:a=this.showDialog,errorName:l=""}={}){var c;n=t(n);try{if(typeof o=="function"){const f=((c=this.externalApi)==null?void 0:c.getVersions())||{},u=this.createIssue;if(o({createIssue:u,error:n,errorName:l,processType:s,versions:f})===!1)return}l?i(l,n):i(n),a&&!l.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${s} process`,n.stack)}catch{console.error(n)}}setOptions({externalApi:n,logFn:i,onError:o,showDialog:s}){typeof n=="object"&&(this.externalApi=n),typeof i=="function"&&(this.logFn=i),typeof o=="function"&&(this.onError=o),typeof s=="boolean"&&(this.showDialog=s)}startCatching({onError:n,showDialog:i}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:n,showDialog:i}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(n,i){var o;(o=this.externalApi)==null||o.openUrl(`${n}?${new URLSearchParams(i).toString()}`)}handleError(n){this.handle(n,{errorName:"Unhandled"})}handleRejection(n){const i=n instanceof Error?n:new Error(JSON.stringify(n));this.handle(i,{errorName:"Unhandled rejection"})}}function t(r){if(r instanceof Error)return r;if(r&&typeof r=="object"){if(r.message)return Object.assign(new Error(r.message),r);try{return new Error(JSON.stringify(r))}catch(n){return new Error(`Couldn't normalize error ${String(r)}: ${n}`)}}return new Error(`Can't normalize error ${String(r)}`)}return Ti=e,Ti}var Ci,Bs;function Nd(){if(Bs)return Ci;Bs=1;class e{constructor(r={}){J(this,"disposers",[]);J(this,"format","{eventSource}#{eventName}:");J(this,"formatters",{app:{"certificate-error":({args:r})=>this.arrayToObject(r.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:r})=>r.length===1?r[0]:r,"render-process-gone":({args:[r,n]})=>n&&typeof n=="object"?{...n,...this.getWebContentsDetails(r)}:[]},webContents:{"console-message":({args:[r,n,i,o]})=>{if(!(r<3))return{message:n,source:`${o}:${i}`}},"did-fail-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:r})=>this.arrayToObject(r,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:r})=>this.arrayToObject(r,["name","version"]),"preload-error":({args:r})=>this.arrayToObject(r,["preloadPath","error"])}});J(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});J(this,"externalApi");J(this,"level","error");J(this,"scope","");this.setOptions(r)}setOptions({events:r,externalApi:n,level:i,logger:o,format:s,formatters:a,scope:l}){typeof r=="object"&&(this.events=r),typeof n=="object"&&(this.externalApi=n),typeof i=="string"&&(this.level=i),typeof o=="object"&&(this.logger=o),(typeof s=="string"||typeof s=="function")&&(this.format=s),typeof a=="object"&&(this.formatters=a),typeof l=="string"&&(this.scope=l)}startLogging(r={}){this.setOptions(r),this.disposeListeners();for(const n of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(n,(...i)=>{this.handleEvent({eventSource:"app",eventName:n,handlerArgs:i})}));for(const n of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(n,(...i)=>{this.handleEvent({eventSource:"webContents",eventName:n,handlerArgs:i})}))}stopLogging(){this.disposeListeners()}arrayToObject(r,n){const i={};return n.forEach((o,s)=>{i[o]=r[s]}),r.length>n.length&&(i.unknownArgs=r.slice(n.length)),i}disposeListeners(){this.disposers.forEach(r=>r()),this.disposers=[]}formatEventLog({eventName:r,eventSource:n,handlerArgs:i}){var u;const[o,...s]=i;if(typeof this.format=="function")return this.format({args:s,event:o,eventName:r,eventSource:n});const a=(u=this.formatters[n])==null?void 0:u[r];let l=s;if(typeof a=="function"&&(l=a({args:s,event:o,eventName:r,eventSource:n})),!l)return;const c={};return Array.isArray(l)?c.args=l:typeof l=="object"&&Object.assign(c,l),n==="webContents"&&Object.assign(c,this.getWebContentsDetails(o==null?void 0:o.sender)),[this.format.replace("{eventSource}",n==="app"?"App":"WebContents").replace("{eventName}",r),c]}getEventNames(r){return!r||typeof r!="object"?[]:Object.entries(r).filter(([n,i])=>i).map(([n])=>n)}getWebContentsDetails(r){if(!(r!=null&&r.loadURL))return{};try{return{webContents:{id:r.id,url:r.getURL()}}}catch{return{}}}handleEvent({eventName:r,eventSource:n,handlerArgs:i}){var s;const o=this.formatEventLog({eventName:r,eventSource:n,handlerArgs:i});if(o){const a=this.scope?this.logger.scope(this.scope):this.logger;(s=a==null?void 0:a[this.level])==null||s.call(a,...o)}}}return Ci=e,Ci}var Oi,qs;function Fr(){if(qs)return Oi;qs=1,Oi={transform:e};function e({logger:t,message:r,transport:n,initialData:i=(r==null?void 0:r.data)||[],transforms:o=n==null?void 0:n.transforms}){return o.reduce((s,a)=>typeof a=="function"?a({data:s,logger:t,message:r,transport:n}):s,i)}return Oi}var $i,Hs;function oc(){if(Hs)return $i;Hs=1;const{transform:e}=Fr();$i={concatFirstStringElements:t,formatScope:n,formatText:o,formatVariables:i,timeZoneFromOffset:r,format({message:s,logger:a,transport:l,data:c=s==null?void 0:s.data}){switch(typeof l.format){case"string":return e({message:s,logger:a,transforms:[i,n,o],transport:l,initialData:[l.format,...c]});case"function":return l.format({data:c,level:(s==null?void 0:s.level)||"info",logger:a,message:s,transport:l});default:return c}}};function t({data:s}){return typeof s[0]!="string"||typeof s[1]!="string"||s[0].match(/%[1cdfiOos]/)?s:[`${s[0]} ${s[1]}`,...s.slice(2)]}function r(s){const a=Math.abs(s),l=s>0?"-":"+",c=Math.floor(a/60).toString().padStart(2,"0"),f=(a%60).toString().padStart(2,"0");return`${l}${c}:${f}`}function n({data:s,logger:a,message:l}){const{defaultLabel:c,labelLength:f}=(a==null?void 0:a.scope)||{},u=s[0];let h=l.scope;h||(h=c);let p;return h===""?p=f>0?"".padEnd(f+3):"":typeof h=="string"?p=` (${h})`.padEnd(f+3):p="",s[0]=u.replace("{scope}",p),s}function i({data:s,message:a}){let l=s[0];if(typeof l!="string")return s;l=l.replace("{level}]",`${a.level}]`.padEnd(6," "));const c=a.date||new Date;return s[0]=l.replace(/\{(\w+)}/g,(f,u)=>{var h;switch(u){case"level":return a.level||"info";case"logId":return a.logId;case"y":return c.getFullYear().toString(10);case"m":return(c.getMonth()+1).toString(10).padStart(2,"0");case"d":return c.getDate().toString(10).padStart(2,"0");case"h":return c.getHours().toString(10).padStart(2,"0");case"i":return c.getMinutes().toString(10).padStart(2,"0");case"s":return c.getSeconds().toString(10).padStart(2,"0");case"ms":return c.getMilliseconds().toString(10).padStart(3,"0");case"z":return r(c.getTimezoneOffset());case"iso":return c.toISOString();default:return((h=a.variables)==null?void 0:h[u])||f}}).trim(),s}function o({data:s}){const a=s[0];if(typeof a!="string")return s;if(a.lastIndexOf("{text}")===a.length-6)return s[0]=a.replace(/\s?{text}/,""),s[0]===""&&s.shift(),s;const c=a.split("{text}");let f=[];return c[0]!==""&&f.push(c[0]),f=f.concat(s.slice(1)),c[1]!==""&&f.push(c[1]),f}return $i}var Ri={exports:{}},Gs;function Ln(){return Gs||(Gs=1,function(e){const t=Fn;e.exports={serialize:n,maxDepth({data:i,transport:o,depth:s=(o==null?void 0:o.depth)??6}){if(!i)return i;if(s<1)return Array.isArray(i)?"[array]":typeof i=="object"&&i?"[object]":i;if(Array.isArray(i))return i.map(l=>e.exports.maxDepth({data:l,depth:s-1}));if(typeof i!="object"||i&&typeof i.toISOString=="function")return i;if(i===null)return null;if(i instanceof Error)return i;const a={};for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&(a[l]=e.exports.maxDepth({data:i[l],depth:s-1}));return a},toJSON({data:i}){return JSON.parse(JSON.stringify(i,r()))},toString({data:i,transport:o}){const s=(o==null?void 0:o.inspectOptions)||{},a=i.map(l=>{if(l!==void 0)try{const c=JSON.stringify(l,r(),"  ");return c===void 0?void 0:JSON.parse(c)}catch{return l}});return t.formatWithOptions(s,...a)}};function r(i={}){const o=new WeakSet;return function(s,a){if(typeof a=="object"&&a!==null){if(o.has(a))return;o.add(a)}return n(s,a,i)}}function n(i,o,s={}){const a=(s==null?void 0:s.serializeMapAndSet)!==!1;return o instanceof Error?o.stack:o&&(typeof o=="function"?`[function] ${o.toString()}`:o instanceof Date?o.toISOString():a&&o instanceof Map&&Object.fromEntries?Object.fromEntries(o):a&&o instanceof Set&&Array.from?Array.from(o):o)}}(Ri)),Ri.exports}var Ii,Ws;function Do(){if(Ws)return Ii;Ws=1,Ii={transformStyles:n,applyAnsiStyles({data:i}){return n(i,t,r)},removeStyles({data:i}){return n(i,()=>"")}};const e={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function t(i){const o=i.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return e[o]||""}function r(i){return i+e.unset}function n(i,o,s){const a={};return i.reduce((l,c,f,u)=>{if(a[f])return l;if(typeof c=="string"){let h=f,p=!1;c=c.replace(/%[1cdfiOos]/g,E=>{if(h+=1,E!=="%c")return E;const _=u[h];return typeof _=="string"?(a[h]=!0,p=!0,o(_,c)):E}),p&&s&&(c=s(c))}return l.push(c),l},[])}return Ii}var Pi,Vs;function Fd(){if(Vs)return Pi;Vs=1;const{concatFirstStringElements:e,format:t}=oc(),{maxDepth:r,toJSON:n}=Ln(),{applyAnsiStyles:i,removeStyles:o}=Do(),{transform:s}=Fr(),a={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};Pi=f;const c=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"›"} {text}`;Object.assign(f,{DEFAULT_FORMAT:c});function f(_){return Object.assign(v,{format:c,level:"silly",transforms:[u,t,p,e,r,n],useStyles:process.env.FORCE_STYLES,writeFn({message:b}){(a[b.level]||a.info)(...b.data)}});function v(b){const T=s({logger:_,message:b,transport:v});v.writeFn({message:{...b,data:T}})}}function u({data:_,message:v,transport:b}){return b.format!==c?_:[`color:${E(v.level)}`,"color:unset",..._]}function h(_,v){if(typeof _=="boolean")return _;const T=v==="error"||v==="warn"?process.stderr:process.stdout;return T&&T.isTTY}function p(_){const{message:v,transport:b}=_;return(h(b.useStyles,v.level)?i:o)(_)}function E(_){const v={error:"red",warn:"yellow",info:"cyan",default:"unset"};return v[_]||v.default}return Pi}var Di,zs;function sc(){if(zs)return Di;zs=1;const e=xn,t=Ne,r=Ze;class n extends e{constructor({path:a,writeOptions:l={encoding:"utf8",flag:"a",mode:438},writeAsync:c=!1}){super();J(this,"asyncWriteQueue",[]);J(this,"bytesWritten",0);J(this,"hasActiveAsyncWriting",!1);J(this,"path",null);J(this,"initialSize");J(this,"writeOptions",null);J(this,"writeAsync",!1);this.path=a,this.writeOptions=l,this.writeAsync=c}get size(){return this.getSize()}clear(){try{return t.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(a){return a.code==="ENOENT"?!0:(this.emit("error",a,this),!1)}}crop(a){try{const l=i(this.path,a||4096);this.clear(),this.writeLine(`[log cropped]${r.EOL}${l}`)}catch(l){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${l.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const a=t.statSync(this.path);this.initialSize=a.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(a){this.bytesWritten+=Buffer.byteLength(a,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const a=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const l=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,t.writeFile(this.path,l,this.writeOptions,c=>{a.hasActiveAsyncWriting=!1,c?a.emit("error",new Error(`Couldn't write to ${a.path}. ${c.message}`),this):a.increaseBytesWrittenCounter(l),a.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(a){if(a+=r.EOL,this.writeAsync){this.asyncWriteQueue.push(a),this.nextAsyncWrite();return}try{t.writeFileSync(this.path,a,this.writeOptions),this.increaseBytesWrittenCounter(a)}catch(l){this.emit("error",new Error(`Couldn't write to ${this.path}. ${l.message}`),this)}}}Di=n;function i(o,s){const a=Buffer.alloc(s),l=t.statSync(o),c=Math.min(l.size,s),f=Math.max(0,l.size-s),u=t.openSync(o,"r"),h=t.readSync(u,a,0,c,f);return t.closeSync(u),a.toString("utf8",0,h)}return Di}var Ni,Ys;function xd(){if(Ys)return Ni;Ys=1;const e=sc();class t extends e{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return Ni=t,Ni}var Fi,Xs;function Ld(){if(Xs)return Fi;Xs=1;const e=xn,t=Ne,r=Z,n=sc(),i=xd();class o extends e{constructor(){super();J(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:l,writeOptions:c={},writeAsync:f=!1}){let u;try{if(l=r.resolve(l),this.store[l])return this.store[l];u=this.createFile({filePath:l,writeOptions:c,writeAsync:f})}catch(h){u=new i({path:l}),this.emitError(h,u)}return u.on("error",this.emitError),this.store[l]=u,u}createFile({filePath:l,writeOptions:c,writeAsync:f}){return this.testFileWriting({filePath:l,writeOptions:c}),new n({path:l,writeOptions:c,writeAsync:f})}emitError(l,c){this.emit("error",l,c)}testFileWriting({filePath:l,writeOptions:c}){t.mkdirSync(r.dirname(l),{recursive:!0}),t.writeFileSync(l,"",{flag:"a",mode:c.mode})}}return Fi=o,Fi}var xi,Js;function Ud(){if(Js)return xi;Js=1;const e=Ne,t=Ze,r=Z,n=Ld(),{transform:i}=Fr(),{removeStyles:o}=Do(),{format:s,concatFirstStringElements:a}=oc(),{toString:l}=Ln();xi=f;const c=new n;function f(h,{registry:p=c,externalApi:E}={}){let _;return p.listenerCount("error")<1&&p.on("error",(U,A)=>{T(`Can't write to ${A}`,U)}),Object.assign(v,{fileName:u(h.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:x,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:k,sync:!0,transforms:[o,s,a,l],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(U){const A=U.toString(),$=r.parse(A);try{e.renameSync(A,r.join($.dir,`${$.name}.old${$.ext}`))}catch(D){T("Could not rotate log",D);const y=Math.round(v.maxSize/4);U.crop(Math.min(y,256*1024))}},resolvePathFn(U){return r.join(U.libraryDefaultDir,U.fileName)},setAppName(U){h.dependencies.externalApi.setAppName(U)}});function v(U){const A=x(U);v.maxSize>0&&A.size>v.maxSize&&(v.archiveLogFn(A),A.reset());const D=i({logger:h,message:U,transport:v});A.writeLine(D)}function b(){_||(_=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(E.getPathVariables()),fileName:{get(){return v.fileName},enumerable:!0}}),typeof v.archiveLog=="function"&&(v.archiveLogFn=v.archiveLog,T("archiveLog is deprecated. Use archiveLogFn instead")),typeof v.resolvePath=="function"&&(v.resolvePathFn=v.resolvePath,T("resolvePath is deprecated. Use resolvePathFn instead")))}function T(U,A=null,$="error"){const D=[`electron-log.transports.file: ${U}`];A&&D.push(A),h.transports.console({data:D,date:new Date,level:$})}function x(U){b();const A=v.resolvePathFn(_,U);return p.provide({filePath:A,writeAsync:!v.sync,writeOptions:v.writeOptions})}function k({fileFilter:U=A=>A.endsWith(".log")}={}){b();const A=r.dirname(v.resolvePathFn(_));return e.existsSync(A)?e.readdirSync(A).map($=>r.join(A,$)).filter(U).map($=>{try{return{path:$,lines:e.readFileSync($,"utf8").split(t.EOL)}}catch{return null}}).filter(Boolean):[]}}function u(h=process.type){switch(h){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return xi}var Li,Ks;function kd(){if(Ks)return Li;Ks=1;const{maxDepth:e,toJSON:t}=Ln(),{transform:r}=Fr();Li=n;function n(i,{externalApi:o}){return Object.assign(s,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:i.isDev?"silly":!1,transforms:[t,e]}),o!=null&&o.isElectron()?s:void 0;function s(a){var l;((l=a==null?void 0:a.variables)==null?void 0:l.processType)!=="renderer"&&(o==null||o.sendIpc(s.eventId,{...a,data:r({logger:i,message:a,transport:s})}))}}return Li}var Ui,Qs;function Md(){if(Qs)return Ui;Qs=1;const e=Kl,t=wd,{transform:r}=Fr(),{removeStyles:n}=Do(),{toJSON:i,maxDepth:o}=Ln();Ui=s;function s(a){return Object.assign(l,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[n,i,o],makeBodyFn({message:c}){return JSON.stringify({client:l.client,data:c.data,date:c.date.getTime(),level:c.level,scope:c.scope,variables:c.variables})},processErrorFn({error:c}){a.processMessage({data:[`electron-log: can't POST ${l.url}`,c],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:c,requestOptions:f,body:u}){const p=(c.startsWith("https:")?t:e).request(c,{method:"POST",...f,headers:{"Content-Type":"application/json","Content-Length":u.length,...f.headers}});return p.write(u),p.end(),p}});function l(c){if(!l.url)return;const f=l.makeBodyFn({logger:a,message:{...c,data:r({logger:a,message:c,transport:l})},transport:l}),u=l.sendRequestFn({serverUrl:l.url,requestOptions:l.requestOptions,body:Buffer.from(f,"utf8")});u.on("error",h=>l.processErrorFn({error:h,logger:a,message:c,request:u,transport:l}))}}return Ui}var ki,Zs;function ac(){if(Zs)return ki;Zs=1;const e=nc(),t=Dd(),r=Nd(),n=Fd(),i=Ud(),o=kd(),s=Md();ki=a;function a({dependencies:l,initializeFn:c}){var u;const f=new e({dependencies:l,errorHandler:new t,eventLogger:new r,initializeFn:c,isDev:(u=l.externalApi)==null?void 0:u.isDev(),logId:"default",transportFactories:{console:n,file:i,ipc:o,remote:s},variables:{processType:"main"}});return f.default=f,f.Logger=e,f.processInternalErrorFn=h=>{f.transports.console.writeFn({message:{data:["Unhandled electron-log error",h],level:"error"}})},f}return ki}var Mi,ea;function jd(){if(ea)return Mi;ea=1;const e=se,t=Id(),{initialize:r}=Pd(),n=ac(),i=new t({electron:e}),o=n({dependencies:{externalApi:i},initializeFn:r});Mi=o,i.onIpc("__ELECTRON_LOG__",(a,l)=>{l.scope&&o.Logger.getInstance(l).scope(l.scope);const c=new Date(l.date);s({...l,date:c.getTime()?c:new Date})}),i.onIpcInvoke("__ELECTRON_LOG__",(a,{cmd:l="",logId:c})=>{switch(l){case"getOptions":return{levels:o.Logger.getInstance({logId:c}).levels,logId:c};default:return s({data:[`Unknown cmd '${l}'`],level:"error"}),{}}});function s(a){var l;(l=o.Logger.getInstance(a))==null||l.processMessage(a)}return Mi}var ji,ta;function Bd(){if(ta)return ji;ta=1;const e=ic(),t=ac(),r=new e;return ji=t({dependencies:{externalApi:r}}),ji}const qd=typeof process>"u"||process.type==="renderer"||process.type==="worker",Hd=typeof process=="object"&&process.type==="browser";qd?(rc(),gn.exports=$d()):Hd?gn.exports=jd():gn.exports=Bd();var Gd=gn.exports;const Wd=tc(Gd);var Bi={},pe={},ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.CancellationError=ut.CancellationToken=void 0;const Vd=xn;class zd extends Vd.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(t){this.removeParentCancelHandler(),this._parent=t,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(t){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,t!=null&&(this.parent=t)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(t){this.cancelled?t():this.once("cancel",t)}createPromise(t){if(this.cancelled)return Promise.reject(new go);const r=()=>{if(n!=null)try{this.removeListener("cancel",n),n=null}catch{}};let n=null;return new Promise((i,o)=>{let s=null;if(n=()=>{try{s!=null&&(s(),s=null)}finally{o(new go)}},this.cancelled){n();return}this.onCancel(n),t(i,o,a=>{s=a})}).then(i=>(r(),i)).catch(i=>{throw r(),i})}removeParentCancelHandler(){const t=this._parent;t!=null&&this.parentCancelHandler!=null&&(t.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}}ut.CancellationToken=zd;class go extends Error{constructor(){super("cancelled")}}ut.CancellationError=go;var be={},yo={exports:{}},rn={exports:{}},qi,ra;function Yd(){if(ra)return qi;ra=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,o=n*365.25;qi=function(f,u){u=u||{};var h=typeof f;if(h==="string"&&f.length>0)return s(f);if(h==="number"&&isFinite(f))return u.long?l(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function s(f){if(f=String(f),!(f.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(u){var h=parseFloat(u[1]),p=(u[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*o;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(f){var u=Math.abs(f);return u>=n?Math.round(f/n)+"d":u>=r?Math.round(f/r)+"h":u>=t?Math.round(f/t)+"m":u>=e?Math.round(f/e)+"s":f+"ms"}function l(f){var u=Math.abs(f);return u>=n?c(f,u,n,"day"):u>=r?c(f,u,r,"hour"):u>=t?c(f,u,t,"minute"):u>=e?c(f,u,e,"second"):f+" ms"}function c(f,u,h,p){var E=u>=h*1.5;return Math.round(f/h)+" "+p+(E?"s":"")}return qi}var Hi,na;function lc(){if(na)return Hi;na=1;function e(t){n.debug=n,n.default=n,n.coerce=c,n.disable=a,n.enable=o,n.enabled=l,n.humanize=Yd(),n.destroy=f,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function r(u){let h=0;for(let p=0;p<u.length;p++)h=(h<<5)-h+u.charCodeAt(p),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=r;function n(u){let h,p=null,E,_;function v(...b){if(!v.enabled)return;const T=v,x=Number(new Date),k=x-(h||x);T.diff=k,T.prev=h,T.curr=x,h=x,b[0]=n.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let U=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,($,D)=>{if($==="%%")return"%";U++;const y=n.formatters[D];if(typeof y=="function"){const j=b[U];$=y.call(T,j),b.splice(U,1),U--}return $}),n.formatArgs.call(T,b),(T.log||n.log).apply(T,b)}return v.namespace=u,v.useColors=n.useColors(),v.color=n.selectColor(u),v.extend=i,v.destroy=n.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(E!==n.namespaces&&(E=n.namespaces,_=n.enabled(u)),_),set:b=>{p=b}}),typeof n.init=="function"&&n.init(v),v}function i(u,h){const p=n(this.namespace+(typeof h>"u"?":":h)+u);return p.log=this.log,p}function o(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];const h=(typeof u=="string"?u:"").trim().replace(" ",",").split(",").filter(Boolean);for(const p of h)p[0]==="-"?n.skips.push(p.slice(1)):n.names.push(p)}function s(u,h){let p=0,E=0,_=-1,v=0;for(;p<u.length;)if(E<h.length&&(h[E]===u[p]||h[E]==="*"))h[E]==="*"?(_=E,v=p,E++):(p++,E++);else if(_!==-1)E=_+1,v++,p=v;else return!1;for(;E<h.length&&h[E]==="*";)E++;return E===h.length}function a(){const u=[...n.names,...n.skips.map(h=>"-"+h)].join(",");return n.enable(""),u}function l(u){for(const h of n.skips)if(s(u,h))return!1;for(const h of n.names)if(s(u,h))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Hi=e,Hi}var ia;function Xd(){return ia||(ia=1,function(e,t){t.formatArgs=n,t.save=i,t.load=o,t.useColors=r,t.storage=s(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let f=0,u=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(f++,h==="%c"&&(u=f))}),l.splice(u,0,c)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function o(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=lc()(t);const{formatters:a}=e.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}(rn,rn.exports)),rn.exports}var nn={exports:{}},Gi,oa;function Jd(){return oa||(oa=1,Gi=(e,t=process.argv)=>{const r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}),Gi}var Wi,sa;function Kd(){if(sa)return Wi;sa=1;const e=Ze,t=Ql,r=Jd(),{env:n}=process;let i;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?i=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(i=1),"FORCE_COLOR"in n&&(n.FORCE_COLOR==="true"?i=1:n.FORCE_COLOR==="false"?i=0:i=n.FORCE_COLOR.length===0?1:Math.min(parseInt(n.FORCE_COLOR,10),3));function o(l){return l===0?!1:{level:l,hasBasic:!0,has256:l>=2,has16m:l>=3}}function s(l,c){if(i===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(l&&!c&&i===void 0)return 0;const f=i||0;if(n.TERM==="dumb")return f;if(process.platform==="win32"){const u=e.release().split(".");return Number(u[0])>=10&&Number(u[2])>=10586?Number(u[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(u=>u in n)||n.CI_NAME==="codeship"?1:f;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if(n.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in n){const u=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return u>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:f}function a(l){const c=s(l,l&&l.isTTY);return o(c)}return Wi={supportsColor:a,stdout:o(s(!0,t.isatty(1))),stderr:o(s(!0,t.isatty(2)))},Wi}var aa;function Qd(){return aa||(aa=1,function(e,t){const r=Ql,n=Fn;t.init=f,t.log=a,t.formatArgs=o,t.save=l,t.load=c,t.useColors=i,t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const h=Kd();h&&(h.stderr||h).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(h=>/^debug_/i.test(h)).reduce((h,p)=>{const E=p.substring(6).toLowerCase().replace(/_([a-z])/g,(v,b)=>b.toUpperCase());let _=process.env[p];return/^(yes|on|true|enabled)$/i.test(_)?_=!0:/^(no|off|false|disabled)$/i.test(_)?_=!1:_==="null"?_=null:_=Number(_),h[E]=_,h},{});function i(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:r.isatty(process.stderr.fd)}function o(h){const{namespace:p,useColors:E}=this;if(E){const _=this.color,v="\x1B[3"+(_<8?_:"8;5;"+_),b=`  ${v};1m${p} \x1B[0m`;h[0]=b+h[0].split(`
`).join(`
`+b),h.push(v+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else h[0]=s()+p+" "+h[0]}function s(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function a(...h){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...h)+`
`)}function l(h){h?process.env.DEBUG=h:delete process.env.DEBUG}function c(){return process.env.DEBUG}function f(h){h.inspectOpts={};const p=Object.keys(t.inspectOpts);for(let E=0;E<p.length;E++)h.inspectOpts[p[E]]=t.inspectOpts[p[E]]}e.exports=lc()(t);const{formatters:u}=e.exports;u.o=function(h){return this.inspectOpts.colors=this.useColors,n.inspect(h,this.inspectOpts).split(`
`).map(p=>p.trim()).join(" ")},u.O=function(h){return this.inspectOpts.colors=this.useColors,n.inspect(h,this.inspectOpts)}}(nn,nn.exports)),nn.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?yo.exports=Xd():yo.exports=Qd();var Zd=yo.exports,Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.newError=eh;function eh(e,t){const r=new Error(e);return r.code=t,r}var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.ProgressCallbackTransform=void 0;const th=Nr;class rh extends th.Transform{constructor(t,r,n){super(),this.total=t,this.cancellationToken=r,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(t,r,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=i+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),n(null,t)}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,t(null)}}xr.ProgressCallbackTransform=rh;Object.defineProperty(be,"__esModule",{value:!0});be.DigestTransform=be.HttpExecutor=be.HttpError=void 0;be.createHttpError=Eo;be.parseJson=uh;be.configureRequestOptionsFromUrl=uc;be.configureRequestUrl=Fo;be.safeGetHeader=qt;be.configureRequestOptions=An;be.safeStringifyJson=bn;const nh=Dr,ih=Zd,oh=Ne,sh=Nr,cc=Yt,ah=ut,la=Xt,lh=xr,or=(0,ih.default)("electron-builder");function Eo(e,t=null){return new No(e.statusCode||-1,`${e.statusCode} ${e.statusMessage}`+(t==null?"":`
`+JSON.stringify(t,null,"  "))+`
Headers: `+bn(e.headers),t)}const ch=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class No extends Error{constructor(t,r=`HTTP error: ${ch.get(t)||t}`,n=null){super(r),this.statusCode=t,this.description=n,this.name="HttpError",this.code=`HTTP_ERROR_${t}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}be.HttpError=No;function uh(e){return e.then(t=>t==null||t.length===0?null:JSON.parse(t))}class Sn{constructor(){this.maxRedirects=10}request(t,r=new ah.CancellationToken,n){An(t);const i=n==null?void 0:JSON.stringify(n),o=i?Buffer.from(i):void 0;if(o!=null){or(i);const{headers:s,...a}=t;t={method:"post",headers:{"Content-Type":"application/json","Content-Length":o.length,...s},...a}}return this.doApiRequest(t,r,s=>s.end(o))}doApiRequest(t,r,n,i=0){return or.enabled&&or(`Request: ${bn(t)}`),r.createPromise((o,s,a)=>{const l=this.createRequest(t,c=>{try{this.handleResponse(c,t,r,o,s,i,n)}catch(f){s(f)}});this.addErrorAndTimeoutHandlers(l,s,t.timeout),this.addRedirectHandlers(l,t,s,i,c=>{this.doApiRequest(c,r,n,i).then(o).catch(s)}),n(l,s),a(()=>l.abort())})}addRedirectHandlers(t,r,n,i,o){}addErrorAndTimeoutHandlers(t,r,n=60*1e3){this.addTimeOutHandler(t,r,n),t.on("error",r),t.on("aborted",()=>{r(new Error("Request has been aborted by the server"))})}handleResponse(t,r,n,i,o,s,a){var l;if(or.enabled&&or(`Response: ${t.statusCode} ${t.statusMessage}, request options: ${bn(r)}`),t.statusCode===404){o(Eo(t,`method: ${r.method||"GET"} url: ${r.protocol||"https:"}//${r.hostname}${r.port?`:${r.port}`:""}${r.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(t.statusCode===204){i();return}const c=(l=t.statusCode)!==null&&l!==void 0?l:0,f=c>=300&&c<400,u=qt(t,"location");if(f&&u!=null){if(s>this.maxRedirects){o(this.createMaxRedirectError());return}this.doApiRequest(Sn.prepareRedirectUrlOptions(u,r),n,a,s).then(i).catch(o);return}t.setEncoding("utf8");let h="";t.on("error",o),t.on("data",p=>h+=p),t.on("end",()=>{try{if(t.statusCode!=null&&t.statusCode>=400){const p=qt(t,"content-type"),E=p!=null&&(Array.isArray(p)?p.find(_=>_.includes("json"))!=null:p.includes("json"));o(Eo(t,`method: ${r.method||"GET"} url: ${r.protocol||"https:"}//${r.hostname}${r.port?`:${r.port}`:""}${r.path}

          Data:
          ${E?JSON.stringify(JSON.parse(h)):h}
          `))}else i(h.length===0?null:h)}catch(p){o(p)}})}async downloadToBuffer(t,r){return await r.cancellationToken.createPromise((n,i,o)=>{const s=[],a={headers:r.headers||void 0,redirect:"manual"};Fo(t,a),An(a),this.doDownload(a,{destination:null,options:r,onCancel:o,callback:l=>{l==null?n(Buffer.concat(s)):i(l)},responseHandler:(l,c)=>{let f=0;l.on("data",u=>{if(f+=u.length,f>524288e3){c(new Error("Maximum allowed size is 500 MB"));return}s.push(u)}),l.on("end",()=>{c(null)})}},0)})}doDownload(t,r,n){const i=this.createRequest(t,o=>{if(o.statusCode>=400){r.callback(new Error(`Cannot download "${t.protocol||"https:"}//${t.hostname}${t.path}", status ${o.statusCode}: ${o.statusMessage}`));return}o.on("error",r.callback);const s=qt(o,"location");if(s!=null){n<this.maxRedirects?this.doDownload(Sn.prepareRedirectUrlOptions(s,t),r,n++):r.callback(this.createMaxRedirectError());return}r.responseHandler==null?dh(r,o):r.responseHandler(o,r.callback)});this.addErrorAndTimeoutHandlers(i,r.callback,t.timeout),this.addRedirectHandlers(i,t,r.callback,n,o=>{this.doDownload(o,r,n++)}),i.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(t,r,n){t.on("socket",i=>{i.setTimeout(n,()=>{t.abort(),r(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(t,r){const n=uc(t,{...r}),i=n.headers;if(i!=null&&i.authorization){const o=new cc.URL(t);(o.hostname.endsWith(".amazonaws.com")||o.searchParams.has("X-Amz-Credential"))&&delete i.authorization}return n}static retryOnServerError(t,r=3){for(let n=0;;n++)try{return t()}catch(i){if(n<r&&(i instanceof No&&i.isServerError()||i.code==="EPIPE"))continue;throw i}}}be.HttpExecutor=Sn;function uc(e,t){const r=An(t);return Fo(new cc.URL(e),r),r}function Fo(e,t){t.protocol=e.protocol,t.hostname=e.hostname,e.port?t.port=e.port:t.port&&delete t.port,t.path=e.pathname+e.search}class vo extends sh.Transform{get actual(){return this._actual}constructor(t,r="sha512",n="base64"){super(),this.expected=t,this.algorithm=r,this.encoding=n,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,nh.createHash)(r)}_transform(t,r,n){this.digester.update(t),n(null,t)}_flush(t){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(r){t(r);return}t(null)}validate(){if(this._actual==null)throw(0,la.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,la.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}be.DigestTransform=vo;function fh(e,t,r){return e!=null&&t!=null&&e!==t?(r(new Error(`checksum mismatch: expected ${t} but got ${e} (X-Checksum-Sha2 header)`)),!1):!0}function qt(e,t){const r=e.headers[t];return r==null?null:Array.isArray(r)?r.length===0?null:r[r.length-1]:r}function dh(e,t){if(!fh(qt(t,"X-Checksum-Sha2"),e.options.sha2,e.callback))return;const r=[];if(e.options.onProgress!=null){const s=qt(t,"content-length");s!=null&&r.push(new lh.ProgressCallbackTransform(parseInt(s,10),e.options.cancellationToken,e.options.onProgress))}const n=e.options.sha512;n!=null?r.push(new vo(n,"sha512",n.length===128&&!n.includes("+")&&!n.includes("Z")&&!n.includes("=")?"hex":"base64")):e.options.sha2!=null&&r.push(new vo(e.options.sha2,"sha256","hex"));const i=(0,oh.createWriteStream)(e.destination);r.push(i);let o=t;for(const s of r)s.on("error",a=>{i.close(),e.options.cancellationToken.cancelled||e.callback(a)}),o=o.pipe(s);i.on("finish",()=>{i.close(e.callback)})}function An(e,t,r){r!=null&&(e.method=r),e.headers={...e.headers};const n=e.headers;return t!=null&&(n.authorization=t.startsWith("Basic")||t.startsWith("Bearer")?t:`token ${t}`),n["User-Agent"]==null&&(n["User-Agent"]="electron-builder"),(r==null||r==="GET"||n["Cache-Control"]==null)&&(n["Cache-Control"]="no-cache"),e.protocol==null&&process.versions.electron!=null&&(e.protocol="https:"),e}function bn(e,t){return JSON.stringify(e,(r,n)=>r.endsWith("Authorization")||r.endsWith("authorization")||r.endsWith("Password")||r.endsWith("PASSWORD")||r.endsWith("Token")||r.includes("password")||r.includes("token")||t!=null&&t.has(r)?"<stripped sensitive data>":n,2)}var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.githubUrl=hh;Un.getS3LikeProviderBaseUrl=ph;function hh(e,t="github.com"){return`${e.protocol||"https"}://${e.host||t}`}function ph(e){const t=e.provider;if(t==="s3")return mh(e);if(t==="spaces")return gh(e);throw new Error(`Not supported provider: ${t}`)}function mh(e){let t;if(e.accelerate==!0)t=`https://${e.bucket}.s3-accelerate.amazonaws.com`;else if(e.endpoint!=null)t=`${e.endpoint}/${e.bucket}`;else if(e.bucket.includes(".")){if(e.region==null)throw new Error(`Bucket name "${e.bucket}" includes a dot, but S3 region is missing`);e.region==="us-east-1"?t=`https://s3.amazonaws.com/${e.bucket}`:t=`https://s3-${e.region}.amazonaws.com/${e.bucket}`}else e.region==="cn-north-1"?t=`https://${e.bucket}.s3.${e.region}.amazonaws.com.cn`:t=`https://${e.bucket}.s3.amazonaws.com`;return fc(t,e.path)}function fc(e,t){return t!=null&&t.length>0&&(t.startsWith("/")||(e+="/"),e+=t),e}function gh(e){if(e.name==null)throw new Error("name is missing");if(e.region==null)throw new Error("region is missing");return fc(`https://${e.name}.${e.region}.digitaloceanspaces.com`,e.path)}var xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.parseDn=yh;function yh(e){let t=!1,r=null,n="",i=0;e=e.trim();const o=new Map;for(let s=0;s<=e.length;s++){if(s===e.length){r!==null&&o.set(r,n);break}const a=e[s];if(t){if(a==='"'){t=!1;continue}}else{if(a==='"'){t=!0;continue}if(a==="\\"){s++;const l=parseInt(e.slice(s,s+2),16);Number.isNaN(l)?n+=e[s]:(s++,n+=String.fromCharCode(l));continue}if(r===null&&a==="="){r=n,n="";continue}if(a===","||a===";"||a==="+"){r!==null&&o.set(r,n),r=null,n="";continue}}if(a===" "&&!t){if(n.length===0)continue;if(s>i){let l=s;for(;e[l]===" ";)l++;i=l}if(i>=e.length||e[i]===","||e[i]===";"||r===null&&e[i]==="="||r!==null&&e[i]==="+"){s=i-1;continue}}n+=a}return o}var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.nil=Gt.UUID=void 0;const dc=Dr,hc=Xt,Eh="options.name must be either a string or a Buffer",ca=(0,dc.randomBytes)(16);ca[0]=ca[0]|1;const yn={},Q=[];for(let e=0;e<256;e++){const t=(e+256).toString(16).substr(1);yn[t]=e,Q[e]=t}class Ct{constructor(t){this.ascii=null,this.binary=null;const r=Ct.check(t);if(!r)throw new Error("not a UUID");this.version=r.version,r.format==="ascii"?this.ascii=t:this.binary=t}static v5(t,r){return vh(t,"sha1",80,r)}toString(){return this.ascii==null&&(this.ascii=wh(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(t,r=0){if(typeof t=="string")return t=t.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(t)?t==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(yn[t[14]+t[15]]&240)>>4,variant:ua((yn[t[19]+t[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(t)){if(t.length<r+16)return!1;let n=0;for(;n<16&&t[r+n]===0;n++);return n===16?{version:void 0,variant:"nil",format:"binary"}:{version:(t[r+6]&240)>>4,variant:ua((t[r+8]&224)>>5),format:"binary"}}throw(0,hc.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(t){const r=Buffer.allocUnsafe(16);let n=0;for(let i=0;i<16;i++)r[i]=yn[t[n++]+t[n++]],(i===3||i===5||i===7||i===9)&&(n+=1);return r}}Gt.UUID=Ct;Ct.OID=Ct.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function ua(e){switch(e){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var yr;(function(e){e[e.ASCII=0]="ASCII",e[e.BINARY=1]="BINARY",e[e.OBJECT=2]="OBJECT"})(yr||(yr={}));function vh(e,t,r,n,i=yr.ASCII){const o=(0,dc.createHash)(t);if(typeof e!="string"&&!Buffer.isBuffer(e))throw(0,hc.newError)(Eh,"ERR_INVALID_UUID_NAME");o.update(n),o.update(e);const a=o.digest();let l;switch(i){case yr.BINARY:a[6]=a[6]&15|r,a[8]=a[8]&63|128,l=a;break;case yr.OBJECT:a[6]=a[6]&15|r,a[8]=a[8]&63|128,l=new Ct(a);break;default:l=Q[a[0]]+Q[a[1]]+Q[a[2]]+Q[a[3]]+"-"+Q[a[4]]+Q[a[5]]+"-"+Q[a[6]&15|r]+Q[a[7]]+"-"+Q[a[8]&63|128]+Q[a[9]]+"-"+Q[a[10]]+Q[a[11]]+Q[a[12]]+Q[a[13]]+Q[a[14]]+Q[a[15]];break}return l}function wh(e){return Q[e[0]]+Q[e[1]]+Q[e[2]]+Q[e[3]]+"-"+Q[e[4]]+Q[e[5]]+"-"+Q[e[6]]+Q[e[7]]+"-"+Q[e[8]]+Q[e[9]]+"-"+Q[e[10]]+Q[e[11]]+Q[e[12]]+Q[e[13]]+Q[e[14]]+Q[e[15]]}Gt.nil=new Ct("00000000-0000-0000-0000-000000000000");var Lr={},pc={};(function(e){(function(t){t.parser=function(m,d){return new n(m,d)},t.SAXParser=n,t.SAXStream=f,t.createStream=c,t.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(m,d){if(!(this instanceof n))return new n(m,d);var R=this;o(R),R.q=R.c="",R.bufferCheckPosition=t.MAX_BUFFER_LENGTH,R.opt=d||{},R.opt.lowercase=R.opt.lowercase||R.opt.lowercasetags,R.looseCase=R.opt.lowercase?"toLowerCase":"toUpperCase",R.tags=[],R.closed=R.closedRoot=R.sawRoot=!1,R.tag=R.error=null,R.strict=!!m,R.noscript=!!(m||R.opt.noscript),R.state=y.BEGIN,R.strictEntities=R.opt.strictEntities,R.ENTITIES=R.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),R.attribList=[],R.opt.xmlns&&(R.ns=Object.create(_)),R.opt.unquotedAttributeValues===void 0&&(R.opt.unquotedAttributeValues=!m),R.trackPosition=R.opt.position!==!1,R.trackPosition&&(R.position=R.line=R.column=0),B(R,"onready")}Object.create||(Object.create=function(m){function d(){}d.prototype=m;var R=new d;return R}),Object.keys||(Object.keys=function(m){var d=[];for(var R in m)m.hasOwnProperty(R)&&d.push(R);return d});function i(m){for(var d=Math.max(t.MAX_BUFFER_LENGTH,10),R=0,S=0,ee=r.length;S<ee;S++){var ne=m[r[S]].length;if(ne>d)switch(r[S]){case"textNode":z(m);break;case"cdata":H(m,"oncdata",m.cdata),m.cdata="";break;case"script":H(m,"onscript",m.script),m.script="";break;default:C(m,"Max buffer length exceeded: "+r[S])}R=Math.max(R,ne)}var ae=t.MAX_BUFFER_LENGTH-R;m.bufferCheckPosition=ae+m.position}function o(m){for(var d=0,R=r.length;d<R;d++)m[r[d]]=""}function s(m){z(m),m.cdata!==""&&(H(m,"oncdata",m.cdata),m.cdata=""),m.script!==""&&(H(m,"onscript",m.script),m.script="")}n.prototype={end:function(){N(this)},write:Ge,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var a;try{a=require("stream").Stream}catch{a=function(){}}a||(a=function(){});var l=t.EVENTS.filter(function(m){return m!=="error"&&m!=="end"});function c(m,d){return new f(m,d)}function f(m,d){if(!(this instanceof f))return new f(m,d);a.apply(this),this._parser=new n(m,d),this.writable=!0,this.readable=!0;var R=this;this._parser.onend=function(){R.emit("end")},this._parser.onerror=function(S){R.emit("error",S),R._parser.error=null},this._decoder=null,l.forEach(function(S){Object.defineProperty(R,"on"+S,{get:function(){return R._parser["on"+S]},set:function(ee){if(!ee)return R.removeAllListeners(S),R._parser["on"+S]=ee,ee;R.on(S,ee)},enumerable:!0,configurable:!1})})}f.prototype=Object.create(a.prototype,{constructor:{value:f}}),f.prototype.write=function(m){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(m)){if(!this._decoder){var d=_d.StringDecoder;this._decoder=new d("utf8")}m=this._decoder.write(m)}return this._parser.write(m.toString()),this.emit("data",m),!0},f.prototype.end=function(m){return m&&m.length&&this.write(m),this._parser.end(),!0},f.prototype.on=function(m,d){var R=this;return!R._parser["on"+m]&&l.indexOf(m)!==-1&&(R._parser["on"+m]=function(){var S=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);S.splice(0,0,m),R.emit.apply(R,S)}),a.prototype.on.call(R,m,d)};var u="[CDATA[",h="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",_={xml:p,xmlns:E},v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,T=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function k(m){return m===" "||m===`
`||m==="\r"||m==="	"}function U(m){return m==='"'||m==="'"}function A(m){return m===">"||k(m)}function $(m,d){return m.test(d)}function D(m,d){return!$(m,d)}var y=0;t.STATE={BEGIN:y++,BEGIN_WHITESPACE:y++,TEXT:y++,TEXT_ENTITY:y++,OPEN_WAKA:y++,SGML_DECL:y++,SGML_DECL_QUOTED:y++,DOCTYPE:y++,DOCTYPE_QUOTED:y++,DOCTYPE_DTD:y++,DOCTYPE_DTD_QUOTED:y++,COMMENT_STARTING:y++,COMMENT:y++,COMMENT_ENDING:y++,COMMENT_ENDED:y++,CDATA:y++,CDATA_ENDING:y++,CDATA_ENDING_2:y++,PROC_INST:y++,PROC_INST_BODY:y++,PROC_INST_ENDING:y++,OPEN_TAG:y++,OPEN_TAG_SLASH:y++,ATTRIB:y++,ATTRIB_NAME:y++,ATTRIB_NAME_SAW_WHITE:y++,ATTRIB_VALUE:y++,ATTRIB_VALUE_QUOTED:y++,ATTRIB_VALUE_CLOSED:y++,ATTRIB_VALUE_UNQUOTED:y++,ATTRIB_VALUE_ENTITY_Q:y++,ATTRIB_VALUE_ENTITY_U:y++,CLOSE_TAG:y++,CLOSE_TAG_SAW_WHITE:y++,SCRIPT:y++,SCRIPT_ENDING:y++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(m){var d=t.ENTITIES[m],R=typeof d=="number"?String.fromCharCode(d):d;t.ENTITIES[m]=R});for(var j in t.STATE)t.STATE[t.STATE[j]]=j;y=t.STATE;function B(m,d,R){m[d]&&m[d](R)}function H(m,d,R){m.textNode&&z(m),B(m,d,R)}function z(m){m.textNode=P(m.opt,m.textNode),m.textNode&&B(m,"ontext",m.textNode),m.textNode=""}function P(m,d){return m.trim&&(d=d.trim()),m.normalize&&(d=d.replace(/\s+/g," ")),d}function C(m,d){return z(m),m.trackPosition&&(d+=`
Line: `+m.line+`
Column: `+m.column+`
Char: `+m.c),d=new Error(d),m.error=d,B(m,"onerror",d),m}function N(m){return m.sawRoot&&!m.closedRoot&&O(m,"Unclosed root tag"),m.state!==y.BEGIN&&m.state!==y.BEGIN_WHITESPACE&&m.state!==y.TEXT&&C(m,"Unexpected end"),z(m),m.c="",m.closed=!0,B(m,"onend"),n.call(m,m.strict,m.opt),m}function O(m,d){if(typeof m!="object"||!(m instanceof n))throw new Error("bad call to strictFail");m.strict&&C(m,d)}function L(m){m.strict||(m.tagName=m.tagName[m.looseCase]());var d=m.tags[m.tags.length-1]||m,R=m.tag={name:m.tagName,attributes:{}};m.opt.xmlns&&(R.ns=d.ns),m.attribList.length=0,H(m,"onopentagstart",R)}function F(m,d){var R=m.indexOf(":"),S=R<0?["",m]:m.split(":"),ee=S[0],ne=S[1];return d&&m==="xmlns"&&(ee="xmlns",ne=""),{prefix:ee,local:ne}}function G(m){if(m.strict||(m.attribName=m.attribName[m.looseCase]()),m.attribList.indexOf(m.attribName)!==-1||m.tag.attributes.hasOwnProperty(m.attribName)){m.attribName=m.attribValue="";return}if(m.opt.xmlns){var d=F(m.attribName,!0),R=d.prefix,S=d.local;if(R==="xmlns")if(S==="xml"&&m.attribValue!==p)O(m,"xml: prefix must be bound to "+p+`
Actual: `+m.attribValue);else if(S==="xmlns"&&m.attribValue!==E)O(m,"xmlns: prefix must be bound to "+E+`
Actual: `+m.attribValue);else{var ee=m.tag,ne=m.tags[m.tags.length-1]||m;ee.ns===ne.ns&&(ee.ns=Object.create(ne.ns)),ee.ns[S]=m.attribValue}m.attribList.push([m.attribName,m.attribValue])}else m.tag.attributes[m.attribName]=m.attribValue,H(m,"onattribute",{name:m.attribName,value:m.attribValue});m.attribName=m.attribValue=""}function Y(m,d){if(m.opt.xmlns){var R=m.tag,S=F(m.tagName);R.prefix=S.prefix,R.local=S.local,R.uri=R.ns[S.prefix]||"",R.prefix&&!R.uri&&(O(m,"Unbound namespace prefix: "+JSON.stringify(m.tagName)),R.uri=S.prefix);var ee=m.tags[m.tags.length-1]||m;R.ns&&ee.ns!==R.ns&&Object.keys(R.ns).forEach(function(zr){H(m,"onopennamespace",{prefix:zr,uri:R.ns[zr]})});for(var ne=0,ae=m.attribList.length;ne<ae;ne++){var ge=m.attribList[ne],we=ge[0],et=ge[1],ue=F(we,!0),Ue=ue.prefix,oi=ue.local,Vr=Ue===""?"":R.ns[Ue]||"",er={name:we,value:et,prefix:Ue,local:oi,uri:Vr};Ue&&Ue!=="xmlns"&&!Vr&&(O(m,"Unbound namespace prefix: "+JSON.stringify(Ue)),er.uri=Ue),m.tag.attributes[we]=er,H(m,"onattribute",er)}m.attribList.length=0}m.tag.isSelfClosing=!!d,m.sawRoot=!0,m.tags.push(m.tag),H(m,"onopentag",m.tag),d||(!m.noscript&&m.tagName.toLowerCase()==="script"?m.state=y.SCRIPT:m.state=y.TEXT,m.tag=null,m.tagName=""),m.attribName=m.attribValue="",m.attribList.length=0}function V(m){if(!m.tagName){O(m,"Weird empty close tag."),m.textNode+="</>",m.state=y.TEXT;return}if(m.script){if(m.tagName!=="script"){m.script+="</"+m.tagName+">",m.tagName="",m.state=y.SCRIPT;return}H(m,"onscript",m.script),m.script=""}var d=m.tags.length,R=m.tagName;m.strict||(R=R[m.looseCase]());for(var S=R;d--;){var ee=m.tags[d];if(ee.name!==S)O(m,"Unexpected close tag");else break}if(d<0){O(m,"Unmatched closing tag: "+m.tagName),m.textNode+="</"+m.tagName+">",m.state=y.TEXT;return}m.tagName=R;for(var ne=m.tags.length;ne-- >d;){var ae=m.tag=m.tags.pop();m.tagName=m.tag.name,H(m,"onclosetag",m.tagName);var ge={};for(var we in ae.ns)ge[we]=ae.ns[we];var et=m.tags[m.tags.length-1]||m;m.opt.xmlns&&ae.ns!==et.ns&&Object.keys(ae.ns).forEach(function(ue){var Ue=ae.ns[ue];H(m,"onclosenamespace",{prefix:ue,uri:Ue})})}d===0&&(m.closedRoot=!0),m.tagName=m.attribValue=m.attribName="",m.attribList.length=0,m.state=y.TEXT}function K(m){var d=m.entity,R=d.toLowerCase(),S,ee="";return m.ENTITIES[d]?m.ENTITIES[d]:m.ENTITIES[R]?m.ENTITIES[R]:(d=R,d.charAt(0)==="#"&&(d.charAt(1)==="x"?(d=d.slice(2),S=parseInt(d,16),ee=S.toString(16)):(d=d.slice(1),S=parseInt(d,10),ee=S.toString(10))),d=d.replace(/^0+/,""),isNaN(S)||ee.toLowerCase()!==d?(O(m,"Invalid character entity"),"&"+m.entity+";"):String.fromCodePoint(S))}function fe(m,d){d==="<"?(m.state=y.OPEN_WAKA,m.startTagPosition=m.position):k(d)||(O(m,"Non-whitespace before first tag."),m.textNode=d,m.state=y.TEXT)}function W(m,d){var R="";return d<m.length&&(R=m.charAt(d)),R}function Ge(m){var d=this;if(this.error)throw this.error;if(d.closed)return C(d,"Cannot write after close. Assign an onready handler.");if(m===null)return N(d);typeof m=="object"&&(m=m.toString());for(var R=0,S="";S=W(m,R++),d.c=S,!!S;)switch(d.trackPosition&&(d.position++,S===`
`?(d.line++,d.column=0):d.column++),d.state){case y.BEGIN:if(d.state=y.BEGIN_WHITESPACE,S==="\uFEFF")continue;fe(d,S);continue;case y.BEGIN_WHITESPACE:fe(d,S);continue;case y.TEXT:if(d.sawRoot&&!d.closedRoot){for(var ee=R-1;S&&S!=="<"&&S!=="&";)S=W(m,R++),S&&d.trackPosition&&(d.position++,S===`
`?(d.line++,d.column=0):d.column++);d.textNode+=m.substring(ee,R-1)}S==="<"&&!(d.sawRoot&&d.closedRoot&&!d.strict)?(d.state=y.OPEN_WAKA,d.startTagPosition=d.position):(!k(S)&&(!d.sawRoot||d.closedRoot)&&O(d,"Text data outside of root node."),S==="&"?d.state=y.TEXT_ENTITY:d.textNode+=S);continue;case y.SCRIPT:S==="<"?d.state=y.SCRIPT_ENDING:d.script+=S;continue;case y.SCRIPT_ENDING:S==="/"?d.state=y.CLOSE_TAG:(d.script+="<"+S,d.state=y.SCRIPT);continue;case y.OPEN_WAKA:if(S==="!")d.state=y.SGML_DECL,d.sgmlDecl="";else if(!k(S))if($(v,S))d.state=y.OPEN_TAG,d.tagName=S;else if(S==="/")d.state=y.CLOSE_TAG,d.tagName="";else if(S==="?")d.state=y.PROC_INST,d.procInstName=d.procInstBody="";else{if(O(d,"Unencoded <"),d.startTagPosition+1<d.position){var ne=d.position-d.startTagPosition;S=new Array(ne).join(" ")+S}d.textNode+="<"+S,d.state=y.TEXT}continue;case y.SGML_DECL:if(d.sgmlDecl+S==="--"){d.state=y.COMMENT,d.comment="",d.sgmlDecl="";continue}d.doctype&&d.doctype!==!0&&d.sgmlDecl?(d.state=y.DOCTYPE_DTD,d.doctype+="<!"+d.sgmlDecl+S,d.sgmlDecl=""):(d.sgmlDecl+S).toUpperCase()===u?(H(d,"onopencdata"),d.state=y.CDATA,d.sgmlDecl="",d.cdata=""):(d.sgmlDecl+S).toUpperCase()===h?(d.state=y.DOCTYPE,(d.doctype||d.sawRoot)&&O(d,"Inappropriately located doctype declaration"),d.doctype="",d.sgmlDecl=""):S===">"?(H(d,"onsgmldeclaration",d.sgmlDecl),d.sgmlDecl="",d.state=y.TEXT):(U(S)&&(d.state=y.SGML_DECL_QUOTED),d.sgmlDecl+=S);continue;case y.SGML_DECL_QUOTED:S===d.q&&(d.state=y.SGML_DECL,d.q=""),d.sgmlDecl+=S;continue;case y.DOCTYPE:S===">"?(d.state=y.TEXT,H(d,"ondoctype",d.doctype),d.doctype=!0):(d.doctype+=S,S==="["?d.state=y.DOCTYPE_DTD:U(S)&&(d.state=y.DOCTYPE_QUOTED,d.q=S));continue;case y.DOCTYPE_QUOTED:d.doctype+=S,S===d.q&&(d.q="",d.state=y.DOCTYPE);continue;case y.DOCTYPE_DTD:S==="]"?(d.doctype+=S,d.state=y.DOCTYPE):S==="<"?(d.state=y.OPEN_WAKA,d.startTagPosition=d.position):U(S)?(d.doctype+=S,d.state=y.DOCTYPE_DTD_QUOTED,d.q=S):d.doctype+=S;continue;case y.DOCTYPE_DTD_QUOTED:d.doctype+=S,S===d.q&&(d.state=y.DOCTYPE_DTD,d.q="");continue;case y.COMMENT:S==="-"?d.state=y.COMMENT_ENDING:d.comment+=S;continue;case y.COMMENT_ENDING:S==="-"?(d.state=y.COMMENT_ENDED,d.comment=P(d.opt,d.comment),d.comment&&H(d,"oncomment",d.comment),d.comment=""):(d.comment+="-"+S,d.state=y.COMMENT);continue;case y.COMMENT_ENDED:S!==">"?(O(d,"Malformed comment"),d.comment+="--"+S,d.state=y.COMMENT):d.doctype&&d.doctype!==!0?d.state=y.DOCTYPE_DTD:d.state=y.TEXT;continue;case y.CDATA:S==="]"?d.state=y.CDATA_ENDING:d.cdata+=S;continue;case y.CDATA_ENDING:S==="]"?d.state=y.CDATA_ENDING_2:(d.cdata+="]"+S,d.state=y.CDATA);continue;case y.CDATA_ENDING_2:S===">"?(d.cdata&&H(d,"oncdata",d.cdata),H(d,"onclosecdata"),d.cdata="",d.state=y.TEXT):S==="]"?d.cdata+="]":(d.cdata+="]]"+S,d.state=y.CDATA);continue;case y.PROC_INST:S==="?"?d.state=y.PROC_INST_ENDING:k(S)?d.state=y.PROC_INST_BODY:d.procInstName+=S;continue;case y.PROC_INST_BODY:if(!d.procInstBody&&k(S))continue;S==="?"?d.state=y.PROC_INST_ENDING:d.procInstBody+=S;continue;case y.PROC_INST_ENDING:S===">"?(H(d,"onprocessinginstruction",{name:d.procInstName,body:d.procInstBody}),d.procInstName=d.procInstBody="",d.state=y.TEXT):(d.procInstBody+="?"+S,d.state=y.PROC_INST_BODY);continue;case y.OPEN_TAG:$(b,S)?d.tagName+=S:(L(d),S===">"?Y(d):S==="/"?d.state=y.OPEN_TAG_SLASH:(k(S)||O(d,"Invalid character in tag name"),d.state=y.ATTRIB));continue;case y.OPEN_TAG_SLASH:S===">"?(Y(d,!0),V(d)):(O(d,"Forward-slash in opening tag not followed by >"),d.state=y.ATTRIB);continue;case y.ATTRIB:if(k(S))continue;S===">"?Y(d):S==="/"?d.state=y.OPEN_TAG_SLASH:$(v,S)?(d.attribName=S,d.attribValue="",d.state=y.ATTRIB_NAME):O(d,"Invalid attribute name");continue;case y.ATTRIB_NAME:S==="="?d.state=y.ATTRIB_VALUE:S===">"?(O(d,"Attribute without value"),d.attribValue=d.attribName,G(d),Y(d)):k(S)?d.state=y.ATTRIB_NAME_SAW_WHITE:$(b,S)?d.attribName+=S:O(d,"Invalid attribute name");continue;case y.ATTRIB_NAME_SAW_WHITE:if(S==="=")d.state=y.ATTRIB_VALUE;else{if(k(S))continue;O(d,"Attribute without value"),d.tag.attributes[d.attribName]="",d.attribValue="",H(d,"onattribute",{name:d.attribName,value:""}),d.attribName="",S===">"?Y(d):$(v,S)?(d.attribName=S,d.state=y.ATTRIB_NAME):(O(d,"Invalid attribute name"),d.state=y.ATTRIB)}continue;case y.ATTRIB_VALUE:if(k(S))continue;U(S)?(d.q=S,d.state=y.ATTRIB_VALUE_QUOTED):(d.opt.unquotedAttributeValues||C(d,"Unquoted attribute value"),d.state=y.ATTRIB_VALUE_UNQUOTED,d.attribValue=S);continue;case y.ATTRIB_VALUE_QUOTED:if(S!==d.q){S==="&"?d.state=y.ATTRIB_VALUE_ENTITY_Q:d.attribValue+=S;continue}G(d),d.q="",d.state=y.ATTRIB_VALUE_CLOSED;continue;case y.ATTRIB_VALUE_CLOSED:k(S)?d.state=y.ATTRIB:S===">"?Y(d):S==="/"?d.state=y.OPEN_TAG_SLASH:$(v,S)?(O(d,"No whitespace between attributes"),d.attribName=S,d.attribValue="",d.state=y.ATTRIB_NAME):O(d,"Invalid attribute name");continue;case y.ATTRIB_VALUE_UNQUOTED:if(!A(S)){S==="&"?d.state=y.ATTRIB_VALUE_ENTITY_U:d.attribValue+=S;continue}G(d),S===">"?Y(d):d.state=y.ATTRIB;continue;case y.CLOSE_TAG:if(d.tagName)S===">"?V(d):$(b,S)?d.tagName+=S:d.script?(d.script+="</"+d.tagName,d.tagName="",d.state=y.SCRIPT):(k(S)||O(d,"Invalid tagname in closing tag"),d.state=y.CLOSE_TAG_SAW_WHITE);else{if(k(S))continue;D(v,S)?d.script?(d.script+="</"+S,d.state=y.SCRIPT):O(d,"Invalid tagname in closing tag."):d.tagName=S}continue;case y.CLOSE_TAG_SAW_WHITE:if(k(S))continue;S===">"?V(d):O(d,"Invalid characters in closing tag");continue;case y.TEXT_ENTITY:case y.ATTRIB_VALUE_ENTITY_Q:case y.ATTRIB_VALUE_ENTITY_U:var ae,ge;switch(d.state){case y.TEXT_ENTITY:ae=y.TEXT,ge="textNode";break;case y.ATTRIB_VALUE_ENTITY_Q:ae=y.ATTRIB_VALUE_QUOTED,ge="attribValue";break;case y.ATTRIB_VALUE_ENTITY_U:ae=y.ATTRIB_VALUE_UNQUOTED,ge="attribValue";break}if(S===";"){var we=K(d);d.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(we)?(d.entity="",d.state=ae,d.write(we)):(d[ge]+=we,d.entity="",d.state=ae)}else $(d.entity.length?x:T,S)?d.entity+=S:(O(d,"Invalid character in entity name"),d[ge]+="&"+d.entity+S,d.entity="",d.state=ae);continue;default:throw new Error(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&i(d),d}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var m=String.fromCharCode,d=Math.floor,R=function(){var S=16384,ee=[],ne,ae,ge=-1,we=arguments.length;if(!we)return"";for(var et="";++ge<we;){var ue=Number(arguments[ge]);if(!isFinite(ue)||ue<0||ue>1114111||d(ue)!==ue)throw RangeError("Invalid code point: "+ue);ue<=65535?ee.push(ue):(ue-=65536,ne=(ue>>10)+55296,ae=ue%1024+56320,ee.push(ne,ae)),(ge+1===we||ee.length>S)&&(et+=m.apply(null,ee),ee.length=0)}return et};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:R,configurable:!0,writable:!0}):String.fromCodePoint=R}()})(e)})(pc);Object.defineProperty(Lr,"__esModule",{value:!0});Lr.XElement=void 0;Lr.parseXml=bh;const _h=pc,on=Xt;class mc{constructor(t){if(this.name=t,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!t)throw(0,on.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!Ah(t))throw(0,on.newError)(`Invalid element name: ${t}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(t){const r=this.attributes===null?null:this.attributes[t];if(r==null)throw(0,on.newError)(`No attribute "${t}"`,"ERR_XML_MISSED_ATTRIBUTE");return r}removeAttribute(t){this.attributes!==null&&delete this.attributes[t]}element(t,r=!1,n=null){const i=this.elementOrNull(t,r);if(i===null)throw(0,on.newError)(n||`No element "${t}"`,"ERR_XML_MISSED_ELEMENT");return i}elementOrNull(t,r=!1){if(this.elements===null)return null;for(const n of this.elements)if(fa(n,t,r))return n;return null}getElements(t,r=!1){return this.elements===null?[]:this.elements.filter(n=>fa(n,t,r))}elementValueOrEmpty(t,r=!1){const n=this.elementOrNull(t,r);return n===null?"":n.value}}Lr.XElement=mc;const Sh=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function Ah(e){return Sh.test(e)}function fa(e,t,r){const n=e.name;return n===t||r===!0&&n.length===t.length&&n.toLowerCase()===t.toLowerCase()}function bh(e){let t=null;const r=_h.parser(!0,{}),n=[];return r.onopentag=i=>{const o=new mc(i.name);if(o.attributes=i.attributes,t===null)t=o;else{const s=n[n.length-1];s.elements==null&&(s.elements=[]),s.elements.push(o)}n.push(o)},r.onclosetag=()=>{n.pop()},r.ontext=i=>{n.length>0&&(n[n.length-1].value=i)},r.oncdata=i=>{const o=n[n.length-1];o.value=i,o.isCData=!0},r.onerror=i=>{throw i},r.write(e),t}var kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.MemoLazy=void 0;class Th{constructor(t,r){this.selector=t,this.creator=r,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const t=this.selector();if(this._value!==void 0&&gc(this.selected,t))return this._value;this.selected=t;const r=this.creator(t);return this.value=r,r}set value(t){this._value=t}}kn.MemoLazy=Th;function gc(e,t){if(typeof e=="object"&&e!==null&&(typeof t=="object"&&t!==null)){const i=Object.keys(e),o=Object.keys(t);return i.length===o.length&&i.every(s=>gc(e[s],t[s]))}return e===t}var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.retry=yc;const Ch=ut;async function yc(e,t,r,n=0,i=0,o){var s;const a=new Ch.CancellationToken;try{return await e()}catch(l){if((!((s=o==null?void 0:o(l))!==null&&s!==void 0)||s)&&t>0&&!a.cancelled)return await new Promise(c=>setTimeout(c,r+n*i)),await yc(e,t-1,r,n,i+1,o);throw l}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.retry=e.MemoLazy=e.newError=e.XElement=e.parseXml=e.ProgressCallbackTransform=e.UUID=e.parseDn=e.githubUrl=e.getS3LikeProviderBaseUrl=e.configureRequestUrl=e.parseJson=e.safeStringifyJson=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.safeGetHeader=e.DigestTransform=e.HttpExecutor=e.createHttpError=e.HttpError=e.CancellationError=e.CancellationToken=void 0,e.asArray=u;var t=ut;Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}}),Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return t.CancellationError}});var r=be;Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return r.HttpError}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return r.createHttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return r.HttpExecutor}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return r.DigestTransform}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return r.safeGetHeader}}),Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return r.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return r.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return r.safeStringifyJson}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return r.parseJson}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return r.configureRequestUrl}});var n=Un;Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return n.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return n.githubUrl}});var i=xo;Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return i.parseDn}});var o=Gt;Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return o.UUID}});var s=xr;Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return s.ProgressCallbackTransform}});var a=Lr;Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return a.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return a.XElement}});var l=Xt;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return l.newError}});var c=kn;Object.defineProperty(e,"MemoLazy",{enumerable:!0,get:function(){return c.MemoLazy}});var f=Lo;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return f.retry}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function u(h){return h==null?[]:Array.isArray(h)?h:[h]}})(pe);var Ot={},Ce={};Ce.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,o)=>i!=null?n(i):r(o)),e.apply(this,t)})},"name",{value:e.name})};Ce.fromPromise=function(e){return Object.defineProperty(function(...t){const r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})};var it=Sd,Oh=process.cwd,En=null,$h=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return En||(En=Oh.call(process)),En};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var da=process.chdir;process.chdir=function(e){En=null,da.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,da)}var Rh=Ih;function Ih(e){it.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(f,u,h){h&&process.nextTick(h)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(f,u,h,p){p&&process.nextTick(p)},e.lchownSync=function(){}),$h==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(f){function u(h,p,E){var _=Date.now(),v=0;f(h,p,function b(T){if(T&&(T.code==="EACCES"||T.code==="EPERM"||T.code==="EBUSY")&&Date.now()-_<6e4){setTimeout(function(){e.stat(p,function(x,k){x&&x.code==="ENOENT"?f(h,p,b):E(T)})},v),v<100&&(v+=10);return}E&&E(T)})}return Object.setPrototypeOf&&Object.setPrototypeOf(u,f),u}(e.rename)),e.read=typeof e.read!="function"?e.read:function(f){function u(h,p,E,_,v,b){var T;if(b&&typeof b=="function"){var x=0;T=function(k,U,A){if(k&&k.code==="EAGAIN"&&x<10)return x++,f.call(e,h,p,E,_,v,T);b.apply(this,arguments)}}return f.call(e,h,p,E,_,v,T)}return Object.setPrototypeOf&&Object.setPrototypeOf(u,f),u}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(f){return function(u,h,p,E,_){for(var v=0;;)try{return f.call(e,u,h,p,E,_)}catch(b){if(b.code==="EAGAIN"&&v<10){v++;continue}throw b}}}(e.readSync);function t(f){f.lchmod=function(u,h,p){f.open(u,it.O_WRONLY|it.O_SYMLINK,h,function(E,_){if(E){p&&p(E);return}f.fchmod(_,h,function(v){f.close(_,function(b){p&&p(v||b)})})})},f.lchmodSync=function(u,h){var p=f.openSync(u,it.O_WRONLY|it.O_SYMLINK,h),E=!0,_;try{_=f.fchmodSync(p,h),E=!1}finally{if(E)try{f.closeSync(p)}catch{}else f.closeSync(p)}return _}}function r(f){it.hasOwnProperty("O_SYMLINK")&&f.futimes?(f.lutimes=function(u,h,p,E){f.open(u,it.O_SYMLINK,function(_,v){if(_){E&&E(_);return}f.futimes(v,h,p,function(b){f.close(v,function(T){E&&E(b||T)})})})},f.lutimesSync=function(u,h,p){var E=f.openSync(u,it.O_SYMLINK),_,v=!0;try{_=f.futimesSync(E,h,p),v=!1}finally{if(v)try{f.closeSync(E)}catch{}else f.closeSync(E)}return _}):f.futimes&&(f.lutimes=function(u,h,p,E){E&&process.nextTick(E)},f.lutimesSync=function(){})}function n(f){return f&&function(u,h,p){return f.call(e,u,h,function(E){c(E)&&(E=null),p&&p.apply(this,arguments)})}}function i(f){return f&&function(u,h){try{return f.call(e,u,h)}catch(p){if(!c(p))throw p}}}function o(f){return f&&function(u,h,p,E){return f.call(e,u,h,p,function(_){c(_)&&(_=null),E&&E.apply(this,arguments)})}}function s(f){return f&&function(u,h,p){try{return f.call(e,u,h,p)}catch(E){if(!c(E))throw E}}}function a(f){return f&&function(u,h,p){typeof h=="function"&&(p=h,h=null);function E(_,v){v&&(v.uid<0&&(v.uid+=4294967296),v.gid<0&&(v.gid+=4294967296)),p&&p.apply(this,arguments)}return h?f.call(e,u,h,E):f.call(e,u,E)}}function l(f){return f&&function(u,h){var p=h?f.call(e,u,h):f.call(e,u);return p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),p}}function c(f){if(!f||f.code==="ENOSYS")return!0;var u=!process.getuid||process.getuid()!==0;return!!(u&&(f.code==="EINVAL"||f.code==="EPERM"))}}var ha=Nr.Stream,Ph=Dh;function Dh(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);ha.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,l=s.length;a<l;a++){var c=s[a];this[c]=i[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(f,u){if(f){o.emit("error",f),o.readable=!1;return}o.fd=u,o.emit("open",u),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);ha.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var l=o[s];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Nh=xh,Fh=Object.getPrototypeOf||function(e){return e.__proto__};function xh(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Fh(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}var oe=Ne,Lh=Rh,Uh=Ph,kh=Nh,sn=Fn,Ee,Tn;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Ee=Symbol.for("graceful-fs.queue"),Tn=Symbol.for("graceful-fs.previous")):(Ee="___graceful-fs.queue",Tn="___graceful-fs.previous");function Mh(){}function Ec(e,t){Object.defineProperty(e,Ee,{get:function(){return t}})}var bt=Mh;sn.debuglog?bt=sn.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(bt=function(){var e=sn.format.apply(sn,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});if(!oe[Ee]){var jh=je[Ee]||[];Ec(oe,jh),oe.close=function(e){function t(r,n){return e.call(oe,r,function(i){i||pa(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Tn,{value:e}),t}(oe.close),oe.closeSync=function(e){function t(r){e.apply(oe,arguments),pa()}return Object.defineProperty(t,Tn,{value:e}),t}(oe.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){bt(oe[Ee]),Zl.equal(oe[Ee].length,0)})}je[Ee]||Ec(je,oe[Ee]);var Oe=Uo(kh(oe));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!oe.__patched&&(Oe=Uo(oe),oe.__patched=!0);function Uo(e){Lh(e),e.gracefulify=Uo,e.createReadStream=U,e.createWriteStream=A;var t=e.readFile;e.readFile=r;function r(y,j,B){return typeof j=="function"&&(B=j,j=null),H(y,j,B);function H(z,P,C,N){return t(z,P,function(O){O&&(O.code==="EMFILE"||O.code==="ENFILE")?Pt([H,[z,P,C],O,N||Date.now(),Date.now()]):typeof C=="function"&&C.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(y,j,B,H){return typeof B=="function"&&(H=B,B=null),z(y,j,B,H);function z(P,C,N,O,L){return n(P,C,N,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?Pt([z,[P,C,N,O],F,L||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=s);function s(y,j,B,H){return typeof B=="function"&&(H=B,B=null),z(y,j,B,H);function z(P,C,N,O,L){return o(P,C,N,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?Pt([z,[P,C,N,O],F,L||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=l);function l(y,j,B,H){return typeof B=="function"&&(H=B,B=0),z(y,j,B,H);function z(P,C,N,O,L){return a(P,C,N,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?Pt([z,[P,C,N,O],F,L||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var c=e.readdir;e.readdir=u;var f=/^v[0-5]\./;function u(y,j,B){typeof j=="function"&&(B=j,j=null);var H=f.test(process.version)?function(C,N,O,L){return c(C,z(C,N,O,L))}:function(C,N,O,L){return c(C,N,z(C,N,O,L))};return H(y,j,B);function z(P,C,N,O){return function(L,F){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Pt([H,[P,C,N],L,O||Date.now(),Date.now()]):(F&&F.sort&&F.sort(),typeof N=="function"&&N.call(this,L,F))}}}if(process.version.substr(0,4)==="v0.8"){var h=Uh(e);b=h.ReadStream,x=h.WriteStream}var p=e.ReadStream;p&&(b.prototype=Object.create(p.prototype),b.prototype.open=T);var E=e.WriteStream;E&&(x.prototype=Object.create(E.prototype),x.prototype.open=k),Object.defineProperty(e,"ReadStream",{get:function(){return b},set:function(y){b=y},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return x},set:function(y){x=y},enumerable:!0,configurable:!0});var _=b;Object.defineProperty(e,"FileReadStream",{get:function(){return _},set:function(y){_=y},enumerable:!0,configurable:!0});var v=x;Object.defineProperty(e,"FileWriteStream",{get:function(){return v},set:function(y){v=y},enumerable:!0,configurable:!0});function b(y,j){return this instanceof b?(p.apply(this,arguments),this):b.apply(Object.create(b.prototype),arguments)}function T(){var y=this;D(y.path,y.flags,y.mode,function(j,B){j?(y.autoClose&&y.destroy(),y.emit("error",j)):(y.fd=B,y.emit("open",B),y.read())})}function x(y,j){return this instanceof x?(E.apply(this,arguments),this):x.apply(Object.create(x.prototype),arguments)}function k(){var y=this;D(y.path,y.flags,y.mode,function(j,B){j?(y.destroy(),y.emit("error",j)):(y.fd=B,y.emit("open",B))})}function U(y,j){return new e.ReadStream(y,j)}function A(y,j){return new e.WriteStream(y,j)}var $=e.open;e.open=D;function D(y,j,B,H){return typeof B=="function"&&(H=B,B=null),z(y,j,B,H);function z(P,C,N,O,L){return $(P,C,N,function(F,G){F&&(F.code==="EMFILE"||F.code==="ENFILE")?Pt([z,[P,C,N,O],F,L||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}return e}function Pt(e){bt("ENQUEUE",e[0].name,e[1]),oe[Ee].push(e),ko()}var an;function pa(){for(var e=Date.now(),t=0;t<oe[Ee].length;++t)oe[Ee][t].length>2&&(oe[Ee][t][3]=e,oe[Ee][t][4]=e);ko()}function ko(){if(clearTimeout(an),an=void 0,oe[Ee].length!==0){var e=oe[Ee].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)bt("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){bt("TIMEOUT",t.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,l=Math.max(o-i,1),c=Math.min(l*1.2,100);a>=c?(bt("RETRY",t.name,r),t.apply(null,r.concat([i]))):oe[Ee].push(e)}an===void 0&&(an=setTimeout(ko,0))}}(function(e){const t=Ce.fromCallback,r=Oe,n=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof r[i]=="function");Object.assign(e,r),n.forEach(i=>{e[i]=t(r[i])}),e.exists=function(i,o){return typeof o=="function"?r.exists(i,o):new Promise(s=>r.exists(i,s))},e.read=function(i,o,s,a,l,c){return typeof c=="function"?r.read(i,o,s,a,l,c):new Promise((f,u)=>{r.read(i,o,s,a,l,(h,p,E)=>{if(h)return u(h);f({bytesRead:p,buffer:E})})})},e.write=function(i,o,...s){return typeof s[s.length-1]=="function"?r.write(i,o,...s):new Promise((a,l)=>{r.write(i,o,...s,(c,f,u)=>{if(c)return l(c);a({bytesWritten:f,buffer:u})})})},typeof r.writev=="function"&&(e.writev=function(i,o,...s){return typeof s[s.length-1]=="function"?r.writev(i,o,...s):new Promise((a,l)=>{r.writev(i,o,...s,(c,f,u)=>{if(c)return l(c);a({bytesWritten:f,buffers:u})})})}),typeof r.realpath.native=="function"?e.realpath.native=t(r.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Ot);var Mo={},vc={};const Bh=Z;vc.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Bh.parse(t).root,""))){const n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}};const wc=Ot,{checkPath:_c}=vc,Sc=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Mo.makeDir=async(e,t)=>(_c(e),wc.mkdir(e,{mode:Sc(t),recursive:!0}));Mo.makeDirSync=(e,t)=>(_c(e),wc.mkdirSync(e,{mode:Sc(t),recursive:!0}));const qh=Ce.fromPromise,{makeDir:Hh,makeDirSync:Vi}=Mo,zi=qh(Hh);var Ye={mkdirs:zi,mkdirsSync:Vi,mkdirp:zi,mkdirpSync:Vi,ensureDir:zi,ensureDirSync:Vi};const Gh=Ce.fromPromise,Ac=Ot;function Wh(e){return Ac.access(e).then(()=>!0).catch(()=>!1)}var $t={pathExists:Gh(Wh),pathExistsSync:Ac.existsSync};const Ht=Oe;function Vh(e,t,r,n){Ht.open(e,"r+",(i,o)=>{if(i)return n(i);Ht.futimes(o,t,r,s=>{Ht.close(o,a=>{n&&n(s||a)})})})}function zh(e,t,r){const n=Ht.openSync(e,"r+");return Ht.futimesSync(n,t,r),Ht.closeSync(n)}var bc={utimesMillis:Vh,utimesMillisSync:zh};const Wt=Ot,he=Z,Yh=Fn;function Xh(e,t,r){const n=r.dereference?i=>Wt.stat(i,{bigint:!0}):i=>Wt.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function Jh(e,t,r){let n;const i=r.dereference?s=>Wt.statSync(s,{bigint:!0}):s=>Wt.lstatSync(s,{bigint:!0}),o=i(e);try{n=i(t)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:n}}function Kh(e,t,r,n,i){Yh.callbackify(Xh)(e,t,n,(o,s)=>{if(o)return i(o);const{srcStat:a,destStat:l}=s;if(l){if(Ur(a,l)){const c=he.basename(e),f=he.basename(t);return r==="move"&&c!==f&&c.toLowerCase()===f.toLowerCase()?i(null,{srcStat:a,destStat:l,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!l.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!a.isDirectory()&&l.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return a.isDirectory()&&jo(e,t)?i(new Error(Mn(e,t,r))):i(null,{srcStat:a,destStat:l})})}function Qh(e,t,r,n){const{srcStat:i,destStat:o}=Jh(e,t,n);if(o){if(Ur(i,o)){const s=he.basename(e),a=he.basename(t);if(r==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&jo(e,t))throw new Error(Mn(e,t,r));return{srcStat:i,destStat:o}}function Tc(e,t,r,n,i){const o=he.resolve(he.dirname(e)),s=he.resolve(he.dirname(r));if(s===o||s===he.parse(s).root)return i();Wt.stat(s,{bigint:!0},(a,l)=>a?a.code==="ENOENT"?i():i(a):Ur(t,l)?i(new Error(Mn(e,r,n))):Tc(e,t,s,n,i))}function Cc(e,t,r,n){const i=he.resolve(he.dirname(e)),o=he.resolve(he.dirname(r));if(o===i||o===he.parse(o).root)return;let s;try{s=Wt.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Ur(t,s))throw new Error(Mn(e,r,n));return Cc(e,t,o,n)}function Ur(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function jo(e,t){const r=he.resolve(e).split(he.sep).filter(i=>i),n=he.resolve(t).split(he.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function Mn(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}var Jt={checkPaths:Kh,checkPathsSync:Qh,checkParentPaths:Tc,checkParentPathsSync:Cc,isSrcSubdir:jo,areIdentical:Ur};const Ie=Oe,Sr=Z,Zh=Ye.mkdirs,ep=$t.pathExists,tp=bc.utimesMillis,Ar=Jt;function rp(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Ar.checkPaths(e,t,"copy",r,(i,o)=>{if(i)return n(i);const{srcStat:s,destStat:a}=o;Ar.checkParentPaths(e,s,t,"copy",l=>l?n(l):r.filter?Oc(ma,a,e,t,r,n):ma(a,e,t,r,n))})}function ma(e,t,r,n,i){const o=Sr.dirname(r);ep(o,(s,a)=>{if(s)return i(s);if(a)return Cn(e,t,r,n,i);Zh(o,l=>l?i(l):Cn(e,t,r,n,i))})}function Oc(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?e(t,r,n,i,o):o(),s=>o(s))}function np(e,t,r,n,i){return n.filter?Oc(Cn,e,t,r,n,i):Cn(e,t,r,n,i)}function Cn(e,t,r,n,i){(n.dereference?Ie.stat:Ie.lstat)(t,(s,a)=>s?i(s):a.isDirectory()?up(a,e,t,r,n,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?ip(a,e,t,r,n,i):a.isSymbolicLink()?hp(e,t,r,n,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function ip(e,t,r,n,i,o){return t?op(e,r,n,i,o):$c(e,r,n,i,o)}function op(e,t,r,n,i){if(n.overwrite)Ie.unlink(r,o=>o?i(o):$c(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function $c(e,t,r,n,i){Ie.copyFile(t,r,o=>o?i(o):n.preserveTimestamps?sp(e.mode,t,r,i):jn(r,e.mode,i))}function sp(e,t,r,n){return ap(e)?lp(r,e,i=>i?n(i):ga(e,t,r,n)):ga(e,t,r,n)}function ap(e){return(e&128)===0}function lp(e,t,r){return jn(e,t|128,r)}function ga(e,t,r,n){cp(t,r,i=>i?n(i):jn(r,e,n))}function jn(e,t,r){return Ie.chmod(e,t,r)}function cp(e,t,r){Ie.stat(e,(n,i)=>n?r(n):tp(t,i.atime,i.mtime,r))}function up(e,t,r,n,i,o){return t?Rc(r,n,i,o):fp(e.mode,r,n,i,o)}function fp(e,t,r,n,i){Ie.mkdir(r,o=>{if(o)return i(o);Rc(t,r,n,s=>s?i(s):jn(r,e,i))})}function Rc(e,t,r,n){Ie.readdir(e,(i,o)=>i?n(i):Ic(o,e,t,r,n))}function Ic(e,t,r,n,i){const o=e.pop();return o?dp(e,o,t,r,n,i):i()}function dp(e,t,r,n,i,o){const s=Sr.join(r,t),a=Sr.join(n,t);Ar.checkPaths(s,a,"copy",i,(l,c)=>{if(l)return o(l);const{destStat:f}=c;np(f,s,a,i,u=>u?o(u):Ic(e,r,n,i,o))})}function hp(e,t,r,n,i){Ie.readlink(t,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=Sr.resolve(process.cwd(),s)),e)Ie.readlink(r,(a,l)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?Ie.symlink(s,r,i):i(a):(n.dereference&&(l=Sr.resolve(process.cwd(),l)),Ar.isSrcSubdir(s,l)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&Ar.isSrcSubdir(l,s)?i(new Error(`Cannot overwrite '${l}' with '${s}'.`)):pp(s,r,i)));else return Ie.symlink(s,r,i)})}function pp(e,t,r){Ie.unlink(t,n=>n?r(n):Ie.symlink(e,t,r))}var mp=rp;const Se=Oe,br=Z,gp=Ye.mkdirsSync,yp=bc.utimesMillisSync,Tr=Jt;function Ep(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:n,destStat:i}=Tr.checkPathsSync(e,t,"copy",r);return Tr.checkParentPathsSync(e,n,t,"copy"),vp(i,e,t,r)}function vp(e,t,r,n){if(n.filter&&!n.filter(t,r))return;const i=br.dirname(r);return Se.existsSync(i)||gp(i),Pc(e,t,r,n)}function wp(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return Pc(e,t,r,n)}function Pc(e,t,r,n){const o=(n.dereference?Se.statSync:Se.lstatSync)(t);if(o.isDirectory())return Op(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return _p(o,e,t,r,n);if(o.isSymbolicLink())return Ip(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function _p(e,t,r,n,i){return t?Sp(e,r,n,i):Dc(e,r,n,i)}function Sp(e,t,r,n){if(n.overwrite)return Se.unlinkSync(r),Dc(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Dc(e,t,r,n){return Se.copyFileSync(t,r),n.preserveTimestamps&&Ap(e.mode,t,r),Bo(r,e.mode)}function Ap(e,t,r){return bp(e)&&Tp(r,e),Cp(t,r)}function bp(e){return(e&128)===0}function Tp(e,t){return Bo(e,t|128)}function Bo(e,t){return Se.chmodSync(e,t)}function Cp(e,t){const r=Se.statSync(e);return yp(t,r.atime,r.mtime)}function Op(e,t,r,n,i){return t?Nc(r,n,i):$p(e.mode,r,n,i)}function $p(e,t,r,n){return Se.mkdirSync(r),Nc(t,r,n),Bo(r,e)}function Nc(e,t,r){Se.readdirSync(e).forEach(n=>Rp(n,e,t,r))}function Rp(e,t,r,n){const i=br.join(t,e),o=br.join(r,e),{destStat:s}=Tr.checkPathsSync(i,o,"copy",n);return wp(s,i,o,n)}function Ip(e,t,r,n){let i=Se.readlinkSync(t);if(n.dereference&&(i=br.resolve(process.cwd(),i)),e){let o;try{o=Se.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return Se.symlinkSync(i,r);throw s}if(n.dereference&&(o=br.resolve(process.cwd(),o)),Tr.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(Se.statSync(r).isDirectory()&&Tr.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return Pp(i,r)}else return Se.symlinkSync(i,r)}function Pp(e,t){return Se.unlinkSync(t),Se.symlinkSync(e,t)}var Dp=Ep;const Np=Ce.fromCallback;var qo={copy:Np(mp),copySync:Dp};const ya=Oe,Fc=Z,te=Zl,Cr=process.platform==="win32";function xc(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||ya[r],r=r+"Sync",e[r]=e[r]||ya[r]}),e.maxBusyTries=e.maxBusyTries||3}function Ho(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),te(e,"rimraf: missing path"),te.strictEqual(typeof e,"string","rimraf: path should be a string"),te.strictEqual(typeof r,"function","rimraf: callback function required"),te(t,"rimraf: invalid options argument provided"),te.strictEqual(typeof t,"object","rimraf: options should be object"),xc(t),Ea(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;const s=n*100;return setTimeout(()=>Ea(e,t,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function Ea(e,t,r){te(e),te(t),te(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Cr)return va(e,t,n,r);if(i&&i.isDirectory())return vn(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return Cr?va(e,t,o,r):vn(e,t,o,r);if(o.code==="EISDIR")return vn(e,t,o,r)}return r(o)})})}function va(e,t,r,n){te(e),te(t),te(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?vn(e,t,r,n):t.unlink(e,n)})})}function wa(e,t,r){let n;te(e),te(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?wn(e,t,r):t.unlinkSync(e)}function vn(e,t,r,n){te(e),te(t),te(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Fp(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Fp(e,t,r){te(e),te(t),te(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return t.rmdir(e,r);i.forEach(a=>{Ho(Fc.join(e,a),t,l=>{if(!s){if(l)return r(s=l);--o===0&&t.rmdir(e,r)}})})})}function Lc(e,t){let r;t=t||{},xc(t),te(e,"rimraf: missing path"),te.strictEqual(typeof e,"string","rimraf: path should be a string"),te(t,"rimraf: missing options"),te.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&Cr&&wa(e,t,n)}try{r&&r.isDirectory()?wn(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return Cr?wa(e,t,n):wn(e,t,n);if(n.code!=="EISDIR")throw n;wn(e,t,n)}}function wn(e,t,r){te(e),te(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")xp(e,t);else if(n.code!=="ENOENT")throw n}}function xp(e,t){if(te(e),te(t),t.readdirSync(e).forEach(r=>Lc(Fc.join(e,r),t)),Cr){const r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}var Lp=Ho;Ho.sync=Lc;const On=Oe,Up=Ce.fromCallback,Uc=Lp;function kp(e,t){if(On.rm)return On.rm(e,{recursive:!0,force:!0},t);Uc(e,t)}function Mp(e){if(On.rmSync)return On.rmSync(e,{recursive:!0,force:!0});Uc.sync(e)}var Bn={remove:Up(kp),removeSync:Mp};const jp=Ce.fromPromise,kc=Ot,Mc=Z,jc=Ye,Bc=Bn,_a=jp(async function(t){let r;try{r=await kc.readdir(t)}catch{return jc.mkdirs(t)}return Promise.all(r.map(n=>Bc.remove(Mc.join(t,n))))});function Sa(e){let t;try{t=kc.readdirSync(e)}catch{return jc.mkdirsSync(e)}t.forEach(r=>{r=Mc.join(e,r),Bc.removeSync(r)})}var Bp={emptyDirSync:Sa,emptydirSync:Sa,emptyDir:_a,emptydir:_a};const qp=Ce.fromCallback,qc=Z,at=Oe,Hc=Ye;function Hp(e,t){function r(){at.writeFile(e,"",n=>{if(n)return t(n);t()})}at.stat(e,(n,i)=>{if(!n&&i.isFile())return t();const o=qc.dirname(e);at.stat(o,(s,a)=>{if(s)return s.code==="ENOENT"?Hc.mkdirs(o,l=>{if(l)return t(l);r()}):t(s);a.isDirectory()?r():at.readdir(o,l=>{if(l)return t(l)})})})}function Gp(e){let t;try{t=at.statSync(e)}catch{}if(t&&t.isFile())return;const r=qc.dirname(e);try{at.statSync(r).isDirectory()||at.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")Hc.mkdirsSync(r);else throw n}at.writeFileSync(e,"")}var Wp={createFile:qp(Hp),createFileSync:Gp};const Vp=Ce.fromCallback,Gc=Z,st=Oe,Wc=Ye,zp=$t.pathExists,{areIdentical:Vc}=Jt;function Yp(e,t,r){function n(i,o){st.link(i,o,s=>{if(s)return r(s);r(null)})}st.lstat(t,(i,o)=>{st.lstat(e,(s,a)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);if(o&&Vc(a,o))return r(null);const l=Gc.dirname(t);zp(l,(c,f)=>{if(c)return r(c);if(f)return n(e,t);Wc.mkdirs(l,u=>{if(u)return r(u);n(e,t)})})})})}function Xp(e,t){let r;try{r=st.lstatSync(t)}catch{}try{const o=st.lstatSync(e);if(r&&Vc(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}const n=Gc.dirname(t);return st.existsSync(n)||Wc.mkdirsSync(n),st.linkSync(e,t)}var Jp={createLink:Vp(Yp),createLinkSync:Xp};const lt=Z,Er=Oe,Kp=$t.pathExists;function Qp(e,t,r){if(lt.isAbsolute(e))return Er.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{const n=lt.dirname(t),i=lt.join(n,e);return Kp(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:e}):Er.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:e,toDst:lt.relative(n,e)})))}}function Zp(e,t){let r;if(lt.isAbsolute(e)){if(r=Er.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{const n=lt.dirname(t),i=lt.join(n,e);if(r=Er.existsSync(i),r)return{toCwd:i,toDst:e};if(r=Er.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:lt.relative(n,e)}}}var em={symlinkPaths:Qp,symlinkPathsSync:Zp};const zc=Oe;function tm(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);zc.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function rm(e,t){let r;if(t)return t;try{r=zc.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}var nm={symlinkType:tm,symlinkTypeSync:rm};const im=Ce.fromCallback,Yc=Z,Me=Ot,Xc=Ye,om=Xc.mkdirs,sm=Xc.mkdirsSync,Jc=em,am=Jc.symlinkPaths,lm=Jc.symlinkPathsSync,Kc=nm,cm=Kc.symlinkType,um=Kc.symlinkTypeSync,fm=$t.pathExists,{areIdentical:Qc}=Jt;function dm(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,Me.lstat(t,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([Me.stat(e),Me.stat(t)]).then(([s,a])=>{if(Qc(s,a))return n(null);Aa(e,t,r,n)}):Aa(e,t,r,n)})}function Aa(e,t,r,n){am(e,t,(i,o)=>{if(i)return n(i);e=o.toDst,cm(o.toCwd,r,(s,a)=>{if(s)return n(s);const l=Yc.dirname(t);fm(l,(c,f)=>{if(c)return n(c);if(f)return Me.symlink(e,t,a,n);om(l,u=>{if(u)return n(u);Me.symlink(e,t,a,n)})})})})}function hm(e,t,r){let n;try{n=Me.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){const a=Me.statSync(e),l=Me.statSync(t);if(Qc(a,l))return}const i=lm(e,t);e=i.toDst,r=um(i.toCwd,r);const o=Yc.dirname(t);return Me.existsSync(o)||sm(o),Me.symlinkSync(e,t,r)}var pm={createSymlink:im(dm),createSymlinkSync:hm};const{createFile:ba,createFileSync:Ta}=Wp,{createLink:Ca,createLinkSync:Oa}=Jp,{createSymlink:$a,createSymlinkSync:Ra}=pm;var mm={createFile:ba,createFileSync:Ta,ensureFile:ba,ensureFileSync:Ta,createLink:Ca,createLinkSync:Oa,ensureLink:Ca,ensureLinkSync:Oa,createSymlink:$a,createSymlinkSync:Ra,ensureSymlink:$a,ensureSymlinkSync:Ra};function gm(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){const o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o}function ym(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var Go={stringify:gm,stripBom:ym};let Vt;try{Vt=Oe}catch{Vt=Ne}const qn=Ce,{stringify:Zc,stripBom:eu}=Go;async function Em(e,t={}){typeof t=="string"&&(t={encoding:t});const r=t.fs||Vt,n="throws"in t?t.throws:!0;let i=await qn.fromCallback(r.readFile)(e,t);i=eu(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(s){if(n)throw s.message=`${e}: ${s.message}`,s;return null}return o}const vm=qn.fromPromise(Em);function wm(e,t={}){typeof t=="string"&&(t={encoding:t});const r=t.fs||Vt,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=eu(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function _m(e,t,r={}){const n=r.fs||Vt,i=Zc(t,r);await qn.fromCallback(n.writeFile)(e,i,r)}const Sm=qn.fromPromise(_m);function Am(e,t,r={}){const n=r.fs||Vt,i=Zc(t,r);return n.writeFileSync(e,i,r)}const bm={readFile:vm,readFileSync:wm,writeFile:Sm,writeFileSync:Am};var Tm=bm;const ln=Tm;var Cm={readJson:ln.readFile,readJsonSync:ln.readFileSync,writeJson:ln.writeFile,writeJsonSync:ln.writeFileSync};const Om=Ce.fromCallback,vr=Oe,tu=Z,ru=Ye,$m=$t.pathExists;function Rm(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");const i=tu.dirname(e);$m(i,(o,s)=>{if(o)return n(o);if(s)return vr.writeFile(e,t,r,n);ru.mkdirs(i,a=>{if(a)return n(a);vr.writeFile(e,t,r,n)})})}function Im(e,...t){const r=tu.dirname(e);if(vr.existsSync(r))return vr.writeFileSync(e,...t);ru.mkdirsSync(r),vr.writeFileSync(e,...t)}var Wo={outputFile:Om(Rm),outputFileSync:Im};const{stringify:Pm}=Go,{outputFile:Dm}=Wo;async function Nm(e,t,r={}){const n=Pm(t,r);await Dm(e,n,r)}var Fm=Nm;const{stringify:xm}=Go,{outputFileSync:Lm}=Wo;function Um(e,t,r){const n=xm(t,r);Lm(e,n,r)}var km=Um;const Mm=Ce.fromPromise,Te=Cm;Te.outputJson=Mm(Fm);Te.outputJsonSync=km;Te.outputJSON=Te.outputJson;Te.outputJSONSync=Te.outputJsonSync;Te.writeJSON=Te.writeJson;Te.writeJSONSync=Te.writeJsonSync;Te.readJSON=Te.readJson;Te.readJSONSync=Te.readJsonSync;var jm=Te;const Bm=Oe,wo=Z,qm=qo.copy,nu=Bn.remove,Hm=Ye.mkdirp,Gm=$t.pathExists,Ia=Jt;function Wm(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};const i=r.overwrite||r.clobber||!1;Ia.checkPaths(e,t,"move",r,(o,s)=>{if(o)return n(o);const{srcStat:a,isChangingCase:l=!1}=s;Ia.checkParentPaths(e,a,t,"move",c=>{if(c)return n(c);if(Vm(t))return Pa(e,t,i,l,n);Hm(wo.dirname(t),f=>f?n(f):Pa(e,t,i,l,n))})})}function Vm(e){const t=wo.dirname(e);return wo.parse(t).root===t}function Pa(e,t,r,n,i){if(n)return Yi(e,t,r,i);if(r)return nu(t,o=>o?i(o):Yi(e,t,r,i));Gm(t,(o,s)=>o?i(o):s?i(new Error("dest already exists.")):Yi(e,t,r,i))}function Yi(e,t,r,n){Bm.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):zm(e,t,r,n):n())}function zm(e,t,r,n){qm(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):nu(e,n))}var Ym=Wm;const iu=Oe,_o=Z,Xm=qo.copySync,ou=Bn.removeSync,Jm=Ye.mkdirpSync,Da=Jt;function Km(e,t,r){r=r||{};const n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Da.checkPathsSync(e,t,"move",r);return Da.checkParentPathsSync(e,i,t,"move"),Qm(t)||Jm(_o.dirname(t)),Zm(e,t,n,o)}function Qm(e){const t=_o.dirname(e);return _o.parse(t).root===t}function Zm(e,t,r,n){if(n)return Xi(e,t,r);if(r)return ou(t),Xi(e,t,r);if(iu.existsSync(t))throw new Error("dest already exists.");return Xi(e,t,r)}function Xi(e,t,r){try{iu.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return eg(e,t,r)}}function eg(e,t,r){return Xm(e,t,{overwrite:r,errorOnExist:!0}),ou(e)}var tg=Km;const rg=Ce.fromCallback;var ng={move:rg(Ym),moveSync:tg},pt={...Ot,...qo,...Bp,...mm,...jm,...Ye,...ng,...Wo,...$t,...Bn},sr={},wt={},ve={},Vo={},Be={};function su(e){return typeof e>"u"||e===null}function ig(e){return typeof e=="object"&&e!==null}function og(e){return Array.isArray(e)?e:su(e)?[]:[e]}function sg(e,t){var r,n,i,o;if(t)for(o=Object.keys(t),r=0,n=o.length;r<n;r+=1)i=o[r],e[i]=t[i];return e}function ag(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function lg(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Be.isNothing=su;Be.isObject=ig;Be.toArray=og;Be.repeat=ag;Be.isNegativeZero=lg;Be.extend=sg;function au(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Or(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=au(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Or.prototype=Object.create(Error.prototype);Or.prototype.constructor=Or;Or.prototype.toString=function(t){return this.name+": "+au(this,t)};var kr=Or,mr=Be;function Ji(e,t,r,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-t>a&&(o=" ... ",t=n-a+o.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:o+e.slice(t,r).replace(/\t/g,"→")+s,pos:n-t+o.length}}function Ki(e,t){return mr.repeat(" ",t-e.length)+e}function cg(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(e.buffer);)i.push(o.index),n.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",l,c,f=Math.min(e.line+t.linesAfter,i.length).toString().length,u=t.maxLength-(t.indent+f+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)c=Ji(e.buffer,n[s-l],i[s-l],e.position-(n[s]-n[s-l]),u),a=mr.repeat(" ",t.indent)+Ki((e.line-l+1).toString(),f)+" | "+c.str+`
`+a;for(c=Ji(e.buffer,n[s],i[s],e.position,u),a+=mr.repeat(" ",t.indent)+Ki((e.line+1).toString(),f)+" | "+c.str+`
`,a+=mr.repeat("-",t.indent+f+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=i.length);l++)c=Ji(e.buffer,n[s+l],i[s+l],e.position-(n[s]-n[s+l]),u),a+=mr.repeat(" ",t.indent)+Ki((e.line+l+1).toString(),f)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var ug=cg,Na=kr,fg=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],dg=["scalar","sequence","mapping"];function hg(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function pg(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(fg.indexOf(r)===-1)throw new Na('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=hg(t.styleAliases||null),dg.indexOf(this.kind)===-1)throw new Na('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var $e=pg,ar=kr,Qi=$e;function Fa(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function mg(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function So(e){return this.extend(e)}So.prototype.extend=function(t){var r=[],n=[];if(t instanceof Qi)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new ar("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Qi))throw new ar("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new ar("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new ar("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Qi))throw new ar("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(So.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Fa(i,"implicit"),i.compiledExplicit=Fa(i,"explicit"),i.compiledTypeMap=mg(i.compiledImplicit,i.compiledExplicit),i};var lu=So,gg=$e,cu=new gg("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),yg=$e,uu=new yg("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Eg=$e,fu=new Eg("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),vg=lu,du=new vg({explicit:[cu,uu,fu]}),wg=$e;function _g(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Sg(){return null}function Ag(e){return e===null}var hu=new wg("tag:yaml.org,2002:null",{kind:"scalar",resolve:_g,construct:Sg,predicate:Ag,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),bg=$e;function Tg(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Cg(e){return e==="true"||e==="True"||e==="TRUE"}function Og(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var pu=new bg("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Tg,construct:Cg,predicate:Og,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),$g=Be,Rg=$e;function Ig(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Pg(e){return 48<=e&&e<=55}function Dg(e){return 48<=e&&e<=57}function Ng(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Ig(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Pg(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!Dg(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Fg(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function xg(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!$g.isNegativeZero(e)}var mu=new Rg("tag:yaml.org,2002:int",{kind:"scalar",resolve:Ng,construct:Fg,predicate:xg,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),gu=Be,Lg=$e,Ug=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function kg(e){return!(e===null||!Ug.test(e)||e[e.length-1]==="_")}function Mg(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var jg=/^[-+]?[0-9]+e/;function Bg(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(gu.isNegativeZero(e))return"-0.0";return r=e.toString(10),jg.test(r)?r.replace("e",".e"):r}function qg(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||gu.isNegativeZero(e))}var yu=new Lg("tag:yaml.org,2002:float",{kind:"scalar",resolve:kg,construct:Mg,predicate:qg,represent:Bg,defaultStyle:"lowercase"}),Eu=du.extend({implicit:[hu,pu,mu,yu]}),vu=Eu,Hg=$e,wu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_u=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Gg(e){return e===null?!1:wu.exec(e)!==null||_u.exec(e)!==null}function Wg(e){var t,r,n,i,o,s,a,l=0,c=null,f,u,h;if(t=wu.exec(e),t===null&&(t=_u.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(f=+t[10],u=+(t[11]||0),c=(f*60+u)*6e4,t[9]==="-"&&(c=-c)),h=new Date(Date.UTC(r,n,i,o,s,a,l)),c&&h.setTime(h.getTime()-c),h}function Vg(e){return e.toISOString()}var Su=new Hg("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Gg,construct:Wg,instanceOf:Date,represent:Vg}),zg=$e;function Yg(e){return e==="<<"||e===null}var Au=new zg("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Yg}),Xg=$e,zo=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Jg(e){if(e===null)return!1;var t,r,n=0,i=e.length,o=zo;for(r=0;r<i;r++)if(t=o.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function Kg(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,o=zo,s=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function Qg(e){var t="",r=0,n,i,o=e.length,s=zo;for(n=0;n<o;n++)n%3===0&&n&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[n];return i=o%3,i===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):i===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):i===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}function Zg(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var bu=new Xg("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Jg,construct:Kg,predicate:Zg,represent:Qg}),e0=$e,t0=Object.prototype.hasOwnProperty,r0=Object.prototype.toString;function n0(e){if(e===null)return!0;var t=[],r,n,i,o,s,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],s=!1,r0.call(i)!=="[object Object]")return!1;for(o in i)if(t0.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function i0(e){return e!==null?e:[]}var Tu=new e0("tag:yaml.org,2002:omap",{kind:"sequence",resolve:n0,construct:i0}),o0=$e,s0=Object.prototype.toString;function a0(e){if(e===null)return!0;var t,r,n,i,o,s=e;for(o=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],s0.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[t]=[i[0],n[i[0]]]}return!0}function l0(e){if(e===null)return[];var t,r,n,i,o,s=e;for(o=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],i=Object.keys(n),o[t]=[i[0],n[i[0]]];return o}var Cu=new o0("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:a0,construct:l0}),c0=$e,u0=Object.prototype.hasOwnProperty;function f0(e){if(e===null)return!0;var t,r=e;for(t in r)if(u0.call(r,t)&&r[t]!==null)return!1;return!0}function d0(e){return e!==null?e:{}}var Ou=new c0("tag:yaml.org,2002:set",{kind:"mapping",resolve:f0,construct:d0}),Yo=vu.extend({implicit:[Su,Au],explicit:[bu,Tu,Cu,Ou]}),St=Be,$u=kr,h0=ug,p0=Yo,ft=Object.prototype.hasOwnProperty,$n=1,Ru=2,Iu=3,Rn=4,Zi=1,m0=2,xa=3,g0=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y0=/[\x85\u2028\u2029]/,E0=/[,\[\]\{\}]/,Pu=/^(?:!|!!|![a-z\-]+!)$/i,Du=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function La(e){return Object.prototype.toString.call(e)}function ze(e){return e===10||e===13}function Tt(e){return e===9||e===32}function Pe(e){return e===9||e===32||e===10||e===13}function Ut(e){return e===44||e===91||e===93||e===123||e===125}function v0(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function w0(e){return e===120?2:e===117?4:e===85?8:0}function _0(e){return 48<=e&&e<=57?e-48:-1}function Ua(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function S0(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Nu=new Array(256),Fu=new Array(256);for(var Dt=0;Dt<256;Dt++)Nu[Dt]=Ua(Dt)?1:0,Fu[Dt]=Ua(Dt);function A0(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||p0,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function xu(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=h0(r),new $u(t,r)}function q(e,t){throw xu(e,t)}function In(e,t){e.onWarning&&e.onWarning.call(null,xu(e,t))}var ka={YAML:function(t,r,n){var i,o,s;t.version!==null&&q(t,"duplication of %YAML directive"),n.length!==1&&q(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&q(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&q(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&In(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,o;n.length!==2&&q(t,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Pu.test(i)||q(t,"ill-formed tag handle (first argument) of the TAG directive"),ft.call(t.tagMap,i)&&q(t,'there is a previously declared suffix for "'+i+'" tag handle'),Du.test(o)||q(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{q(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function ct(e,t,r,n){var i,o,s,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||q(e,"expected valid JSON character");else g0.test(a)&&q(e,"the stream contains non-printable characters");e.result+=a}}function Ma(e,t,r,n){var i,o,s,a;for(St.isObject(r)||q(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],ft.call(t,o)||(t[o]=r[o],n[o]=!0)}function kt(e,t,r,n,i,o,s,a,l){var c,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,f=i.length;c<f;c+=1)Array.isArray(i[c])&&q(e,"nested arrays are not supported inside keys"),typeof i=="object"&&La(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&La(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(c=0,f=o.length;c<f;c+=1)Ma(e,t,o[c],r);else Ma(e,t,o,r);else!e.json&&!ft.call(r,i)&&ft.call(t,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,q(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete r[i];return t}function Xo(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):q(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ce(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Tt(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(ze(i))for(Xo(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&In(e,"deficient indentation"),n}function Hn(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Pe(r)))}function Jo(e,t){t===1?e.result+=" ":t>1&&(e.result+=St.repeat(`
`,t-1))}function b0(e,t,r){var n,i,o,s,a,l,c,f,u=e.kind,h=e.result,p;if(p=e.input.charCodeAt(e.position),Pe(p)||Ut(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=e.input.charCodeAt(e.position+1),Pe(i)||r&&Ut(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;p!==0;){if(p===58){if(i=e.input.charCodeAt(e.position+1),Pe(i)||r&&Ut(i))break}else if(p===35){if(n=e.input.charCodeAt(e.position-1),Pe(n))break}else{if(e.position===e.lineStart&&Hn(e)||r&&Ut(p))break;if(ze(p))if(l=e.line,c=e.lineStart,f=e.lineIndent,ce(e,!1,-1),e.lineIndent>=t){a=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=c,e.lineIndent=f;break}}a&&(ct(e,o,s,!1),Jo(e,e.line-l),o=s=e.position,a=!1),Tt(p)||(s=e.position+1),p=e.input.charCodeAt(++e.position)}return ct(e,o,s,!1),e.result?!0:(e.kind=u,e.result=h,!1)}function T0(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(ct(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else ze(r)?(ct(e,n,i,!0),Jo(e,ce(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Hn(e)?q(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);q(e,"unexpected end of the stream within a single quoted scalar")}function C0(e,t){var r,n,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return ct(e,r,e.position,!0),e.position++,!0;if(a===92){if(ct(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),ze(a))ce(e,!1,t);else if(a<256&&Nu[a])e.result+=Fu[a],e.position++;else if((s=w0(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=v0(a))>=0?o=(o<<4)+s:q(e,"expected hexadecimal character");e.result+=S0(o),e.position++}else q(e,"unknown escape sequence");r=n=e.position}else ze(a)?(ct(e,r,n,!0),Jo(e,ce(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Hn(e)?q(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}q(e,"unexpected end of the stream within a double quoted scalar")}function O0(e,t){var r=!0,n,i,o,s=e.tag,a,l=e.anchor,c,f,u,h,p,E=Object.create(null),_,v,b,T;if(T=e.input.charCodeAt(e.position),T===91)f=93,p=!1,a=[];else if(T===123)f=125,p=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),T=e.input.charCodeAt(++e.position);T!==0;){if(ce(e,!0,t),T=e.input.charCodeAt(e.position),T===f)return e.position++,e.tag=s,e.anchor=l,e.kind=p?"mapping":"sequence",e.result=a,!0;r?T===44&&q(e,"expected the node content, but found ','"):q(e,"missed comma between flow collection entries"),v=_=b=null,u=h=!1,T===63&&(c=e.input.charCodeAt(e.position+1),Pe(c)&&(u=h=!0,e.position++,ce(e,!0,t))),n=e.line,i=e.lineStart,o=e.position,zt(e,t,$n,!1,!0),v=e.tag,_=e.result,ce(e,!0,t),T=e.input.charCodeAt(e.position),(h||e.line===n)&&T===58&&(u=!0,T=e.input.charCodeAt(++e.position),ce(e,!0,t),zt(e,t,$n,!1,!0),b=e.result),p?kt(e,a,E,v,_,b,n,i,o):u?a.push(kt(e,null,E,v,_,b,n,i,o)):a.push(_),ce(e,!0,t),T=e.input.charCodeAt(e.position),T===44?(r=!0,T=e.input.charCodeAt(++e.position)):r=!1}q(e,"unexpected end of the stream within a flow collection")}function $0(e,t){var r,n,i=Zi,o=!1,s=!1,a=t,l=0,c=!1,f,u;if(u=e.input.charCodeAt(e.position),u===124)n=!1;else if(u===62)n=!0;else return!1;for(e.kind="scalar",e.result="";u!==0;)if(u=e.input.charCodeAt(++e.position),u===43||u===45)Zi===i?i=u===43?xa:m0:q(e,"repeat of a chomping mode identifier");else if((f=_0(u))>=0)f===0?q(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?q(e,"repeat of an indentation width identifier"):(a=t+f-1,s=!0);else break;if(Tt(u)){do u=e.input.charCodeAt(++e.position);while(Tt(u));if(u===35)do u=e.input.charCodeAt(++e.position);while(!ze(u)&&u!==0)}for(;u!==0;){for(Xo(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),ze(u)){l++;continue}if(e.lineIndent<a){i===xa?e.result+=St.repeat(`
`,o?1+l:l):i===Zi&&o&&(e.result+=`
`);break}for(n?Tt(u)?(c=!0,e.result+=St.repeat(`
`,o?1+l:l)):c?(c=!1,e.result+=St.repeat(`
`,l+1)):l===0?o&&(e.result+=" "):e.result+=St.repeat(`
`,l):e.result+=St.repeat(`
`,o?1+l:l),o=!0,s=!0,l=0,r=e.position;!ze(u)&&u!==0;)u=e.input.charCodeAt(++e.position);ct(e,r,e.position,!1)}return!0}function ja(e,t){var r,n=e.tag,i=e.anchor,o=[],s,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,q(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!Pe(s))));){if(a=!0,e.position++,ce(e,!0,-1)&&e.lineIndent<=t){o.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,zt(e,t,Iu,!1,!0),o.push(e.result),ce(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)q(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function R0(e,t,r){var n,i,o,s,a,l,c=e.tag,f=e.anchor,u={},h=Object.create(null),p=null,E=null,_=null,v=!1,b=!1,T;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),T=e.input.charCodeAt(e.position);T!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,q(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),o=e.line,(T===63||T===58)&&Pe(n))T===63?(v&&(kt(e,u,h,p,E,null,s,a,l),p=E=_=null),b=!0,v=!0,i=!0):v?(v=!1,i=!0):q(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,T=n;else{if(s=e.line,a=e.lineStart,l=e.position,!zt(e,r,Ru,!1,!0))break;if(e.line===o){for(T=e.input.charCodeAt(e.position);Tt(T);)T=e.input.charCodeAt(++e.position);if(T===58)T=e.input.charCodeAt(++e.position),Pe(T)||q(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(kt(e,u,h,p,E,null,s,a,l),p=E=_=null),b=!0,v=!1,i=!1,p=e.tag,E=e.result;else if(b)q(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=f,!0}else if(b)q(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=f,!0}if((e.line===o||e.lineIndent>t)&&(v&&(s=e.line,a=e.lineStart,l=e.position),zt(e,t,Rn,!0,i)&&(v?E=e.result:_=e.result),v||(kt(e,u,h,p,E,_,s,a,l),p=E=_=null),ce(e,!0,-1),T=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&T!==0)q(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&kt(e,u,h,p,E,null,s,a,l),b&&(e.tag=c,e.anchor=f,e.kind="mapping",e.result=u),b}function I0(e){var t,r=!1,n=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&q(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):q(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Pe(s);)s===33&&(n?q(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),Pu.test(i)||q(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),E0.test(o)&&q(e,"tag suffix cannot contain flow indicator characters")}o&&!Du.test(o)&&q(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{q(e,"tag name is malformed: "+o)}return r?e.tag=o:ft.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:q(e,'undeclared tag handle "'+i+'"'),!0}function P0(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&q(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Pe(r)&&!Ut(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&q(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function D0(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Pe(n)&&!Ut(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&q(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),ft.call(e.anchorMap,r)||q(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],ce(e,!0,-1),!0}function zt(e,t,r,n,i){var o,s,a,l=1,c=!1,f=!1,u,h,p,E,_,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=Rn===r||Iu===r,n&&ce(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;I0(e)||P0(e);)ce(e,!0,-1)?(c=!0,a=o,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||Rn===r)&&($n===r||Ru===r?_=t:_=t+1,v=e.position-e.lineStart,l===1?a&&(ja(e,v)||R0(e,v,_))||O0(e,_)?f=!0:(s&&$0(e,_)||T0(e,_)||C0(e,_)?f=!0:D0(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&q(e,"alias node should not have any properties")):b0(e,_,$n===r)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(f=a&&ja(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&q(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,h=e.implicitTypes.length;u<h;u+=1)if(E=e.implicitTypes[u],E.resolve(e.result)){e.result=E.construct(e.result),e.tag=E.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(ft.call(e.typeMap[e.kind||"fallback"],e.tag))E=e.typeMap[e.kind||"fallback"][e.tag];else for(E=null,p=e.typeMap.multi[e.kind||"fallback"],u=0,h=p.length;u<h;u+=1)if(e.tag.slice(0,p[u].tag.length)===p[u].tag){E=p[u];break}E||q(e,"unknown tag !<"+e.tag+">"),e.result!==null&&E.kind!==e.kind&&q(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+E.kind+'", not "'+e.kind+'"'),E.resolve(e.result,e.tag)?(e.result=E.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):q(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function N0(e){var t=e.position,r,n,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(ce(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!Pe(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&q(e,"directive name must not be less than one character in length");s!==0;){for(;Tt(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!ze(s));break}if(ze(s))break;for(r=e.position;s!==0&&!Pe(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}s!==0&&Xo(e),ft.call(ka,n)?ka[n](e,n,i):In(e,'unknown document directive "'+n+'"')}if(ce(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ce(e,!0,-1)):o&&q(e,"directives end mark is expected"),zt(e,e.lineIndent-1,Rn,!1,!0),ce(e,!0,-1),e.checkLineBreaks&&y0.test(e.input.slice(t,e.position))&&In(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Hn(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ce(e,!0,-1));return}if(e.position<e.length-1)q(e,"end of the stream or a document separator is expected");else return}function Lu(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new A0(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,q(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)N0(r);return r.documents}function F0(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=Lu(e,r);if(typeof t!="function")return n;for(var i=0,o=n.length;i<o;i+=1)t(n[i])}function x0(e,t){var r=Lu(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new $u("expected a single document in the stream, but found more")}}Vo.loadAll=F0;Vo.load=x0;var Uu={},Gn=Be,Mr=kr,L0=Yo,ku=Object.prototype.toString,Mu=Object.prototype.hasOwnProperty,Ko=65279,U0=9,$r=10,k0=13,M0=32,j0=33,B0=34,Ao=35,q0=37,H0=38,G0=39,W0=42,ju=44,V0=45,Pn=58,z0=61,Y0=62,X0=63,J0=64,Bu=91,qu=93,K0=96,Hu=123,Q0=124,Gu=125,Ae={};Ae[0]="\\0";Ae[7]="\\a";Ae[8]="\\b";Ae[9]="\\t";Ae[10]="\\n";Ae[11]="\\v";Ae[12]="\\f";Ae[13]="\\r";Ae[27]="\\e";Ae[34]='\\"';Ae[92]="\\\\";Ae[133]="\\N";Ae[160]="\\_";Ae[8232]="\\L";Ae[8233]="\\P";var Z0=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ey=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ty(e,t){var r,n,i,o,s,a,l;if(t===null)return{};for(r={},n=Object.keys(t),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&Mu.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[s]=a;return r}function ry(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Mr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Gn.repeat("0",n-t.length)+t}var ny=1,Rr=2;function iy(e){this.schema=e.schema||L0,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Gn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=ty(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Rr:ny,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ba(e,t){for(var r=Gn.repeat(" ",t),n=0,i=-1,o="",s,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(s=e.slice(n),n=a):(s=e.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function bo(e,t){return`
`+Gn.repeat(" ",e.indent*t)}function oy(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function Dn(e){return e===M0||e===U0}function Ir(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Ko||65536<=e&&e<=1114111}function qa(e){return Ir(e)&&e!==Ko&&e!==k0&&e!==$r}function Ha(e,t,r){var n=qa(e),i=n&&!Dn(e);return(r?n:n&&e!==ju&&e!==Bu&&e!==qu&&e!==Hu&&e!==Gu)&&e!==Ao&&!(t===Pn&&!i)||qa(t)&&!Dn(t)&&e===Ao||t===Pn&&i}function sy(e){return Ir(e)&&e!==Ko&&!Dn(e)&&e!==V0&&e!==X0&&e!==Pn&&e!==ju&&e!==Bu&&e!==qu&&e!==Hu&&e!==Gu&&e!==Ao&&e!==H0&&e!==W0&&e!==j0&&e!==Q0&&e!==z0&&e!==Y0&&e!==G0&&e!==B0&&e!==q0&&e!==J0&&e!==K0}function ay(e){return!Dn(e)&&e!==Pn}function gr(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Wu(e){var t=/^\n* /;return t.test(e)}var Vu=1,To=2,zu=3,Yu=4,Lt=5;function ly(e,t,r,n,i,o,s,a){var l,c=0,f=null,u=!1,h=!1,p=n!==-1,E=-1,_=sy(gr(e,0))&&ay(gr(e,e.length-1));if(t||s)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=gr(e,l),!Ir(c))return Lt;_=_&&Ha(c,f,a),f=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=gr(e,l),c===$r)u=!0,p&&(h=h||l-E-1>n&&e[E+1]!==" ",E=l);else if(!Ir(c))return Lt;_=_&&Ha(c,f,a),f=c}h=h||p&&l-E-1>n&&e[E+1]!==" "}return!u&&!h?_&&!s&&!i(e)?Vu:o===Rr?Lt:To:r>9&&Wu(e)?Lt:s?o===Rr?Lt:To:h?Yu:zu}function cy(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===Rr?'""':"''";if(!e.noCompatMode&&(Z0.indexOf(t)!==-1||ey.test(t)))return e.quotingType===Rr?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=n||e.flowLevel>-1&&r>=e.flowLevel;function l(c){return oy(e,c)}switch(ly(t,a,e.indent,s,l,e.quotingType,e.forceQuotes&&!n,i)){case Vu:return t;case To:return"'"+t.replace(/'/g,"''")+"'";case zu:return"|"+Ga(t,e.indent)+Wa(Ba(t,o));case Yu:return">"+Ga(t,e.indent)+Wa(Ba(uy(t,s),o));case Lt:return'"'+fy(t)+'"';default:throw new Mr("impossible error: invalid scalar style")}}()}function Ga(e,t){var r=Wu(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Wa(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function uy(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,Va(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",o,s;s=r.exec(e);){var a=s[1],l=s[2];o=l[0]===" ",n+=a+(!i&&!o&&l!==""?`
`:"")+Va(l,t),i=o}return n}function Va(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,o,s=0,a=0,l="";n=r.exec(e);)a=n.index,a-i>t&&(o=s>i?s:a,l+=`
`+e.slice(i,o),i=o+1),s=a;return l+=`
`,e.length-i>t&&s>i?l+=e.slice(i,s)+`
`+e.slice(s+1):l+=e.slice(i),l.slice(1)}function fy(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=gr(e,i),n=Ae[r],!n&&Ir(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||ry(r);return t}function dy(e,t,r){var n="",i=e.tag,o,s,a;for(o=0,s=r.length;o<s;o+=1)a=r[o],e.replacer&&(a=e.replacer.call(r,String(o),a)),(Qe(e,t,a,!1,!1)||typeof a>"u"&&Qe(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function za(e,t,r,n){var i="",o=e.tag,s,a,l;for(s=0,a=r.length;s<a;s+=1)l=r[s],e.replacer&&(l=e.replacer.call(r,String(s),l)),(Qe(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&Qe(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=bo(e,t)),e.dump&&$r===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function hy(e,t,r){var n="",i=e.tag,o=Object.keys(r),s,a,l,c,f;for(s=0,a=o.length;s<a;s+=1)f="",n!==""&&(f+=", "),e.condenseFlow&&(f+='"'),l=o[s],c=r[l],e.replacer&&(c=e.replacer.call(r,l,c)),Qe(e,t,l,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Qe(e,t,c,!1,!1)&&(f+=e.dump,n+=f));e.tag=i,e.dump="{"+n+"}"}function py(e,t,r,n){var i="",o=e.tag,s=Object.keys(r),a,l,c,f,u,h;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new Mr("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)h="",(!n||i!=="")&&(h+=bo(e,t)),c=s[a],f=r[c],e.replacer&&(f=e.replacer.call(r,c,f)),Qe(e,t+1,c,!0,!0,!0)&&(u=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,u&&(e.dump&&$r===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,u&&(h+=bo(e,t)),Qe(e,t+1,f,!0,u)&&(e.dump&&$r===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,i+=h));e.tag=o,e.dump=i||"{}"}function Ya(e,t,r){var n,i,o,s,a,l;for(i=r?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,ku.call(a.represent)==="[object Function]")n=a.represent(t,l);else if(Mu.call(a.represent,l))n=a.represent[l](t,l);else throw new Mr("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=n}return!0}return!1}function Qe(e,t,r,n,i,o,s){e.tag=null,e.dump=r,Ya(e,r,!1)||Ya(e,r,!0);var a=ku.call(e.dump),l=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var f=a==="[object Object]"||a==="[object Array]",u,h;if(f&&(u=e.duplicates.indexOf(r),h=u!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&t>0)&&(i=!1),h&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(f&&h&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(py(e,t,e.dump,i),h&&(e.dump="&ref_"+u+e.dump)):(hy(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?za(e,t-1,e.dump,i):za(e,t,e.dump,i),h&&(e.dump="&ref_"+u+e.dump)):(dy(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&cy(e,e.dump,t,o,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Mr("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function my(e,t){var r=[],n=[],i,o;for(Co(e,r,n),i=0,o=n.length;i<o;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(o)}function Co(e,t,r){var n,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)Co(e[i],t,r);else for(n=Object.keys(e),i=0,o=n.length;i<o;i+=1)Co(e[n[i]],t,r)}function gy(e,t){t=t||{};var r=new iy(t);r.noRefs||my(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Qe(r,0,n,!0,!0)?r.dump+`
`:""}Uu.dump=gy;var Xu=Vo,yy=Uu;function Qo(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}ve.Type=$e;ve.Schema=lu;ve.FAILSAFE_SCHEMA=du;ve.JSON_SCHEMA=Eu;ve.CORE_SCHEMA=vu;ve.DEFAULT_SCHEMA=Yo;ve.load=Xu.load;ve.loadAll=Xu.loadAll;ve.dump=yy.dump;ve.YAMLException=kr;ve.types={binary:bu,float:yu,map:fu,null:hu,pairs:Cu,set:Ou,timestamp:Su,bool:pu,int:mu,merge:Au,omap:Tu,seq:uu,str:cu};ve.safeLoad=Qo("safeLoad","load");ve.safeLoadAll=Qo("safeLoadAll","loadAll");ve.safeDump=Qo("safeDump","dump");var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.Lazy=void 0;class Ey{constructor(t){this._value=null,this.creator=t}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const t=this.creator();return this.value=t,t}set value(t){this._value=t,this.creator=null}}Wn.Lazy=Ey;var Oo={exports:{}};const vy="2.0.0",Ju=256,wy=Number.MAX_SAFE_INTEGER||9007199254740991,_y=16,Sy=Ju-6,Ay=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Vn={MAX_LENGTH:Ju,MAX_SAFE_COMPONENT_LENGTH:_y,MAX_SAFE_BUILD_LENGTH:Sy,MAX_SAFE_INTEGER:wy,RELEASE_TYPES:Ay,SEMVER_SPEC_VERSION:vy,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const by=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var zn=by;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=Vn,o=zn;t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],c=t.t={};let f=0;const u="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[u,n]],p=_=>{for(const[v,b]of h)_=_.split(`${v}*`).join(`${v}{0,${b}}`).split(`${v}+`).join(`${v}{1,${b}}`);return _},E=(_,v,b)=>{const T=p(v),x=f++;o(_,x,v),c[_]=x,l[x]=v,s[x]=new RegExp(v,b?"g":void 0),a[x]=new RegExp(T,b?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),E("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),E("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${u}+`),E("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),E("FULL",`^${l[c.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),E("LOOSE",`^${l[c.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),E("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),E("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",l[c.COERCE],!0),E("COERCERTLFULL",l[c.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",E("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",E("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Oo,Oo.exports);var jr=Oo.exports;const Ty=Object.freeze({loose:!0}),Cy=Object.freeze({}),Oy=e=>e?typeof e!="object"?Ty:e:Cy;var Zo=Oy;const Xa=/^[0-9]+$/,Ku=(e,t)=>{const r=Xa.test(e),n=Xa.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},$y=(e,t)=>Ku(t,e);var Qu={compareIdentifiers:Ku,rcompareIdentifiers:$y};const cn=zn,{MAX_LENGTH:Ja,MAX_SAFE_INTEGER:un}=Vn,{safeRe:Ka,t:Qa}=jr,Ry=Zo,{compareIdentifiers:Nt}=Qu;let Iy=class Ve{constructor(t,r){if(r=Ry(r),t instanceof Ve){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Ja)throw new TypeError(`version is longer than ${Ja} characters`);cn("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?Ka[Qa.LOOSE]:Ka[Qa.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>un||this.major<0)throw new TypeError("Invalid major version");if(this.minor>un||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>un||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<un)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(cn("SemVer.compare",this.version,this.options,t),!(t instanceof Ve)){if(typeof t=="string"&&t===this.version)return 0;t=new Ve(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ve||(t=new Ve(t,this.options)),Nt(this.major,t.major)||Nt(this.minor,t.minor)||Nt(this.patch,t.patch)}comparePre(t){if(t instanceof Ve||(t=new Ve(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(cn("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Nt(n,i)}while(++r)}compareBuild(t){t instanceof Ve||(t=new Ve(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(cn("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Nt(n,i)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),Nt(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Re=Iy;const Za=Re,Py=(e,t,r=!1)=>{if(e instanceof Za)return e;try{return new Za(e,t)}catch(n){if(!r)return null;throw n}};var Kt=Py;const Dy=Kt,Ny=(e,t)=>{const r=Dy(e,t);return r?r.version:null};var Fy=Ny;const xy=Kt,Ly=(e,t)=>{const r=xy(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var Uy=Ly;const el=Re,ky=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new el(e instanceof el?e.version:e,r).inc(t,n,i).version}catch{return null}};var My=ky;const tl=Kt,jy=(e,t)=>{const r=tl(e,null,!0),n=tl(t,null,!0),i=r.compare(n);if(i===0)return null;const o=i>0,s=o?r:n,a=o?n:r,l=!!s.prerelease.length;if(!!a.prerelease.length&&!l)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";const f=l?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"};var By=jy;const qy=Re,Hy=(e,t)=>new qy(e,t).major;var Gy=Hy;const Wy=Re,Vy=(e,t)=>new Wy(e,t).minor;var zy=Vy;const Yy=Re,Xy=(e,t)=>new Yy(e,t).patch;var Jy=Xy;const Ky=Kt,Qy=(e,t)=>{const r=Ky(e,t);return r&&r.prerelease.length?r.prerelease:null};var Zy=Qy;const rl=Re,eE=(e,t,r)=>new rl(e,r).compare(new rl(t,r));var qe=eE;const tE=qe,rE=(e,t,r)=>tE(t,e,r);var nE=rE;const iE=qe,oE=(e,t)=>iE(e,t,!0);var sE=oE;const nl=Re,aE=(e,t,r)=>{const n=new nl(e,r),i=new nl(t,r);return n.compare(i)||n.compareBuild(i)};var es=aE;const lE=es,cE=(e,t)=>e.sort((r,n)=>lE(r,n,t));var uE=cE;const fE=es,dE=(e,t)=>e.sort((r,n)=>fE(n,r,t));var hE=dE;const pE=qe,mE=(e,t,r)=>pE(e,t,r)>0;var Yn=mE;const gE=qe,yE=(e,t,r)=>gE(e,t,r)<0;var ts=yE;const EE=qe,vE=(e,t,r)=>EE(e,t,r)===0;var Zu=vE;const wE=qe,_E=(e,t,r)=>wE(e,t,r)!==0;var ef=_E;const SE=qe,AE=(e,t,r)=>SE(e,t,r)>=0;var rs=AE;const bE=qe,TE=(e,t,r)=>bE(e,t,r)<=0;var ns=TE;const CE=Zu,OE=ef,$E=Yn,RE=rs,IE=ts,PE=ns,DE=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return CE(e,r,n);case"!=":return OE(e,r,n);case">":return $E(e,r,n);case">=":return RE(e,r,n);case"<":return IE(e,r,n);case"<=":return PE(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var tf=DE;const NE=Re,FE=Kt,{safeRe:fn,t:dn}=jr,xE=(e,t)=>{if(e instanceof NE)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?fn[dn.COERCEFULL]:fn[dn.COERCE]);else{const l=t.includePrerelease?fn[dn.COERCERTLFULL]:fn[dn.COERCERTL];let c;for(;(c=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(r===null)return null;const n=r[2],i=r[3]||"0",o=r[4]||"0",s=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return FE(`${n}.${i}.${o}${s}${a}`,t)};var LE=xE;class UE{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,r)}return this}}var kE=UE,eo,il;function He(){if(il)return eo;il=1;const e=/\s+/g;class t{constructor(C,N){if(N=i(N),C instanceof t)return C.loose===!!N.loose&&C.includePrerelease===!!N.includePrerelease?C:new t(C.raw,N);if(C instanceof o)return this.raw=C.value,this.set=[[C]],this.formatted=void 0,this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=C.trim().replace(e," "),this.set=this.raw.split("||").map(O=>this.parseRange(O.trim())).filter(O=>O.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const O=this.set[0];if(this.set=this.set.filter(L=>!_(L[0])),this.set.length===0)this.set=[O];else if(this.set.length>1){for(const L of this.set)if(L.length===1&&v(L[0])){this.set=[L];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let C=0;C<this.set.length;C++){C>0&&(this.formatted+="||");const N=this.set[C];for(let O=0;O<N.length;O++)O>0&&(this.formatted+=" "),this.formatted+=N[O].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(C){const O=((this.options.includePrerelease&&p)|(this.options.loose&&E))+":"+C,L=n.get(O);if(L)return L;const F=this.options.loose,G=F?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];C=C.replace(G,H(this.options.includePrerelease)),s("hyphen replace",C),C=C.replace(l[c.COMPARATORTRIM],f),s("comparator trim",C),C=C.replace(l[c.TILDETRIM],u),s("tilde trim",C),C=C.replace(l[c.CARETTRIM],h),s("caret trim",C);let Y=C.split(" ").map(W=>T(W,this.options)).join(" ").split(/\s+/).map(W=>B(W,this.options));F&&(Y=Y.filter(W=>(s("loose invalid filter",W,this.options),!!W.match(l[c.COMPARATORLOOSE])))),s("range list",Y);const V=new Map,K=Y.map(W=>new o(W,this.options));for(const W of K){if(_(W))return[W];V.set(W.value,W)}V.size>1&&V.has("")&&V.delete("");const fe=[...V.values()];return n.set(O,fe),fe}intersects(C,N){if(!(C instanceof t))throw new TypeError("a Range is required");return this.set.some(O=>b(O,N)&&C.set.some(L=>b(L,N)&&O.every(F=>L.every(G=>F.intersects(G,N)))))}test(C){if(!C)return!1;if(typeof C=="string")try{C=new a(C,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(z(this.set[N],C,this.options))return!0;return!1}}eo=t;const r=kE,n=new r,i=Zo,o=Xn(),s=zn,a=Re,{safeRe:l,t:c,comparatorTrimReplace:f,tildeTrimReplace:u,caretTrimReplace:h}=jr,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:E}=Vn,_=P=>P.value==="<0.0.0-0",v=P=>P.value==="",b=(P,C)=>{let N=!0;const O=P.slice();let L=O.pop();for(;N&&O.length;)N=O.every(F=>L.intersects(F,C)),L=O.pop();return N},T=(P,C)=>(s("comp",P,C),P=A(P,C),s("caret",P),P=k(P,C),s("tildes",P),P=D(P,C),s("xrange",P),P=j(P,C),s("stars",P),P),x=P=>!P||P.toLowerCase()==="x"||P==="*",k=(P,C)=>P.trim().split(/\s+/).map(N=>U(N,C)).join(" "),U=(P,C)=>{const N=C.loose?l[c.TILDELOOSE]:l[c.TILDE];return P.replace(N,(O,L,F,G,Y)=>{s("tilde",P,O,L,F,G,Y);let V;return x(L)?V="":x(F)?V=`>=${L}.0.0 <${+L+1}.0.0-0`:x(G)?V=`>=${L}.${F}.0 <${L}.${+F+1}.0-0`:Y?(s("replaceTilde pr",Y),V=`>=${L}.${F}.${G}-${Y} <${L}.${+F+1}.0-0`):V=`>=${L}.${F}.${G} <${L}.${+F+1}.0-0`,s("tilde return",V),V})},A=(P,C)=>P.trim().split(/\s+/).map(N=>$(N,C)).join(" "),$=(P,C)=>{s("caret",P,C);const N=C.loose?l[c.CARETLOOSE]:l[c.CARET],O=C.includePrerelease?"-0":"";return P.replace(N,(L,F,G,Y,V)=>{s("caret",P,L,F,G,Y,V);let K;return x(F)?K="":x(G)?K=`>=${F}.0.0${O} <${+F+1}.0.0-0`:x(Y)?F==="0"?K=`>=${F}.${G}.0${O} <${F}.${+G+1}.0-0`:K=`>=${F}.${G}.0${O} <${+F+1}.0.0-0`:V?(s("replaceCaret pr",V),F==="0"?G==="0"?K=`>=${F}.${G}.${Y}-${V} <${F}.${G}.${+Y+1}-0`:K=`>=${F}.${G}.${Y}-${V} <${F}.${+G+1}.0-0`:K=`>=${F}.${G}.${Y}-${V} <${+F+1}.0.0-0`):(s("no pr"),F==="0"?G==="0"?K=`>=${F}.${G}.${Y}${O} <${F}.${G}.${+Y+1}-0`:K=`>=${F}.${G}.${Y}${O} <${F}.${+G+1}.0-0`:K=`>=${F}.${G}.${Y} <${+F+1}.0.0-0`),s("caret return",K),K})},D=(P,C)=>(s("replaceXRanges",P,C),P.split(/\s+/).map(N=>y(N,C)).join(" ")),y=(P,C)=>{P=P.trim();const N=C.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return P.replace(N,(O,L,F,G,Y,V)=>{s("xRange",P,O,L,F,G,Y,V);const K=x(F),fe=K||x(G),W=fe||x(Y),Ge=W;return L==="="&&Ge&&(L=""),V=C.includePrerelease?"-0":"",K?L===">"||L==="<"?O="<0.0.0-0":O="*":L&&Ge?(fe&&(G=0),Y=0,L===">"?(L=">=",fe?(F=+F+1,G=0,Y=0):(G=+G+1,Y=0)):L==="<="&&(L="<",fe?F=+F+1:G=+G+1),L==="<"&&(V="-0"),O=`${L+F}.${G}.${Y}${V}`):fe?O=`>=${F}.0.0${V} <${+F+1}.0.0-0`:W&&(O=`>=${F}.${G}.0${V} <${F}.${+G+1}.0-0`),s("xRange return",O),O})},j=(P,C)=>(s("replaceStars",P,C),P.trim().replace(l[c.STAR],"")),B=(P,C)=>(s("replaceGTE0",P,C),P.trim().replace(l[C.includePrerelease?c.GTE0PRE:c.GTE0],"")),H=P=>(C,N,O,L,F,G,Y,V,K,fe,W,Ge)=>(x(O)?N="":x(L)?N=`>=${O}.0.0${P?"-0":""}`:x(F)?N=`>=${O}.${L}.0${P?"-0":""}`:G?N=`>=${N}`:N=`>=${N}${P?"-0":""}`,x(K)?V="":x(fe)?V=`<${+K+1}.0.0-0`:x(W)?V=`<${K}.${+fe+1}.0-0`:Ge?V=`<=${K}.${fe}.${W}-${Ge}`:P?V=`<${K}.${fe}.${+W+1}-0`:V=`<=${V}`,`${N} ${V}`.trim()),z=(P,C,N)=>{for(let O=0;O<P.length;O++)if(!P[O].test(C))return!1;if(C.prerelease.length&&!N.includePrerelease){for(let O=0;O<P.length;O++)if(s(P[O].semver),P[O].semver!==o.ANY&&P[O].semver.prerelease.length>0){const L=P[O].semver;if(L.major===C.major&&L.minor===C.minor&&L.patch===C.patch)return!0}return!1}return!0};return eo}var to,ol;function Xn(){if(ol)return to;ol=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,u){if(u=r(u),f instanceof t){if(f.loose===!!u.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),s("comparator",f,u),this.options=u,this.loose=!!u.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(f){const u=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],h=f.match(u);if(!h)throw new TypeError(`Invalid comparator: ${f}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new a(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(s("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new a(f,this.options)}catch{return!1}return o(f,this.operator,this.semver,this.options)}intersects(f,u){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,u).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,u).test(f.semver):(u=r(u),u.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||o(this.semver,"<",f.semver,u)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||o(this.semver,">",f.semver,u)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}to=t;const r=Zo,{safeRe:n,t:i}=jr,o=tf,s=zn,a=Re,l=He();return to}const ME=He(),jE=(e,t,r)=>{try{t=new ME(t,r)}catch{return!1}return t.test(e)};var Jn=jE;const BE=He(),qE=(e,t)=>new BE(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var HE=qE;const GE=Re,WE=He(),VE=(e,t,r)=>{let n=null,i=null,o=null;try{o=new WE(t,r)}catch{return null}return e.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new GE(n,r))}),n};var zE=VE;const YE=Re,XE=He(),JE=(e,t,r)=>{let n=null,i=null,o=null;try{o=new XE(t,r)}catch{return null}return e.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new YE(n,r))}),n};var KE=JE;const ro=Re,QE=He(),sl=Yn,ZE=(e,t)=>{e=new QE(e,t);let r=new ro("0.0.0");if(e.test(r)||(r=new ro("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const i=e.set[n];let o=null;i.forEach(s=>{const a=new ro(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||sl(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||sl(r,o))&&(r=o)}return r&&e.test(r)?r:null};var ev=ZE;const tv=He(),rv=(e,t)=>{try{return new tv(e,t).range||"*"}catch{return null}};var nv=rv;const iv=Re,rf=Xn(),{ANY:ov}=rf,sv=He(),av=Jn,al=Yn,ll=ts,lv=ns,cv=rs,uv=(e,t,r,n)=>{e=new iv(e,n),t=new sv(t,n);let i,o,s,a,l;switch(r){case">":i=al,o=lv,s=ll,a=">",l=">=";break;case"<":i=ll,o=cv,s=al,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(av(e,t,n))return!1;for(let c=0;c<t.set.length;++c){const f=t.set[c];let u=null,h=null;if(f.forEach(p=>{p.semver===ov&&(p=new rf(">=0.0.0")),u=u||p,h=h||p,i(p.semver,u.semver,n)?u=p:s(p.semver,h.semver,n)&&(h=p)}),u.operator===a||u.operator===l||(!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===l&&s(e,h.semver))return!1}return!0};var is=uv;const fv=is,dv=(e,t,r)=>fv(e,t,">",r);var hv=dv;const pv=is,mv=(e,t,r)=>pv(e,t,"<",r);var gv=mv;const cl=He(),yv=(e,t,r)=>(e=new cl(e,r),t=new cl(t,r),e.intersects(t,r));var Ev=yv;const vv=Jn,wv=qe;var _v=(e,t,r)=>{const n=[];let i=null,o=null;const s=e.sort((f,u)=>wv(f,u,r));for(const f of s)vv(f,t,r)?(o=f,i||(i=f)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);const a=[];for(const[f,u]of n)f===u?a.push(f):!u&&f===s[0]?a.push("*"):u?f===s[0]?a.push(`<=${u}`):a.push(`${f} - ${u}`):a.push(`>=${f}`);const l=a.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return l.length<c.length?l:t};const ul=He(),os=Xn(),{ANY:no}=os,lr=Jn,ss=qe,Sv=(e,t,r={})=>{if(e===t)return!0;e=new ul(e,r),t=new ul(t,r);let n=!1;e:for(const i of e.set){for(const o of t.set){const s=bv(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},Av=[new os(">=0.0.0-0")],fl=[new os(">=0.0.0")],bv=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===no){if(t.length===1&&t[0].semver===no)return!0;r.includePrerelease?e=Av:e=fl}if(t.length===1&&t[0].semver===no){if(r.includePrerelease)return!0;t=fl}const n=new Set;let i,o;for(const p of e)p.operator===">"||p.operator===">="?i=dl(i,p,r):p.operator==="<"||p.operator==="<="?o=hl(o,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(i&&o){if(s=ss(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(const p of n){if(i&&!lr(p,String(i),r)||o&&!lr(p,String(o),r))return null;for(const E of t)if(!lr(p,String(E),r))return!1;return!0}let a,l,c,f,u=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;u&&u.prerelease.length===1&&o.operator==="<"&&u.prerelease[0]===0&&(u=!1);for(const p of t){if(f=f||p.operator===">"||p.operator===">=",c=c||p.operator==="<"||p.operator==="<=",i){if(h&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===h.major&&p.semver.minor===h.minor&&p.semver.patch===h.patch&&(h=!1),p.operator===">"||p.operator===">="){if(a=dl(i,p,r),a===p&&a!==i)return!1}else if(i.operator===">="&&!lr(i.semver,String(p),r))return!1}if(o){if(u&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===u.major&&p.semver.minor===u.minor&&p.semver.patch===u.patch&&(u=!1),p.operator==="<"||p.operator==="<="){if(l=hl(o,p,r),l===p&&l!==o)return!1}else if(o.operator==="<="&&!lr(o.semver,String(p),r))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&c&&!o&&s!==0||o&&f&&!i&&s!==0||h||u)},dl=(e,t,r)=>{if(!e)return t;const n=ss(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},hl=(e,t,r)=>{if(!e)return t;const n=ss(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var Tv=Sv;const io=jr,pl=Vn,Cv=Re,ml=Qu,Ov=Kt,$v=Fy,Rv=Uy,Iv=My,Pv=By,Dv=Gy,Nv=zy,Fv=Jy,xv=Zy,Lv=qe,Uv=nE,kv=sE,Mv=es,jv=uE,Bv=hE,qv=Yn,Hv=ts,Gv=Zu,Wv=ef,Vv=rs,zv=ns,Yv=tf,Xv=LE,Jv=Xn(),Kv=He(),Qv=Jn,Zv=HE,ew=zE,tw=KE,rw=ev,nw=nv,iw=is,ow=hv,sw=gv,aw=Ev,lw=_v,cw=Tv;var nf={parse:Ov,valid:$v,clean:Rv,inc:Iv,diff:Pv,major:Dv,minor:Nv,patch:Fv,prerelease:xv,compare:Lv,rcompare:Uv,compareLoose:kv,compareBuild:Mv,sort:jv,rsort:Bv,gt:qv,lt:Hv,eq:Gv,neq:Wv,gte:Vv,lte:zv,cmp:Yv,coerce:Xv,Comparator:Jv,Range:Kv,satisfies:Qv,toComparators:Zv,maxSatisfying:ew,minSatisfying:tw,minVersion:rw,validRange:nw,outside:iw,gtr:ow,ltr:sw,intersects:aw,simplifyRange:lw,subset:cw,SemVer:Cv,re:io.re,src:io.src,tokens:io.t,SEMVER_SPEC_VERSION:pl.SEMVER_SPEC_VERSION,RELEASE_TYPES:pl.RELEASE_TYPES,compareIdentifiers:ml.compareIdentifiers,rcompareIdentifiers:ml.rcompareIdentifiers},Br={},Nn={exports:{}};Nn.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",i=1,o=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",f="[object Boolean]",u="[object Date]",h="[object Error]",p="[object Function]",E="[object GeneratorFunction]",_="[object Map]",v="[object Number]",b="[object Null]",T="[object Object]",x="[object Promise]",k="[object Proxy]",U="[object RegExp]",A="[object Set]",$="[object String]",D="[object Symbol]",y="[object Undefined]",j="[object WeakMap]",B="[object ArrayBuffer]",H="[object DataView]",z="[object Float32Array]",P="[object Float64Array]",C="[object Int8Array]",N="[object Int16Array]",O="[object Int32Array]",L="[object Uint8Array]",F="[object Uint8ClampedArray]",G="[object Uint16Array]",Y="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,fe=/^(?:0|[1-9]\d*)$/,W={};W[z]=W[P]=W[C]=W[N]=W[O]=W[L]=W[F]=W[G]=W[Y]=!0,W[a]=W[l]=W[B]=W[f]=W[H]=W[u]=W[h]=W[p]=W[_]=W[v]=W[T]=W[U]=W[A]=W[$]=W[j]=!1;var Ge=typeof je=="object"&&je&&je.Object===Object&&je,m=typeof self=="object"&&self&&self.Object===Object&&self,d=Ge||m||Function("return this")(),R=t&&!t.nodeType&&t,S=R&&!0&&e&&!e.nodeType&&e,ee=S&&S.exports===R,ne=ee&&Ge.process,ae=function(){try{return ne&&ne.binding&&ne.binding("util")}catch{}}(),ge=ae&&ae.isTypedArray;function we(g,w){for(var I=-1,M=g==null?0:g.length,re=0,X=[];++I<M;){var le=g[I];w(le,I,g)&&(X[re++]=le)}return X}function et(g,w){for(var I=-1,M=w.length,re=g.length;++I<M;)g[re+I]=w[I];return g}function ue(g,w){for(var I=-1,M=g==null?0:g.length;++I<M;)if(w(g[I],I,g))return!0;return!1}function Ue(g,w){for(var I=-1,M=Array(g);++I<g;)M[I]=w(I);return M}function oi(g){return function(w){return g(w)}}function Vr(g,w){return g.has(w)}function er(g,w){return g==null?void 0:g[w]}function zr(g){var w=-1,I=Array(g.size);return g.forEach(function(M,re){I[++w]=[re,M]}),I}function gf(g,w){return function(I){return g(w(I))}}function yf(g){var w=-1,I=Array(g.size);return g.forEach(function(M){I[++w]=M}),I}var Ef=Array.prototype,vf=Function.prototype,Yr=Object.prototype,si=d["__core-js_shared__"],us=vf.toString,We=Yr.hasOwnProperty,fs=function(){var g=/[^.]+$/.exec(si&&si.keys&&si.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),ds=Yr.toString,wf=RegExp("^"+us.call(We).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hs=ee?d.Buffer:void 0,Xr=d.Symbol,ps=d.Uint8Array,ms=Yr.propertyIsEnumerable,_f=Ef.splice,mt=Xr?Xr.toStringTag:void 0,gs=Object.getOwnPropertySymbols,Sf=hs?hs.isBuffer:void 0,Af=gf(Object.keys,Object),ai=It(d,"DataView"),tr=It(d,"Map"),li=It(d,"Promise"),ci=It(d,"Set"),ui=It(d,"WeakMap"),rr=It(Object,"create"),bf=Et(ai),Tf=Et(tr),Cf=Et(li),Of=Et(ci),$f=Et(ui),ys=Xr?Xr.prototype:void 0,fi=ys?ys.valueOf:void 0;function gt(g){var w=-1,I=g==null?0:g.length;for(this.clear();++w<I;){var M=g[w];this.set(M[0],M[1])}}function Rf(){this.__data__=rr?rr(null):{},this.size=0}function If(g){var w=this.has(g)&&delete this.__data__[g];return this.size-=w?1:0,w}function Pf(g){var w=this.__data__;if(rr){var I=w[g];return I===n?void 0:I}return We.call(w,g)?w[g]:void 0}function Df(g){var w=this.__data__;return rr?w[g]!==void 0:We.call(w,g)}function Nf(g,w){var I=this.__data__;return this.size+=this.has(g)?0:1,I[g]=rr&&w===void 0?n:w,this}gt.prototype.clear=Rf,gt.prototype.delete=If,gt.prototype.get=Pf,gt.prototype.has=Df,gt.prototype.set=Nf;function Xe(g){var w=-1,I=g==null?0:g.length;for(this.clear();++w<I;){var M=g[w];this.set(M[0],M[1])}}function Ff(){this.__data__=[],this.size=0}function xf(g){var w=this.__data__,I=Kr(w,g);if(I<0)return!1;var M=w.length-1;return I==M?w.pop():_f.call(w,I,1),--this.size,!0}function Lf(g){var w=this.__data__,I=Kr(w,g);return I<0?void 0:w[I][1]}function Uf(g){return Kr(this.__data__,g)>-1}function kf(g,w){var I=this.__data__,M=Kr(I,g);return M<0?(++this.size,I.push([g,w])):I[M][1]=w,this}Xe.prototype.clear=Ff,Xe.prototype.delete=xf,Xe.prototype.get=Lf,Xe.prototype.has=Uf,Xe.prototype.set=kf;function yt(g){var w=-1,I=g==null?0:g.length;for(this.clear();++w<I;){var M=g[w];this.set(M[0],M[1])}}function Mf(){this.size=0,this.__data__={hash:new gt,map:new(tr||Xe),string:new gt}}function jf(g){var w=Qr(this,g).delete(g);return this.size-=w?1:0,w}function Bf(g){return Qr(this,g).get(g)}function qf(g){return Qr(this,g).has(g)}function Hf(g,w){var I=Qr(this,g),M=I.size;return I.set(g,w),this.size+=I.size==M?0:1,this}yt.prototype.clear=Mf,yt.prototype.delete=jf,yt.prototype.get=Bf,yt.prototype.has=qf,yt.prototype.set=Hf;function Jr(g){var w=-1,I=g==null?0:g.length;for(this.__data__=new yt;++w<I;)this.add(g[w])}function Gf(g){return this.__data__.set(g,n),this}function Wf(g){return this.__data__.has(g)}Jr.prototype.add=Jr.prototype.push=Gf,Jr.prototype.has=Wf;function tt(g){var w=this.__data__=new Xe(g);this.size=w.size}function Vf(){this.__data__=new Xe,this.size=0}function zf(g){var w=this.__data__,I=w.delete(g);return this.size=w.size,I}function Yf(g){return this.__data__.get(g)}function Xf(g){return this.__data__.has(g)}function Jf(g,w){var I=this.__data__;if(I instanceof Xe){var M=I.__data__;if(!tr||M.length<r-1)return M.push([g,w]),this.size=++I.size,this;I=this.__data__=new yt(M)}return I.set(g,w),this.size=I.size,this}tt.prototype.clear=Vf,tt.prototype.delete=zf,tt.prototype.get=Yf,tt.prototype.has=Xf,tt.prototype.set=Jf;function Kf(g,w){var I=Zr(g),M=!I&&dd(g),re=!I&&!M&&di(g),X=!I&&!M&&!re&&Cs(g),le=I||M||re||X,de=le?Ue(g.length,String):[],ye=de.length;for(var ie in g)We.call(g,ie)&&!(le&&(ie=="length"||re&&(ie=="offset"||ie=="parent")||X&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||ad(ie,ye)))&&de.push(ie);return de}function Kr(g,w){for(var I=g.length;I--;)if(Ss(g[I][0],w))return I;return-1}function Qf(g,w,I){var M=w(g);return Zr(g)?M:et(M,I(g))}function nr(g){return g==null?g===void 0?y:b:mt&&mt in Object(g)?od(g):fd(g)}function Es(g){return ir(g)&&nr(g)==a}function vs(g,w,I,M,re){return g===w?!0:g==null||w==null||!ir(g)&&!ir(w)?g!==g&&w!==w:Zf(g,w,I,M,vs,re)}function Zf(g,w,I,M,re,X){var le=Zr(g),de=Zr(w),ye=le?l:rt(g),ie=de?l:rt(w);ye=ye==a?T:ye,ie=ie==a?T:ie;var De=ye==T,ke=ie==T,_e=ye==ie;if(_e&&di(g)){if(!di(w))return!1;le=!0,De=!1}if(_e&&!De)return X||(X=new tt),le||Cs(g)?ws(g,w,I,M,re,X):nd(g,w,ye,I,M,re,X);if(!(I&i)){var Fe=De&&We.call(g,"__wrapped__"),xe=ke&&We.call(w,"__wrapped__");if(Fe||xe){var nt=Fe?g.value():g,Je=xe?w.value():w;return X||(X=new tt),re(nt,Je,I,M,X)}}return _e?(X||(X=new tt),id(g,w,I,M,re,X)):!1}function ed(g){if(!Ts(g)||cd(g))return!1;var w=As(g)?wf:K;return w.test(Et(g))}function td(g){return ir(g)&&bs(g.length)&&!!W[nr(g)]}function rd(g){if(!ud(g))return Af(g);var w=[];for(var I in Object(g))We.call(g,I)&&I!="constructor"&&w.push(I);return w}function ws(g,w,I,M,re,X){var le=I&i,de=g.length,ye=w.length;if(de!=ye&&!(le&&ye>de))return!1;var ie=X.get(g);if(ie&&X.get(w))return ie==w;var De=-1,ke=!0,_e=I&o?new Jr:void 0;for(X.set(g,w),X.set(w,g);++De<de;){var Fe=g[De],xe=w[De];if(M)var nt=le?M(xe,Fe,De,w,g,X):M(Fe,xe,De,g,w,X);if(nt!==void 0){if(nt)continue;ke=!1;break}if(_e){if(!ue(w,function(Je,vt){if(!Vr(_e,vt)&&(Fe===Je||re(Fe,Je,I,M,X)))return _e.push(vt)})){ke=!1;break}}else if(!(Fe===xe||re(Fe,xe,I,M,X))){ke=!1;break}}return X.delete(g),X.delete(w),ke}function nd(g,w,I,M,re,X,le){switch(I){case H:if(g.byteLength!=w.byteLength||g.byteOffset!=w.byteOffset)return!1;g=g.buffer,w=w.buffer;case B:return!(g.byteLength!=w.byteLength||!X(new ps(g),new ps(w)));case f:case u:case v:return Ss(+g,+w);case h:return g.name==w.name&&g.message==w.message;case U:case $:return g==w+"";case _:var de=zr;case A:var ye=M&i;if(de||(de=yf),g.size!=w.size&&!ye)return!1;var ie=le.get(g);if(ie)return ie==w;M|=o,le.set(g,w);var De=ws(de(g),de(w),M,re,X,le);return le.delete(g),De;case D:if(fi)return fi.call(g)==fi.call(w)}return!1}function id(g,w,I,M,re,X){var le=I&i,de=_s(g),ye=de.length,ie=_s(w),De=ie.length;if(ye!=De&&!le)return!1;for(var ke=ye;ke--;){var _e=de[ke];if(!(le?_e in w:We.call(w,_e)))return!1}var Fe=X.get(g);if(Fe&&X.get(w))return Fe==w;var xe=!0;X.set(g,w),X.set(w,g);for(var nt=le;++ke<ye;){_e=de[ke];var Je=g[_e],vt=w[_e];if(M)var Os=le?M(vt,Je,_e,w,g,X):M(Je,vt,_e,g,w,X);if(!(Os===void 0?Je===vt||re(Je,vt,I,M,X):Os)){xe=!1;break}nt||(nt=_e=="constructor")}if(xe&&!nt){var en=g.constructor,tn=w.constructor;en!=tn&&"constructor"in g&&"constructor"in w&&!(typeof en=="function"&&en instanceof en&&typeof tn=="function"&&tn instanceof tn)&&(xe=!1)}return X.delete(g),X.delete(w),xe}function _s(g){return Qf(g,md,sd)}function Qr(g,w){var I=g.__data__;return ld(w)?I[typeof w=="string"?"string":"hash"]:I.map}function It(g,w){var I=er(g,w);return ed(I)?I:void 0}function od(g){var w=We.call(g,mt),I=g[mt];try{g[mt]=void 0;var M=!0}catch{}var re=ds.call(g);return M&&(w?g[mt]=I:delete g[mt]),re}var sd=gs?function(g){return g==null?[]:(g=Object(g),we(gs(g),function(w){return ms.call(g,w)}))}:gd,rt=nr;(ai&&rt(new ai(new ArrayBuffer(1)))!=H||tr&&rt(new tr)!=_||li&&rt(li.resolve())!=x||ci&&rt(new ci)!=A||ui&&rt(new ui)!=j)&&(rt=function(g){var w=nr(g),I=w==T?g.constructor:void 0,M=I?Et(I):"";if(M)switch(M){case bf:return H;case Tf:return _;case Cf:return x;case Of:return A;case $f:return j}return w});function ad(g,w){return w=w??s,!!w&&(typeof g=="number"||fe.test(g))&&g>-1&&g%1==0&&g<w}function ld(g){var w=typeof g;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?g!=="__proto__":g===null}function cd(g){return!!fs&&fs in g}function ud(g){var w=g&&g.constructor,I=typeof w=="function"&&w.prototype||Yr;return g===I}function fd(g){return ds.call(g)}function Et(g){if(g!=null){try{return us.call(g)}catch{}try{return g+""}catch{}}return""}function Ss(g,w){return g===w||g!==g&&w!==w}var dd=Es(function(){return arguments}())?Es:function(g){return ir(g)&&We.call(g,"callee")&&!ms.call(g,"callee")},Zr=Array.isArray;function hd(g){return g!=null&&bs(g.length)&&!As(g)}var di=Sf||yd;function pd(g,w){return vs(g,w)}function As(g){if(!Ts(g))return!1;var w=nr(g);return w==p||w==E||w==c||w==k}function bs(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=s}function Ts(g){var w=typeof g;return g!=null&&(w=="object"||w=="function")}function ir(g){return g!=null&&typeof g=="object"}var Cs=ge?oi(ge):td;function md(g){return hd(g)?Kf(g):rd(g)}function gd(){return[]}function yd(){return!1}e.exports=pd})(Nn,Nn.exports);var uw=Nn.exports;Object.defineProperty(Br,"__esModule",{value:!0});Br.DownloadedUpdateHelper=void 0;Br.createTempUpdateFile=mw;const fw=Dr,dw=Ne,gl=uw,_t=pt,wr=Z;class hw{constructor(t){this.cacheDir=t,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return wr.join(this.cacheDir,"pending")}async validateDownloadedPath(t,r,n,i){if(this.versionInfo!=null&&this.file===t&&this.fileInfo!=null)return gl(this.versionInfo,r)&&gl(this.fileInfo.info,n.info)&&await(0,_t.pathExists)(t)?t:null;const o=await this.getValidCachedUpdateFile(n,i);return o===null?null:(i.info(`Update has already been downloaded to ${t}).`),this._file=o,o)}async setDownloadedFile(t,r,n,i,o,s){this._file=t,this._packageFile=r,this.versionInfo=n,this.fileInfo=i,this._downloadedFileInfo={fileName:o,sha512:i.info.sha512,isAdminRightsRequired:i.info.isAdminRightsRequired===!0},s&&await(0,_t.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,_t.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(t,r){const n=this.getUpdateInfoFile();if(!await(0,_t.pathExists)(n))return null;let o;try{o=await(0,_t.readJson)(n)}catch(c){let f="No cached update info available";return c.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),f+=` (error on read: ${c.message})`),r.info(f),null}if(!((o==null?void 0:o.fileName)!==null))return r.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(t.info.sha512!==o.sha512)return r.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${o.sha512}, expected: ${t.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const a=wr.join(this.cacheDirForPendingUpdate,o.fileName);if(!await(0,_t.pathExists)(a))return r.info("Cached update file doesn't exist"),null;const l=await pw(a);return t.info.sha512!==l?(r.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${l}, expected: ${t.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=o,a)}getUpdateInfoFile(){return wr.join(this.cacheDirForPendingUpdate,"update-info.json")}}Br.DownloadedUpdateHelper=hw;function pw(e,t="sha512",r="base64",n){return new Promise((i,o)=>{const s=(0,fw.createHash)(t);s.on("error",o).setEncoding(r),(0,dw.createReadStream)(e,{...n,highWaterMark:1024*1024}).on("error",o).on("end",()=>{s.end(),i(s.read())}).pipe(s,{end:!1})})}async function mw(e,t,r){let n=0,i=wr.join(t,e);for(let o=0;o<3;o++)try{return await(0,_t.unlink)(i),i}catch(s){if(s.code==="ENOENT")return i;r.warn(`Error on remove temp update file: ${s}`),i=wr.join(t,`${n++}-${e}`)}return i}var Kn={},as={};Object.defineProperty(as,"__esModule",{value:!0});as.getAppCacheDir=yw;const oo=Z,gw=Ze;function yw(){const e=(0,gw.homedir)();let t;return process.platform==="win32"?t=process.env.LOCALAPPDATA||oo.join(e,"AppData","Local"):process.platform==="darwin"?t=oo.join(e,"Library","Caches"):t=process.env.XDG_CACHE_HOME||oo.join(e,".cache"),t}Object.defineProperty(Kn,"__esModule",{value:!0});Kn.ElectronAppAdapter=void 0;const yl=Z,Ew=as;class vw{constructor(t=se.app){this.app=t}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?yl.join(process.resourcesPath,"app-update.yml"):yl.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,Ew.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(t){this.app.once("quit",(r,n)=>t(n))}}Kn.ElectronAppAdapter=vw;var of={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.NET_SESSION_NAME=void 0,e.getNetSession=r;const t=pe;e.NET_SESSION_NAME="electron-updater";function r(){return se.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}class n extends t.HttpExecutor{constructor(o){super(),this.proxyLoginCallback=o,this.cachedSession=null}async download(o,s,a){return await a.cancellationToken.createPromise((l,c,f)=>{const u={headers:a.headers||void 0,redirect:"manual"};(0,t.configureRequestUrl)(o,u),(0,t.configureRequestOptions)(u),this.doDownload(u,{destination:s,options:a,onCancel:f,callback:h=>{h==null?l(s):c(h)},responseHandler:null},0)})}createRequest(o,s){o.headers&&o.headers.Host&&(o.host=o.headers.Host,delete o.headers.Host),this.cachedSession==null&&(this.cachedSession=r());const a=se.net.request({...o,session:this.cachedSession});return a.on("response",s),this.proxyLoginCallback!=null&&a.on("login",this.proxyLoginCallback),a}addRedirectHandlers(o,s,a,l,c){o.on("redirect",(f,u,h)=>{o.abort(),l>this.maxRedirects?a(this.createMaxRedirectError()):c(t.HttpExecutor.prepareRedirectUrlOptions(h,s))})}}e.ElectronHttpExecutor=n})(of);var qr={},Le={},ww=1/0,_w="[object Symbol]",sf=/[\\^$.*+?()[\]{}|]/g,Sw=RegExp(sf.source),Aw=typeof je=="object"&&je&&je.Object===Object&&je,bw=typeof self=="object"&&self&&self.Object===Object&&self,Tw=Aw||bw||Function("return this")(),Cw=Object.prototype,Ow=Cw.toString,El=Tw.Symbol,vl=El?El.prototype:void 0,wl=vl?vl.toString:void 0;function $w(e){if(typeof e=="string")return e;if(Iw(e))return wl?wl.call(e):"";var t=e+"";return t=="0"&&1/e==-ww?"-0":t}function Rw(e){return!!e&&typeof e=="object"}function Iw(e){return typeof e=="symbol"||Rw(e)&&Ow.call(e)==_w}function Pw(e){return e==null?"":$w(e)}function Dw(e){return e=Pw(e),e&&Sw.test(e)?e.replace(sf,"\\$&"):e}var Nw=Dw;Object.defineProperty(Le,"__esModule",{value:!0});Le.newBaseUrl=xw;Le.newUrlFromBase=$o;Le.getChannelFilename=Lw;Le.blockmapFiles=Uw;const af=Yt,Fw=Nw;function xw(e){const t=new af.URL(e);return t.pathname.endsWith("/")||(t.pathname+="/"),t}function $o(e,t,r=!1){const n=new af.URL(e,t),i=t.search;return i!=null&&i.length!==0?n.search=i:r&&(n.search=`noCache=${Date.now().toString(32)}`),n}function Lw(e){return`${e}.yml`}function Uw(e,t,r){const n=$o(`${e.pathname}.blockmap`,e);return[$o(`${e.pathname.replace(new RegExp(Fw(r),"g"),t)}.blockmap`,e),n]}var me={};Object.defineProperty(me,"__esModule",{value:!0});me.Provider=void 0;me.findFile=jw;me.parseUpdateInfo=Bw;me.getFileList=lf;me.resolveFiles=qw;const dt=pe,kw=ve,_l=Le;class Mw{constructor(t){this.runtimeOptions=t,this.requestHeaders=null,this.executor=t.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const t=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(t==="x64"?"":`-${t}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(t){return`${t}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(t){this.requestHeaders=t}httpRequest(t,r,n){return this.executor.request(this.createRequestOptions(t,r),n)}createRequestOptions(t,r){const n={};return this.requestHeaders==null?r!=null&&(n.headers=r):n.headers=r==null?this.requestHeaders:{...this.requestHeaders,...r},(0,dt.configureRequestUrl)(t,n),n}}me.Provider=Mw;function jw(e,t,r){if(e.length===0)throw(0,dt.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const n=e.find(i=>i.url.pathname.toLowerCase().endsWith(`.${t}`));return n??(r==null?e[0]:e.find(i=>!r.some(o=>i.url.pathname.toLowerCase().endsWith(`.${o}`))))}function Bw(e,t,r){if(e==null)throw(0,dt.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${r}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let n;try{n=(0,kw.load)(e)}catch(i){throw(0,dt.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${r}): ${i.stack||i.message}, rawData: ${e}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return n}function lf(e){const t=e.files;if(t!=null&&t.length>0)return t;if(e.path!=null)return[{url:e.path,sha2:e.sha2,sha512:e.sha512}];throw(0,dt.newError)(`No files provided: ${(0,dt.safeStringifyJson)(e)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function qw(e,t,r=n=>n){const i=lf(e).map(a=>{if(a.sha2==null&&a.sha512==null)throw(0,dt.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,dt.safeStringifyJson)(a)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,_l.newUrlFromBase)(r(a.url),t),info:a}}),o=e.packages,s=o==null?null:o[process.arch]||o.ia32;return s!=null&&(i[0].packageInfo={...s,path:(0,_l.newUrlFromBase)(r(s.path),t).href}),i}Object.defineProperty(qr,"__esModule",{value:!0});qr.GenericProvider=void 0;const Sl=pe,so=Le,ao=me;class Hw extends ao.Provider{constructor(t,r,n){super(n),this.configuration=t,this.updater=r,this.baseUrl=(0,so.newBaseUrl)(this.configuration.url)}get channel(){const t=this.updater.channel||this.configuration.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){const t=(0,so.getChannelFilename)(this.channel),r=(0,so.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);for(let n=0;;n++)try{return(0,ao.parseUpdateInfo)(await this.httpRequest(r),t,r)}catch(i){if(i instanceof Sl.HttpError&&i.statusCode===404)throw(0,Sl.newError)(`Cannot find channel "${t}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&n<3){await new Promise((o,s)=>{try{setTimeout(o,1e3*n)}catch(a){s(a)}});continue}throw i}}resolveFiles(t){return(0,ao.resolveFiles)(t,this.baseUrl)}}qr.GenericProvider=Hw;var Qn={},Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.BitbucketProvider=void 0;const Al=pe,lo=Le,co=me;class Gw extends co.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=r;const{owner:i,slug:o}=t;this.baseUrl=(0,lo.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${o}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const t=new Al.CancellationToken,r=(0,lo.getChannelFilename)(this.getCustomChannelName(this.channel)),n=(0,lo.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(n,void 0,t);return(0,co.parseUpdateInfo)(i,r,n)}catch(i){throw(0,Al.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,co.resolveFiles)(t,this.baseUrl)}toString(){const{owner:t,slug:r}=this.configuration;return`Bitbucket (owner: ${t}, slug: ${r}, channel: ${this.channel})`}}Zn.BitbucketProvider=Gw;var ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.GitHubProvider=ht.BaseGitHubProvider=void 0;ht.computeReleaseNotes=uf;const Ke=pe,Mt=nf,Ww=Yt,jt=Le,Ro=me,uo=/\/tag\/([^/]+)$/;class cf extends Ro.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.options=t,this.baseUrl=(0,jt.newBaseUrl)((0,Ke.githubUrl)(t,r));const i=r==="github.com"?"api.github.com":r;this.baseApiUrl=(0,jt.newBaseUrl)((0,Ke.githubUrl)(t,i))}computeGithubBasePath(t){const r=this.options.host;return r&&!["github.com","api.github.com"].includes(r)?`/api/v3${t}`:t}}ht.BaseGitHubProvider=cf;class Vw extends cf{constructor(t,r,n){super(t,"github.com",n),this.options=t,this.updater=r}get channel(){const t=this.updater.channel||this.options.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){var t,r,n,i,o;const s=new Ke.CancellationToken,a=await this.httpRequest((0,jt.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},s),l=(0,Ke.parseXml)(a);let c=l.element("entry",!1,"No published versions on GitHub"),f=null;try{if(this.updater.allowPrerelease){const v=((t=this.updater)===null||t===void 0?void 0:t.channel)||((r=Mt.prerelease(this.updater.currentVersion))===null||r===void 0?void 0:r[0])||null;if(v===null)f=uo.exec(c.element("link").attribute("href"))[1];else for(const b of l.getElements("entry")){const T=uo.exec(b.element("link").attribute("href"));if(T===null)continue;const x=T[1],k=((n=Mt.prerelease(x))===null||n===void 0?void 0:n[0])||null,U=!v||["alpha","beta"].includes(v),A=k!==null&&!["alpha","beta"].includes(String(k));if(U&&!A&&!(v==="beta"&&k==="alpha")){f=x;break}if(k&&k===v){f=x;break}}}else{f=await this.getLatestTagName(s);for(const v of l.getElements("entry"))if(uo.exec(v.element("link").attribute("href"))[1]===f){c=v;break}}}catch(v){throw(0,Ke.newError)(`Cannot parse releases feed: ${v.stack||v.message},
XML:
${a}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(f==null)throw(0,Ke.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let u,h="",p="";const E=async v=>{h=(0,jt.getChannelFilename)(v),p=(0,jt.newUrlFromBase)(this.getBaseDownloadPath(String(f),h),this.baseUrl);const b=this.createRequestOptions(p);try{return await this.executor.request(b,s)}catch(T){throw T instanceof Ke.HttpError&&T.statusCode===404?(0,Ke.newError)(`Cannot find ${h} in the latest release artifacts (${p}): ${T.stack||T.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):T}};try{let v=this.channel;this.updater.allowPrerelease&&(!((i=Mt.prerelease(f))===null||i===void 0)&&i[0])&&(v=this.getCustomChannelName(String((o=Mt.prerelease(f))===null||o===void 0?void 0:o[0]))),u=await E(v)}catch(v){if(this.updater.allowPrerelease)u=await E(this.getDefaultChannelName());else throw v}const _=(0,Ro.parseUpdateInfo)(u,h,p);return _.releaseName==null&&(_.releaseName=c.elementValueOrEmpty("title")),_.releaseNotes==null&&(_.releaseNotes=uf(this.updater.currentVersion,this.updater.fullChangelog,l,c)),{tag:f,..._}}async getLatestTagName(t){const r=this.options,n=r.host==null||r.host==="github.com"?(0,jt.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new Ww.URL(`${this.computeGithubBasePath(`/repos/${r.owner}/${r.repo}/releases`)}/latest`,this.baseApiUrl);try{const i=await this.httpRequest(n,{Accept:"application/json"},t);return i==null?null:JSON.parse(i).tag_name}catch(i){throw(0,Ke.newError)(`Unable to find latest version on GitHub (${n}), please ensure a production release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(t){return(0,Ro.resolveFiles)(t,this.baseUrl,r=>this.getBaseDownloadPath(t.tag,r.replace(/ /g,"-")))}getBaseDownloadPath(t,r){return`${this.basePath}/download/${t}/${r}`}}ht.GitHubProvider=Vw;function bl(e){const t=e.elementValueOrEmpty("content");return t==="No content."?"":t}function uf(e,t,r,n){if(!t)return bl(n);const i=[];for(const o of r.getElements("entry")){const s=/\/tag\/v?([^/]+)$/.exec(o.element("link").attribute("href"))[1];Mt.lt(e,s)&&i.push({version:s,note:bl(o)})}return i.sort((o,s)=>Mt.rcompare(o.version,s.version))}var ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.KeygenProvider=void 0;const Tl=pe,fo=Le,ho=me;class zw extends ho.Provider{constructor(t,r,n){super({...n,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=r,this.baseUrl=(0,fo.newBaseUrl)(`https://api.keygen.sh/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const t=new Tl.CancellationToken,r=(0,fo.getChannelFilename)(this.getCustomChannelName(this.channel)),n=(0,fo.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(n,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},t);return(0,ho.parseUpdateInfo)(i,r,n)}catch(i){throw(0,Tl.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,ho.resolveFiles)(t,this.baseUrl)}toString(){const{account:t,product:r,platform:n}=this.configuration;return`Keygen (account: ${t}, product: ${r}, platform: ${n}, channel: ${this.channel})`}}ei.KeygenProvider=zw;var ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.PrivateGitHubProvider=void 0;const Ft=pe,Yw=ve,Xw=Z,Cl=Yt,Ol=Le,Jw=ht,Kw=me;class Qw extends Jw.BaseGitHubProvider{constructor(t,r,n,i){super(t,"api.github.com",i),this.updater=r,this.token=n}createRequestOptions(t,r){const n=super.createRequestOptions(t,r);return n.redirect="manual",n}async getLatestVersion(){const t=new Ft.CancellationToken,r=(0,Ol.getChannelFilename)(this.getDefaultChannelName()),n=await this.getLatestVersionInfo(t),i=n.assets.find(a=>a.name===r);if(i==null)throw(0,Ft.newError)(`Cannot find ${r} in the release ${n.html_url||n.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const o=new Cl.URL(i.url);let s;try{s=(0,Yw.load)(await this.httpRequest(o,this.configureHeaders("application/octet-stream"),t))}catch(a){throw a instanceof Ft.HttpError&&a.statusCode===404?(0,Ft.newError)(`Cannot find ${r} in the latest release artifacts (${o}): ${a.stack||a.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):a}return s.assets=n.assets,s}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(t){return{accept:t,authorization:`token ${this.token}`}}async getLatestVersionInfo(t){const r=this.updater.allowPrerelease;let n=this.basePath;r||(n=`${n}/latest`);const i=(0,Ol.newUrlFromBase)(n,this.baseUrl);try{const o=JSON.parse(await this.httpRequest(i,this.configureHeaders("application/vnd.github.v3+json"),t));return r?o.find(s=>s.prerelease)||o[0]:o}catch(o){throw(0,Ft.newError)(`Unable to find latest version on GitHub (${i}), please ensure a production release exists: ${o.stack||o.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(t){return(0,Kw.getFileList)(t).map(r=>{const n=Xw.posix.basename(r.url).replace(/ /g,"-"),i=t.assets.find(o=>o!=null&&o.name===n);if(i==null)throw(0,Ft.newError)(`Cannot find asset "${n}" in: ${JSON.stringify(t.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new Cl.URL(i.url),info:r}})}}ti.PrivateGitHubProvider=Qw;Object.defineProperty(Qn,"__esModule",{value:!0});Qn.isUrlProbablySupportMultiRangeRequests=ff;Qn.createClient=n_;const hn=pe,Zw=Zn,$l=qr,e_=ht,t_=ei,r_=ti;function ff(e){return!e.includes("s3.amazonaws.com")}function n_(e,t,r){if(typeof e=="string")throw(0,hn.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const n=e.provider;switch(n){case"github":{const i=e,o=(i.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||i.token;return o==null?new e_.GitHubProvider(i,t,r):new r_.PrivateGitHubProvider(i,t,o,r)}case"bitbucket":return new Zw.BitbucketProvider(e,t,r);case"keygen":return new t_.KeygenProvider(e,t,r);case"s3":case"spaces":return new $l.GenericProvider({provider:"generic",url:(0,hn.getS3LikeProviderBaseUrl)(e),channel:e.channel||null},t,{...r,isUseMultipleRangeRequest:!1});case"generic":{const i=e;return new $l.GenericProvider(i,t,{...r,isUseMultipleRangeRequest:i.useMultipleRangeRequest!==!1&&ff(i.url)})}case"custom":{const i=e,o=i.updateProvider;if(!o)throw(0,hn.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new o(i,t,r)}default:throw(0,hn.newError)(`Unsupported provider: ${n}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}var ri={},Hr={},Qt={},Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.OperationKind=void 0;Rt.computeOperations=i_;var At;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(At||(Rt.OperationKind=At={}));function i_(e,t,r){const n=Il(e.files),i=Il(t.files);let o=null;const s=t.files[0],a=[],l=s.name,c=n.get(l);if(c==null)throw new Error(`no file ${l} in old blockmap`);const f=i.get(l);let u=0;const{checksumToOffset:h,checksumToOldSize:p}=s_(n.get(l),c.offset,r);let E=s.offset;for(let _=0;_<f.checksums.length;E+=f.sizes[_],_++){const v=f.sizes[_],b=f.checksums[_];let T=h.get(b);T!=null&&p.get(b)!==v&&(r.warn(`Checksum ("${b}") matches, but size differs (old: ${p.get(b)}, new: ${v})`),T=void 0),T===void 0?(u++,o!=null&&o.kind===At.DOWNLOAD&&o.end===E?o.end+=v:(o={kind:At.DOWNLOAD,start:E,end:E+v},Rl(o,a,b,_))):o!=null&&o.kind===At.COPY&&o.end===T?o.end+=v:(o={kind:At.COPY,start:T,end:T+v},Rl(o,a,b,_))}return u>0&&r.info(`File${s.name==="file"?"":" "+s.name} has ${u} changed blocks`),a}const o_=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function Rl(e,t,r,n){if(o_&&t.length!==0){const i=t[t.length-1];if(i.kind===e.kind&&e.start<i.end&&e.start>i.start){const o=[i.start,i.end,e.start,e.end].reduce((s,a)=>s<a?s:a);throw new Error(`operation (block index: ${n}, checksum: ${r}, kind: ${At[e.kind]}) overlaps previous operation (checksum: ${r}):
abs: ${i.start} until ${i.end} and ${e.start} until ${e.end}
rel: ${i.start-o} until ${i.end-o} and ${e.start-o} until ${e.end-o}`)}}t.push(e)}function s_(e,t,r){const n=new Map,i=new Map;let o=t;for(let s=0;s<e.checksums.length;s++){const a=e.checksums[s],l=e.sizes[s],c=i.get(a);if(c===void 0)n.set(a,o),i.set(a,l);else if(r.debug!=null){const f=c===l?"(same size)":`(size: ${c}, this size: ${l})`;r.debug(`${a} duplicated in blockmap ${f}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}o+=l}return{checksumToOffset:n,checksumToOldSize:i}}function Il(e){const t=new Map;for(const r of e)t.set(r.name,r);return t}Object.defineProperty(Qt,"__esModule",{value:!0});Qt.DataSplitter=void 0;Qt.copyData=df;const pn=pe,a_=Ne,l_=Nr,c_=Rt,Pl=Buffer.from(`\r
\r
`);var ot;(function(e){e[e.INIT=0]="INIT",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY"})(ot||(ot={}));function df(e,t,r,n,i){const o=(0,a_.createReadStream)("",{fd:r,autoClose:!1,start:e.start,end:e.end-1});o.on("error",n),o.once("end",i),o.pipe(t,{end:!1})}class u_ extends l_.Writable{constructor(t,r,n,i,o,s){super(),this.out=t,this.options=r,this.partIndexToTaskIndex=n,this.partIndexToLength=o,this.finishHandler=s,this.partIndex=-1,this.headerListBuffer=null,this.readState=ot.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=i.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(t,r,n){if(this.isFinished){console.error(`Trailing ignored data: ${t.length} bytes`);return}this.handleData(t).then(n).catch(n)}async handleData(t){let r=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,pn.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const n=Math.min(this.ignoreByteCount,t.length);this.ignoreByteCount-=n,r=n}else if(this.remainingPartDataCount>0){const n=Math.min(this.remainingPartDataCount,t.length);this.remainingPartDataCount-=n,await this.processPartData(t,0,n),r=n}if(r!==t.length){if(this.readState===ot.HEADER){const n=this.searchHeaderListEnd(t,r);if(n===-1)return;r=n,this.readState=ot.BODY,this.headerListBuffer=null}for(;;){if(this.readState===ot.BODY)this.readState=ot.INIT;else{this.partIndex++;let s=this.partIndexToTaskIndex.get(this.partIndex);if(s==null)if(this.isFinished)s=this.options.end;else throw(0,pn.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const a=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(a<s)await this.copyExistingData(a,s);else if(a>s)throw(0,pn.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(r=this.searchHeaderListEnd(t,r),r===-1){this.readState=ot.HEADER;return}}const n=this.partIndexToLength[this.partIndex],i=r+n,o=Math.min(i,t.length);if(await this.processPartStarted(t,r,o),this.remainingPartDataCount=n-(o-r),this.remainingPartDataCount>0)return;if(r=i+this.boundaryLength,r>=t.length){this.ignoreByteCount=this.boundaryLength-(t.length-i);return}}}}copyExistingData(t,r){return new Promise((n,i)=>{const o=()=>{if(t===r){n();return}const s=this.options.tasks[t];if(s.kind!==c_.OperationKind.COPY){i(new Error("Task kind must be COPY"));return}df(s,this.out,this.options.oldFileFd,i,()=>{t++,o()})};o()})}searchHeaderListEnd(t,r){const n=t.indexOf(Pl,r);if(n!==-1)return n+Pl.length;const i=r===0?t:t.slice(r);return this.headerListBuffer==null?this.headerListBuffer=i:this.headerListBuffer=Buffer.concat([this.headerListBuffer,i]),-1}onPartEnd(){const t=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==t)throw(0,pn.newError)(`Expected length: ${t} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(t,r,n){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(t,r,n)}processPartData(t,r,n){this.actualPartLength+=n-r;const i=this.out;return i.write(r===0&&t.length===n?t:t.slice(r,n))?Promise.resolve():new Promise((o,s)=>{i.on("error",s),i.once("drain",()=>{i.removeListener("error",s),o()})})}}Qt.DataSplitter=u_;var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.executeTasksUsingMultipleRangeRequests=f_;ni.checkIsRangesSupported=Po;const Io=pe,Dl=Qt,Nl=Rt;function f_(e,t,r,n,i){const o=s=>{if(s>=t.length){e.fileMetadataBuffer!=null&&r.write(e.fileMetadataBuffer),r.end();return}const a=s+1e3;d_(e,{tasks:t,start:s,end:Math.min(t.length,a),oldFileFd:n},r,()=>o(a),i)};return o}function d_(e,t,r,n,i){let o="bytes=",s=0;const a=new Map,l=[];for(let u=t.start;u<t.end;u++){const h=t.tasks[u];h.kind===Nl.OperationKind.DOWNLOAD&&(o+=`${h.start}-${h.end-1}, `,a.set(s,u),s++,l.push(h.end-h.start))}if(s<=1){const u=h=>{if(h>=t.end){n();return}const p=t.tasks[h++];if(p.kind===Nl.OperationKind.COPY)(0,Dl.copyData)(p,r,t.oldFileFd,i,()=>u(h));else{const E=e.createRequestOptions();E.headers.Range=`bytes=${p.start}-${p.end-1}`;const _=e.httpExecutor.createRequest(E,v=>{Po(v,i)&&(v.pipe(r,{end:!1}),v.once("end",()=>u(h)))});e.httpExecutor.addErrorAndTimeoutHandlers(_,i),_.end()}};u(t.start);return}const c=e.createRequestOptions();c.headers.Range=o.substring(0,o.length-2);const f=e.httpExecutor.createRequest(c,u=>{if(!Po(u,i))return;const h=(0,Io.safeGetHeader)(u,"content-type"),p=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(h);if(p==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${h}"`));return}const E=new Dl.DataSplitter(r,t,a,p[1]||p[2],l,n);E.on("error",i),u.pipe(E),u.on("end",()=>{setTimeout(()=>{f.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(f,i),f.end()}function Po(e,t){if(e.statusCode>=400)return t((0,Io.createHttpError)(e)),!1;if(e.statusCode!==206){const r=(0,Io.safeGetHeader)(e,"accept-ranges");if(r==null||r==="none")return t(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}var ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.ProgressDifferentialDownloadCallbackTransform=void 0;const h_=Nr;var Bt;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(Bt||(Bt={}));class p_ extends h_.Transform{constructor(t,r,n){super(),this.progressDifferentialDownloadInfo=t,this.cancellationToken=r,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=Bt.COPY,this.nextUpdate=this.start+1e3}_transform(t,r,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}if(this.operationType==Bt.COPY){n(null,t);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=i+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),n(null,t)}beginFileCopy(){this.operationType=Bt.COPY}beginRangeDownload(){this.operationType=Bt.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,t(null)}}ii.ProgressDifferentialDownloadCallbackTransform=p_;Object.defineProperty(Hr,"__esModule",{value:!0});Hr.DifferentialDownloader=void 0;const cr=pe,po=pt,m_=Ne,g_=Qt,y_=Yt,mn=Rt,Fl=ni,E_=ii;class v_{constructor(t,r,n){this.blockAwareFileInfo=t,this.httpExecutor=r,this.options=n,this.fileMetadataBuffer=null,this.logger=n.logger}createRequestOptions(){const t={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,cr.configureRequestUrl)(this.options.newUrl,t),(0,cr.configureRequestOptions)(t),t}doDownload(t,r){if(t.version!==r.version)throw new Error(`version is different (${t.version} - ${r.version}), full download is required`);const n=this.logger,i=(0,mn.computeOperations)(t,r,n);n.debug!=null&&n.debug(JSON.stringify(i,null,2));let o=0,s=0;for(const l of i){const c=l.end-l.start;l.kind===mn.OperationKind.DOWNLOAD?o+=c:s+=c}const a=this.blockAwareFileInfo.size;if(o+s+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==a)throw new Error(`Internal error, size mismatch: downloadSize: ${o}, copySize: ${s}, newSize: ${a}`);return n.info(`Full: ${xl(a)}, To download: ${xl(o)} (${Math.round(o/(a/100))}%)`),this.downloadFile(i)}downloadFile(t){const r=[],n=()=>Promise.all(r.map(i=>(0,po.close)(i.descriptor).catch(o=>{this.logger.error(`cannot close file "${i.path}": ${o}`)})));return this.doDownloadFile(t,r).then(n).catch(i=>n().catch(o=>{try{this.logger.error(`cannot close files: ${o}`)}catch(s){try{console.error(s)}catch{}}throw i}).then(()=>{throw i}))}async doDownloadFile(t,r){const n=await(0,po.open)(this.options.oldFile,"r");r.push({descriptor:n,path:this.options.oldFile});const i=await(0,po.open)(this.options.newFile,"w");r.push({descriptor:i,path:this.options.newFile});const o=(0,m_.createWriteStream)(this.options.newFile,{fd:i});await new Promise((s,a)=>{const l=[];let c;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const b=[];let T=0;for(const k of t)k.kind===mn.OperationKind.DOWNLOAD&&(b.push(k.end-k.start),T+=k.end-k.start);const x={expectedByteCounts:b,grandTotal:T};c=new E_.ProgressDifferentialDownloadCallbackTransform(x,this.options.cancellationToken,this.options.onProgress),l.push(c)}const f=new cr.DigestTransform(this.blockAwareFileInfo.sha512);f.isValidateOnEnd=!1,l.push(f),o.on("finish",()=>{o.close(()=>{r.splice(1,1);try{f.validate()}catch(b){a(b);return}s(void 0)})}),l.push(o);let u=null;for(const b of l)b.on("error",a),u==null?u=b:u=u.pipe(b);const h=l[0];let p;if(this.options.isUseMultipleRangeRequest){p=(0,Fl.executeTasksUsingMultipleRangeRequests)(this,t,h,n,a),p(0);return}let E=0,_=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const v=this.createRequestOptions();v.redirect="manual",p=b=>{var T,x;if(b>=t.length){this.fileMetadataBuffer!=null&&h.write(this.fileMetadataBuffer),h.end();return}const k=t[b++];if(k.kind===mn.OperationKind.COPY){c&&c.beginFileCopy(),(0,g_.copyData)(k,h,n,a,()=>p(b));return}const U=`bytes=${k.start}-${k.end-1}`;v.headers.range=U,(x=(T=this.logger)===null||T===void 0?void 0:T.debug)===null||x===void 0||x.call(T,`download range: ${U}`),c&&c.beginRangeDownload();const A=this.httpExecutor.createRequest(v,$=>{$.on("error",a),$.on("aborted",()=>{a(new Error("response has been aborted by the server"))}),$.statusCode>=400&&a((0,cr.createHttpError)($)),$.pipe(h,{end:!1}),$.once("end",()=>{c&&c.endRangeDownload(),++E===100?(E=0,setTimeout(()=>p(b),1e3)):p(b)})});A.on("redirect",($,D,y)=>{this.logger.info(`Redirect to ${w_(y)}`),_=y,(0,cr.configureRequestUrl)(new y_.URL(_),v),A.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(A,a),A.end()},p(0)})}async readRemoteBytes(t,r){const n=Buffer.allocUnsafe(r+1-t),i=this.createRequestOptions();i.headers.range=`bytes=${t}-${r}`;let o=0;if(await this.request(i,s=>{s.copy(n,o),o+=s.length}),o!==n.length)throw new Error(`Received data length ${o} is not equal to expected ${n.length}`);return n}request(t,r){return new Promise((n,i)=>{const o=this.httpExecutor.createRequest(t,s=>{(0,Fl.checkIsRangesSupported)(s,i)&&(s.on("error",i),s.on("aborted",()=>{i(new Error("response has been aborted by the server"))}),s.on("data",r),s.on("end",()=>n()))});this.httpExecutor.addErrorAndTimeoutHandlers(o,i),o.end()})}}Hr.DifferentialDownloader=v_;function xl(e,t=" KB"){return new Intl.NumberFormat("en").format((e/1024).toFixed(2))+t}function w_(e){const t=e.indexOf("?");return t<0?e:e.substring(0,t)}Object.defineProperty(ri,"__esModule",{value:!0});ri.GenericDifferentialDownloader=void 0;const __=Hr;class S_ extends __.DifferentialDownloader{download(t,r){return this.doDownload(t,r)}}ri.GenericDifferentialDownloader=S_;var Ll;function ls(){if(Ll)return wt;Ll=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.NoOpLogger=wt.AppUpdater=void 0;const e=pe,t=Dr,r=Ze,n=xn,i=pt,o=ve,s=Wn,a=Z,l=nf,c=Br,f=Kn,u=of,h=qr,p=Zt(),E=Qn,_=ec,v=Le,b=ri;let T=class hf extends n.EventEmitter{get channel(){return this._channel}set channel(A){if(this._channel!=null){if(typeof A!="string")throw(0,e.newError)(`Channel must be a string, but got: ${A}`,"ERR_UPDATER_INVALID_CHANNEL");if(A.length===0)throw(0,e.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=A,this.allowDowngrade=!0}addAuthHeader(A){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:A})}get netSession(){return(0,u.getNetSession)()}get logger(){return this._logger}set logger(A){this._logger=A??new k}set updateConfigPath(A){this.clientPromise=null,this._appUpdateConfigPath=A,this.configOnDisk=new s.Lazy(()=>this.loadUpdateConfig())}constructor(A,$){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new p.UpdaterSignal(this),this._appUpdateConfigPath=null,this.clientPromise=null,this.stagingUserIdPromise=new s.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new s.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",j=>{this._logger.error(`Error: ${j.stack||j.message}`)}),$==null?(this.app=new f.ElectronAppAdapter,this.httpExecutor=new u.ElectronHttpExecutor((j,B)=>this.emit("login",j,B))):(this.app=$,this.httpExecutor=null);const D=this.app.version,y=(0,l.parse)(D);if(y==null)throw(0,e.newError)(`App version is not a valid semver version: "${D}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=y,this.allowPrerelease=x(y),A!=null&&(this.setFeedURL(A),typeof A!="string"&&A.requestHeaders&&(this.requestHeaders=A.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(A){const $=this.createProviderRuntimeOptions();let D;typeof A=="string"?D=new h.GenericProvider({provider:"generic",url:A},this,{...$,isUseMultipleRangeRequest:(0,E.isUrlProbablySupportMultiRangeRequests)(A)}):D=(0,E.createClient)(A,this,$),this.clientPromise=Promise.resolve(D)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let A=this.checkForUpdatesPromise;if(A!=null)return this._logger.info("Checking for update (already in progress)"),A;const $=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),A=this.doCheckForUpdates().then(D=>($(),D)).catch(D=>{throw $(),this.emit("error",D,`Cannot check for updates: ${(D.stack||D).toString()}`),D}),this.checkForUpdatesPromise=A,A}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(A){return this.checkForUpdates().then($=>$!=null&&$.downloadPromise?($.downloadPromise.then(()=>{const D=hf.formatDownloadNotification($.updateInfo.version,this.app.name,A);new se.Notification(D).show()}),$):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),$))}static formatDownloadNotification(A,$,D){return D==null&&(D={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),D={title:D.title.replace("{appName}",$).replace("{version}",A),body:D.body.replace("{appName}",$).replace("{version}",A)},D}async isStagingMatch(A){const $=A.stagingPercentage;let D=$;if(D==null)return!0;if(D=parseInt(D,10),isNaN(D))return this._logger.warn(`Staging percentage is NaN: ${$}`),!0;D=D/100;const y=await this.stagingUserIdPromise.value,B=e.UUID.parse(y).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${D}, percentage: ${B}, user id: ${y}`),B<D}computeFinalHeaders(A){return this.requestHeaders!=null&&Object.assign(A,this.requestHeaders),A}async isUpdateAvailable(A){const $=(0,l.parse)(A.version);if($==null)throw(0,e.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${A.version}"`,"ERR_UPDATER_INVALID_VERSION");const D=this.currentVersion;if((0,l.eq)($,D))return!1;const y=A==null?void 0:A.minimumSystemVersion,j=(0,r.release)();if(y)try{if((0,l.lt)(j,y))return this._logger.info(`Current OS version ${j} is less than the minimum OS version required ${y} for version ${j}`),!1}catch(P){this._logger.warn(`Failed to compare current OS version(${j}) with minimum OS version(${y}): ${(P.message||P).toString()}`)}if(!await this.isStagingMatch(A))return!1;const H=(0,l.gt)($,D),z=(0,l.lt)($,D);return H?!0:this.allowDowngrade&&z}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(D=>(0,E.createClient)(D,this,this.createProviderRuntimeOptions())));const A=await this.clientPromise,$=await this.stagingUserIdPromise.value;return A.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":$})),{info:await A.getLatestVersion(),provider:A}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const A=await this.getUpdateInfoAndProvider(),$=A.info;if(!await this.isUpdateAvailable($))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${$.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",$),{versionInfo:$,updateInfo:$};this.updateInfoAndProvider=A,this.onUpdateAvailable($);const D=new e.CancellationToken;return{versionInfo:$,updateInfo:$,cancellationToken:D,downloadPromise:this.autoDownload?this.downloadUpdate(D):null}}onUpdateAvailable(A){this._logger.info(`Found version ${A.version} (url: ${(0,e.asArray)(A.files).map($=>$.url).join(", ")})`),this.emit("update-available",A)}downloadUpdate(A=new e.CancellationToken){const $=this.updateInfoAndProvider;if($==null){const y=new Error("Please check update first");return this.dispatchError(y),Promise.reject(y)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,e.asArray)($.info.files).map(y=>y.url).join(", ")}`);const D=y=>{if(!(y instanceof e.CancellationError))try{this.dispatchError(y)}catch(j){this._logger.warn(`Cannot dispatch error event: ${j.stack||j}`)}return y};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:$,requestHeaders:this.computeRequestHeaders($.provider),cancellationToken:A,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(y=>{throw D(y)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(A){this.emit("error",A,(A.stack||A).toString())}dispatchUpdateDownloaded(A){this.emit(p.UPDATE_DOWNLOADED,A)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,o.load)(await(0,i.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(A){const $=A.fileExtraDownloadHeaders;if($!=null){const D=this.requestHeaders;return D==null?$:{...$,...D}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const A=a.join(this.app.userDataPath,".updaterId");try{const D=await(0,i.readFile)(A,"utf-8");if(e.UUID.check(D))return D;this._logger.warn(`Staging user id file exists, but content was invalid: ${D}`)}catch(D){D.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${D}`)}const $=e.UUID.v5((0,t.randomBytes)(4096),e.UUID.OID);this._logger.info(`Generated new staging user ID: ${$}`);try{await(0,i.outputFile)(A,$)}catch(D){this._logger.warn(`Couldn't write out staging user ID: ${D}`)}return $}get isAddNoCacheQuery(){const A=this.requestHeaders;if(A==null)return!0;for(const $ of Object.keys(A)){const D=$.toLowerCase();if(D==="authorization"||D==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let A=this.downloadedUpdateHelper;if(A==null){const $=(await this.configOnDisk.value).updaterCacheDirName,D=this._logger;$==null&&D.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const y=a.join(this.app.baseCachePath,$||this.app.name);D.debug!=null&&D.debug(`updater cache dir: ${y}`),A=new c.DownloadedUpdateHelper(y),this.downloadedUpdateHelper=A}return A}async executeDownload(A){const $=A.fileInfo,D={headers:A.downloadUpdateOptions.requestHeaders,cancellationToken:A.downloadUpdateOptions.cancellationToken,sha2:$.info.sha2,sha512:$.info.sha512};this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(D.onProgress=K=>this.emit(p.DOWNLOAD_PROGRESS,K));const y=A.downloadUpdateOptions.updateInfoAndProvider.info,j=y.version,B=$.packageInfo;function H(){const K=decodeURIComponent(A.fileInfo.url.pathname);return K.endsWith(`.${A.fileExtension}`)?a.basename(K):A.fileInfo.info.url}const z=await this.getOrCreateDownloadHelper(),P=z.cacheDirForPendingUpdate;await(0,i.mkdir)(P,{recursive:!0});const C=H();let N=a.join(P,C);const O=B==null?null:a.join(P,`package-${j}${a.extname(B.path)||".7z"}`),L=async K=>(await z.setDownloadedFile(N,O,y,$,C,K),await A.done({...y,downloadedFile:N}),O==null?[N]:[N,O]),F=this._logger,G=await z.validateDownloadedPath(N,y,$,F);if(G!=null)return N=G,await L(!1);const Y=async()=>(await z.clear().catch(()=>{}),await(0,i.unlink)(N).catch(()=>{})),V=await(0,c.createTempUpdateFile)(`temp-${C}`,P,F);try{await A.task(V,D,O,Y),await(0,e.retry)(()=>(0,i.rename)(V,N),60,500,0,0,K=>K instanceof Error&&/^EBUSY:/.test(K.message))}catch(K){throw await Y(),K instanceof e.CancellationError&&(F.info("cancelled"),this.emit("update-cancelled",y)),K}return F.info(`New version ${j} has been downloaded to ${N}`),await L(!0)}async differentialDownloadInstaller(A,$,D,y,j){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const B=(0,v.blockmapFiles)(A.url,this.app.version,$.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${B[0]}", new: ${B[1]})`);const H=async C=>{const N=await this.httpExecutor.downloadToBuffer(C,{headers:$.requestHeaders,cancellationToken:$.cancellationToken});if(N==null||N.length===0)throw new Error(`Blockmap "${C.href}" is empty`);try{return JSON.parse((0,_.gunzipSync)(N).toString())}catch(O){throw new Error(`Cannot parse blockmap "${C.href}", error: ${O}`)}},z={newUrl:A.url,oldFile:a.join(this.downloadedUpdateHelper.cacheDir,j),logger:this._logger,newFile:D,isUseMultipleRangeRequest:y.isUseMultipleRangeRequest,requestHeaders:$.requestHeaders,cancellationToken:$.cancellationToken};this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(z.onProgress=C=>this.emit(p.DOWNLOAD_PROGRESS,C));const P=await Promise.all(B.map(C=>H(C)));return await new b.GenericDifferentialDownloader(A.info,this.httpExecutor,z).download(P[0],P[1]),!1}catch(B){if(this._logger.error(`Cannot download differentially, fallback to full download: ${B.stack||B}`),this._testOnlyOptions!=null)throw B;return!0}}};wt.AppUpdater=T;function x(U){const A=(0,l.prerelease)(U);return A!=null&&A.length>0}class k{info(A){}warn(A){}error(A){}}return wt.NoOpLogger=k,wt}var Ul;function Gr(){if(Ul)return sr;Ul=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.BaseUpdater=void 0;const e=Pr,t=ls();let r=class extends t.AppUpdater{constructor(i,o){super(i,o),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(i=!1,o=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(i,i?o:this.autoRunAppAfterInstall)?setImmediate(()=>{se.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(i){return super.executeDownload({...i,done:o=>(this.dispatchUpdateDownloaded(o),this.addQuitHandler(),Promise.resolve())})}install(i=!1,o=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const s=this.downloadedUpdateHelper,a=s&&s.file?process.platform==="linux"?s.file.replace(/ /g,"\\ "):s.file:null,l=s==null?null:s.downloadedFileInfo;if(a==null||l==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${i}, isForceRunAfter: ${o}`),this.doInstall({installerPath:a,isSilent:i,isForceRunAfter:o,isAdminRightsRequired:l.isAdminRightsRequired})}catch(c){return this.dispatchError(c),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(i=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(i!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${i}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:i}=this.app,o=`"${i} would like to update"`,s=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),a=[s];return/kdesudo/i.test(s)?(a.push("--comment",o),a.push("-c")):/gksudo/i.test(s)?a.push("--message",o):/pkexec/i.test(s)&&a.push("--disable-internal-agent"),a.join(" ")}spawnSyncLog(i,o=[],s={}){return this._logger.info(`Executing: ${i} with args: ${o}`),(0,e.spawnSync)(i,o,{env:{...process.env,...s},encoding:"utf-8",shell:!0}).stdout.trim()}async spawnLog(i,o=[],s=void 0,a="ignore"){return this._logger.info(`Executing: ${i} with args: ${o}`),new Promise((l,c)=>{try{const f={stdio:a,env:s,detached:!0},u=(0,e.spawn)(i,o,f);u.on("error",h=>{c(h)}),u.unref(),u.pid!==void 0&&l(!0)}catch(f){c(f)}})}};return sr.BaseUpdater=r,sr}var ur={},Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const xt=pt,A_=Hr,b_=ec;class T_ extends A_.DifferentialDownloader{async download(){const t=this.blockAwareFileInfo,r=t.size,n=r-(t.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(n,r-1);const i=pf(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await C_(this.options.oldFile),i)}}Wr.FileWithEmbeddedBlockMapDifferentialDownloader=T_;function pf(e){return JSON.parse((0,b_.inflateRawSync)(e).toString())}async function C_(e){const t=await(0,xt.open)(e,"r");try{const r=(await(0,xt.fstat)(t)).size,n=Buffer.allocUnsafe(4);await(0,xt.read)(t,n,0,n.length,r-n.length);const i=Buffer.allocUnsafe(n.readUInt32BE(0));return await(0,xt.read)(t,i,0,i.length,r-n.length-i.length),await(0,xt.close)(t),pf(i)}catch(r){throw await(0,xt.close)(t),r}}var kl;function Ml(){if(kl)return ur;kl=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.AppImageUpdater=void 0;const e=pe,t=Pr,r=pt,n=Ne,i=Z,o=Gr(),s=Wr,a=Zt(),l=me;let c=class extends o.BaseUpdater{constructor(u,h){super(u,h)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(u){const h=u.updateInfoAndProvider.provider,p=(0,l.findFile)(h.resolveFiles(u.updateInfoAndProvider.info),"AppImage",["rpm","deb"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:p,downloadUpdateOptions:u,task:async(E,_)=>{const v=process.env.APPIMAGE;if(v==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");let b=!1;try{const T={newUrl:p.url,oldFile:v,logger:this._logger,newFile:E,isUseMultipleRangeRequest:h.isUseMultipleRangeRequest,requestHeaders:u.requestHeaders,cancellationToken:u.cancellationToken};this.listenerCount(a.DOWNLOAD_PROGRESS)>0&&(T.onProgress=x=>this.emit(a.DOWNLOAD_PROGRESS,x)),await new s.FileWithEmbeddedBlockMapDifferentialDownloader(p.info,this.httpExecutor,T).download()}catch(T){this._logger.error(`Cannot download differentially, fallback to full download: ${T.stack||T}`),b=process.platform==="linux"}b&&await this.httpExecutor.download(p.url,E,_),await(0,r.chmod)(E,493)}})}doInstall(u){const h=process.env.APPIMAGE;if(h==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,n.unlinkSync)(h);let p;const E=i.basename(h);i.basename(u.installerPath)===E||!/\d+\.\d+\.\d+/.test(E)?p=h:p=i.join(i.dirname(h),i.basename(u.installerPath)),(0,t.execFileSync)("mv",["-f",u.installerPath,p]),p!==h&&this.emit("appimage-filename-updated",p);const _={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return u.isForceRunAfter?this.spawnLog(p,[],_):(_.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,t.execFileSync)(p,[],{env:_})),!0}};return ur.AppImageUpdater=c,ur}var fr={},jl;function Bl(){if(jl)return fr;jl=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.DebUpdater=void 0;const e=Gr(),t=Zt(),r=me;let n=class extends e.BaseUpdater{constructor(o,s){super(o,s)}doDownloadUpdate(o){const s=o.updateInfoAndProvider.provider,a=(0,r.findFile)(s.resolveFiles(o.updateInfoAndProvider.info),"deb",["AppImage","rpm"]);return this.executeDownload({fileExtension:"deb",fileInfo:a,downloadUpdateOptions:o,task:async(l,c)=>{this.listenerCount(t.DOWNLOAD_PROGRESS)>0&&(c.onProgress=f=>this.emit(t.DOWNLOAD_PROGRESS,f)),await this.httpExecutor.download(a.url,l,c)}})}doInstall(o){const s=this.wrapSudo(),a=/pkexec/i.test(s)?"":'"',l=["dpkg","-i",o.installerPath,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(s,[`${a}/bin/bash`,"-c",`'${l.join(" ")}'${a}`]),o.isForceRunAfter&&this.app.relaunch(),!0}};return fr.DebUpdater=n,fr}var dr={},ql;function Hl(){if(ql)return dr;ql=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.RpmUpdater=void 0;const e=Gr(),t=Zt(),r=me;let n=class extends e.BaseUpdater{constructor(o,s){super(o,s)}doDownloadUpdate(o){const s=o.updateInfoAndProvider.provider,a=(0,r.findFile)(s.resolveFiles(o.updateInfoAndProvider.info),"rpm",["AppImage","deb"]);return this.executeDownload({fileExtension:"rpm",fileInfo:a,downloadUpdateOptions:o,task:async(l,c)=>{this.listenerCount(t.DOWNLOAD_PROGRESS)>0&&(c.onProgress=f=>this.emit(t.DOWNLOAD_PROGRESS,f)),await this.httpExecutor.download(a.url,l,c)}})}doInstall(o){const s=o.installerPath,a=this.wrapSudo(),l=/pkexec/i.test(a)?"":'"',c=this.spawnSyncLog("which zypper");let f;return c?f=[c,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",s]:f=[this.spawnSyncLog("which dnf || which yum"),"-y","install",s],this.spawnSyncLog(a,[`${l}/bin/bash`,"-c",`'${f.join(" ")}'${l}`]),o.isForceRunAfter&&this.app.relaunch(),!0}};return dr.RpmUpdater=n,dr}var hr={},Gl;function Wl(){if(Gl)return hr;Gl=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.MacUpdater=void 0;const e=pe,t=pt,r=Ne,n=Z,i=Kl,o=ls(),s=me,a=Pr,l=Dr;let c=class extends o.AppUpdater{constructor(u,h){super(u,h),this.nativeUpdater=se.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",p=>{this._logger.warn(p),this.emit("error",p)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(u){this._logger.debug!=null&&this._logger.debug(u)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(u=>{u&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(u){let h=u.updateInfoAndProvider.provider.resolveFiles(u.updateInfoAndProvider.info);const p=this._logger,E="sysctl.proc_translated";let _=!1;try{this.debug("Checking for macOS Rosetta environment"),_=(0,a.execFileSync)("sysctl",[E],{encoding:"utf8"}).includes(`${E}: 1`),p.info(`Checked for macOS Rosetta environment (isRosetta=${_})`)}catch(U){p.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${U}`)}let v=!1;try{this.debug("Checking for arm64 in uname");const A=(0,a.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");p.info(`Checked 'uname -a': arm64=${A}`),v=v||A}catch(U){p.warn(`uname shell command to check for arm64 failed: ${U}`)}v=v||process.arch==="arm64"||_;const b=U=>{var A;return U.url.pathname.includes("arm64")||((A=U.info.url)===null||A===void 0?void 0:A.includes("arm64"))};v&&h.some(b)?h=h.filter(U=>v===b(U)):h=h.filter(U=>!b(U));const T=(0,s.findFile)(h,"zip",["pkg","dmg"]);if(T==null)throw(0,e.newError)(`ZIP file not provided: ${(0,e.safeStringifyJson)(h)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const x=u.updateInfoAndProvider.provider,k="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:T,downloadUpdateOptions:u,task:async(U,A)=>{const $=n.join(this.downloadedUpdateHelper.cacheDir,k),D=()=>(0,t.pathExistsSync)($)?!u.disableDifferentialDownload:(p.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let y=!0;D()&&(y=await this.differentialDownloadInstaller(T,u,U,x,k)),y&&await this.httpExecutor.download(T.url,U,A)},done:U=>{if(!u.disableDifferentialDownload)try{const A=n.join(this.downloadedUpdateHelper.cacheDir,k);(0,r.copyFileSync)(U.downloadedFile,A)}catch(A){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${A.message}`)}return this.updateDownloaded(T,U)}})}async updateDownloaded(u,h){var p;const E=h.downloadedFile,_=(p=u.info.size)!==null&&p!==void 0?p:(await(0,t.stat)(E)).size,v=this._logger,b=`fileToProxy=${u.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${b})`),this.server=(0,i.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${b})`),this.server.on("close",()=>{v.info(`Proxy server for native Squirrel.Mac is closed (${b})`)});const T=x=>{const k=x.address();return typeof k=="string"?k:`http://127.0.0.1:${k==null?void 0:k.port}`};return await new Promise((x,k)=>{const U=(0,l.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),A=Buffer.from(`autoupdater:${U}`,"ascii"),$=`/${(0,l.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(D,y)=>{const j=D.url;if(v.info(`${j} requested`),j==="/"){if(!D.headers.authorization||D.headers.authorization.indexOf("Basic ")===-1){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),v.warn("No authenthication info");return}const z=D.headers.authorization.split(" ")[1],P=Buffer.from(z,"base64").toString("ascii"),[C,N]=P.split(":");if(C!=="autoupdater"||N!==U){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),v.warn("Invalid authenthication credentials");return}const O=Buffer.from(`{ "url": "${T(this.server)}${$}" }`);y.writeHead(200,{"Content-Type":"application/json","Content-Length":O.length}),y.end(O);return}if(!j.startsWith($)){v.warn(`${j} requested, but not supported`),y.writeHead(404),y.end();return}v.info(`${$} requested by Squirrel.Mac, pipe ${E}`);let B=!1;y.on("finish",()=>{B||(this.nativeUpdater.removeListener("error",k),x([]))});const H=(0,r.createReadStream)(E);H.on("error",z=>{try{y.end()}catch(P){v.warn(`cannot end response: ${P}`)}B=!0,this.nativeUpdater.removeListener("error",k),k(new Error(`Cannot pipe "${E}": ${z}`))}),y.writeHead(200,{"Content-Type":"application/zip","Content-Length":_}),H.pipe(y)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${b})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${T(this.server)}, ${b})`),this.nativeUpdater.setFeedURL({url:T(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${A.toString("base64")}`}}),this.dispatchUpdateDownloaded(h),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",k),this.nativeUpdater.checkForUpdates()):x([])})})}quitAndInstall(){this.squirrelDownloadedUpdate?(this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()):(this.nativeUpdater.on("update-downloaded",()=>{this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()}),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return hr.MacUpdater=c,hr}var pr={},cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.verifySignature=$_;const Vl=pe,mf=Pr,O_=Ze,zl=Z;function $_(e,t,r){return new Promise((n,i)=>{const o=t.replace(/'/g,"''");r.info(`Verifying signature ${o}`),(0,mf.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${o}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(s,a,l)=>{var c;try{if(s!=null||l){mo(r,s,l,i),n(null);return}const f=R_(a);if(f.Status===0){try{const E=zl.normalize(f.Path),_=zl.normalize(t);if(r.info(`LiteralPath: ${E}. Update Path: ${_}`),E!==_){mo(r,new Error(`LiteralPath of ${E} is different than ${_}`),l,i),n(null);return}}catch(E){r.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(c=E.message)!==null&&c!==void 0?c:E.stack}`)}const h=(0,Vl.parseDn)(f.SignerCertificate.Subject);let p=!1;for(const E of e){const _=(0,Vl.parseDn)(E);if(_.size?p=Array.from(_.keys()).every(b=>_.get(b)===h.get(b)):E===h.get("CN")&&(r.warn(`Signature validated using only CN ${E}. Please add your full Distinguished Name (DN) to publisherNames configuration`),p=!0),p){n(null);return}}}const u=`publisherNames: ${e.join(" | ")}, raw info: `+JSON.stringify(f,(h,p)=>h==="RawData"?void 0:p,2);r.warn(`Sign verification failed, installer signed with incorrect certificate: ${u}`),n(u)}catch(f){mo(r,f,null,i),n(null);return}})})}function R_(e){const t=JSON.parse(e);delete t.PrivateKey,delete t.IsOSBinary,delete t.SignatureType;const r=t.SignerCertificate;return r!=null&&(delete r.Archived,delete r.Extensions,delete r.Handle,delete r.HasPrivateKey,delete r.SubjectName),t}function mo(e,t,r,n){if(I_()){e.warn(`Cannot execute Get-AuthenticodeSignature: ${t||r}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,mf.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(i){e.warn(`Cannot execute ConvertTo-Json: ${i.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}t!=null&&n(t),r&&n(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${r}. Failing signature validation due to unknown stderr.`))}function I_(){const e=O_.release();return e.startsWith("6.")&&!e.startsWith("6.3")}var Yl;function Xl(){if(Yl)return pr;Yl=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.NsisUpdater=void 0;const e=pe,t=Z,r=Gr(),n=Wr,i=Zt(),o=me,s=pt,a=cs,l=Yt;let c=class extends r.BaseUpdater{constructor(u,h){super(u,h),this._verifyUpdateCodeSignature=(p,E)=>(0,a.verifySignature)(p,E,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(u){u&&(this._verifyUpdateCodeSignature=u)}doDownloadUpdate(u){const h=u.updateInfoAndProvider.provider,p=(0,o.findFile)(h.resolveFiles(u.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:u,fileInfo:p,task:async(E,_,v,b)=>{const T=p.packageInfo,x=T!=null&&v!=null;if(x&&u.disableWebInstaller)throw(0,e.newError)(`Unable to download new version ${u.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!x&&!u.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(x||u.disableDifferentialDownload||await this.differentialDownloadInstaller(p,u,E,h,e.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(p.url,E,_);const k=await this.verifySignature(E);if(k!=null)throw await b(),(0,e.newError)(`New version ${u.updateInfoAndProvider.info.version} is not signed by the application owner: ${k}`,"ERR_UPDATER_INVALID_SIGNATURE");if(x&&await this.differentialDownloadWebPackage(u,T,v,h))try{await this.httpExecutor.download(new l.URL(T.path),v,{headers:u.requestHeaders,cancellationToken:u.cancellationToken,sha512:T.sha512})}catch(U){try{await(0,s.unlink)(v)}catch{}throw U}}})}async verifySignature(u){let h;try{if(h=(await this.configOnDisk.value).publisherName,h==null)return null}catch(p){if(p.code==="ENOENT")return null;throw p}return await this._verifyUpdateCodeSignature(Array.isArray(h)?h:[h],u)}doInstall(u){const h=["--updated"];u.isSilent&&h.push("/S"),u.isForceRunAfter&&h.push("--force-run"),this.installDirectory&&h.push(`/D=${this.installDirectory}`);const p=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;p!=null&&h.push(`--package-file=${p}`);const E=()=>{this.spawnLog(t.join(process.resourcesPath,"elevate.exe"),[u.installerPath].concat(h)).catch(_=>this.dispatchError(_))};return u.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),E(),!0):(this.spawnLog(u.installerPath,h).catch(_=>{const v=_.code;this._logger.info(`Cannot run installer: error code: ${v}, error message: "${_.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),v==="UNKNOWN"||v==="EACCES"?E():v==="ENOENT"?se.shell.openPath(u.installerPath).catch(b=>this.dispatchError(b)):this.dispatchError(_)}),!0)}async differentialDownloadWebPackage(u,h,p,E){if(h.blockMapSize==null)return!0;try{const _={newUrl:new l.URL(h.path),oldFile:t.join(this.downloadedUpdateHelper.cacheDir,e.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:p,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:E.isUseMultipleRangeRequest,cancellationToken:u.cancellationToken};this.listenerCount(i.DOWNLOAD_PROGRESS)>0&&(_.onProgress=v=>this.emit(i.DOWNLOAD_PROGRESS,v)),await new n.FileWithEmbeddedBlockMapDifferentialDownloader(h,this.httpExecutor,_).download()}catch(_){return this._logger.error(`Cannot download differentially, fallback to full download: ${_.stack||_}`),process.platform==="win32"}return!1}};return pr.NsisUpdater=c,pr}var Jl;function Zt(){return Jl||(Jl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.CancellationToken=e.NoOpLogger=e.AppUpdater=e.BaseUpdater=void 0;const t=pe;Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}});const r=pt,n=Z;var i=Gr();Object.defineProperty(e,"BaseUpdater",{enumerable:!0,get:function(){return i.BaseUpdater}});var o=ls();Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return o.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return o.NoOpLogger}});var s=me;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return s.Provider}});var a=Ml();Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return a.AppImageUpdater}});var l=Bl();Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return l.DebUpdater}});var c=Hl();Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return c.RpmUpdater}});var f=Wl();Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return f.MacUpdater}});var u=Xl();Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return u.NsisUpdater}});let h;function p(){if(process.platform==="win32")h=new(Xl()).NsisUpdater;else if(process.platform==="darwin")h=new(Wl()).MacUpdater;else{h=new(Ml()).AppImageUpdater;try{const v=n.join(process.resourcesPath,"package-type");if(!(0,r.existsSync)(v))return h;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const b=(0,r.readFileSync)(v).toString().trim();switch(console.info("Found package-type:",b),b){case"deb":h=new(Bl()).DebUpdater;break;case"rpm":h=new(Hl()).RpmUpdater;break;default:break}}catch(v){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",v.message)}}return h}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>h||p()}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class E{constructor(b){this.emitter=b}login(b){_(this.emitter,"login",b)}progress(b){_(this.emitter,e.DOWNLOAD_PROGRESS,b)}updateDownloaded(b){_(this.emitter,e.UPDATE_DOWNLOADED,b)}updateCancelled(b){_(this.emitter,"update-cancelled",b)}}e.UpdaterSignal=E;function _(v,b,T){v.on(b,T)}}(Bi)),Bi}var P_=Zt();const D_=tc(P_),N_=e=>{const t=D_.autoUpdater;t.logger=console,t.forceDevUpdateConfig=!0,t.autoDownload=!1,t.checkForUpdates().then(r=>console.info(r)).catch(r=>console.error(r)),t.on("checking-for-update",()=>{e.webContents.send("checking-for-update")}),t.on("update-available",r=>{e.webContents.send("update-available",r)}),t.on("update-not-available",r=>{e.webContents.send("update-not-available",r)}),t.on("download-progress",r=>{e.webContents.send("download-progress",r)}),t.on("update-downloaded",r=>{e.webContents.send("update-downloaded",r)}),se.ipcMain.on("download-update",()=>{t.downloadUpdate()}),se.ipcMain.on("install-update",()=>{t.quitAndInstall()}),se.ipcMain.on("cancel-update",()=>{t.removeAllListeners("update-downloaded"),t.removeAllListeners("download-progress")})},F_=()=>{const e=Ze.networkInterfaces(),t=Object.entries(e).flatMap(([r,n])=>n.map(i=>({...i,interfaceName:r}))).filter(r=>r.family==="IPv4").filter(r=>!r.internal);if(t.length===0)throw new Error("No network interfaces found.");return t.map(r=>{const n=r.address.split(".").slice(0,3).join("."),i=[];for(let o=1;o<=254;o++)i.push(`${n}.${o}`);return{topSideAddress:r.address,macAddress:r.mac,interfaceName:r.interfaceName,availableAddresses:i}})},x_=()=>{se.ipcMain.handle("get-info-on-subnets",F_)};se.app.isPackaged&&Object.assign(console,Wd.functions);const _n={dist:Z.join(__dirname,"..")};let _r;function L_(){const{width:e,height:t}=se.screen.getPrimaryDisplay().workAreaSize;_r=new se.BrowserWindow({icon:Z.join(_n.dist,"pwa-512x512.png"),webPreferences:{preload:Z.join(_n.dist,"electron/preload.js"),contextIsolation:!0,nodeIntegration:!1},width:e,height:t}),process.env.VITE_DEV_SERVER_URL?_r.loadURL(process.env.VITE_DEV_SERVER_URL):_r.loadFile(Z.join(_n.dist,"index.html"))}se.app.on("window-all-closed",()=>{console.log("Closing application."),_r=null,se.app.quit()});se.app.on("ready",()=>{se.protocol.registerFileProtocol("file",(e,t)=>{t({path:e.url.substring(7)})})});se.protocol.registerSchemesAsPrivileged([{scheme:"file",privileges:{secure:!0,standard:!0,supportFetchAPI:!0,allowServiceWorkers:!0}}]);x_();se.app.whenReady().then(async()=>{console.log("Electron app is ready."),console.log(`Cockpit version: ${se.app.getVersion()}`),console.log("Creating window..."),L_(),setTimeout(()=>{N_(_r)},5e3)});se.app.on("before-quit",()=>{});exports.ROOT_PATH=_n;
